!function e(t,r,n){function s(a,i){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!i&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=r[a]={exports:{}};t[a][0].call(d.exports,function(e){var r=t[a][1][e];return s(r?r:e)},d,d.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)s(n[a]);return s}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.ShelvedBookOrigin={BROWSE_SPOTLIGHT:"browse_spotlight",RECS_WIDGET:"recs_widget"}},{}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.URLTrackingParams={FROM_SEARCH_PARAM:"from_search=true",BOOK_SHOW_INTERACTION_PARAM:"ac=1"}},{}],3:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function s(e,t,r,n,s,o){var a=arguments.length<=6||void 0===arguments[6]?null:arguments[6],i=arguments.length<=7||void 0===arguments[7]?!1:arguments[7];window.googletag.cmd.push(function(){m(e,t,r,n,s,o,a,i),d["default"].hasRequestedCreativeForSlot(e)})}function o(e,t,r){window.googletag.cmd.push(function(){var n=window.googletag,s=n.defineSlot(t,p[r],e);s.addService(n.pubads())})}function a(e){if(!window.googletag){var t=window.googletag=window.googletag||{};t.cmd=t.cmd||[],t.cmd.push(function(){e&&f["default"].each(e,function(e,r){t.pubads().setTargeting(r,e.toString())}),t.pubads().enableAsyncRendering(),t.pubads().collapseEmptyDivs(!0),t.pubads().enableSingleRequest(),t.enableServices()})}}function i(){$j(function(){var e=document.createElement("script");e.async=!0,e.type="text/javascript";var t="https:"==document.location.protocol;e.src=(t?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(e,r)})}Object.defineProperty(r,"__esModule",{value:!0}),r.requestCreativeForAdSlot=s,r.defineSlot=o,r.initGooglePublisherTag=a,r.addGooglePublisherTagScript=i;var l=e("../../react_stores/google_ads_store"),u=e("../../react_actions/google_ads_actions"),d=n(u),c=e("lodash"),f=n(c),p={"300x250":[300,250],"970x66":[970,66],"160x600":[160,600],"300x140":[300,140],"728x90":[728,90],"625x210":[625,210],"640x480":[640,480],"300x225":[300,225],"300x175":[300,175],"320x50":[320,50]},m=function(e,t,r,n,s,o){var a=arguments.length<=6||void 0===arguments[6]?null:arguments[6],i=arguments.length<=7||void 0===arguments[7]?!1:arguments[7],u=window.googletag;u.pubads().addEventListener("slotRenderEnded",function(n){if(n.slot.getSlotId().getDomId()==e)if(n.isEmpty)d["default"].trackImpression(e,l.ImpressionCode.empty);else{d["default"].displayCreativeForSlot(e);var u=$j(t).find('iframe[id^="google_ads_iframe_"]'),c=u.contents().find(r);if(o){var f=c.data("id"),p=c.data("url");f&&p?d["default"].attachServedNativeAdAttributesAndTracking(e,n.lineItemId,c,f,l.ImpressionCode.success):d["default"].trackImpression(e,l.ImpressionCode.dfpError)}else i?!function(){var t={id:c.data("id"),line_item_id:n.lineItemId,ad_unit:n.slot.getName().split("/",3)[2],ad_device_type:a},r=u.closest("td");$j.each(["offset","index"],function(e,n){t[n]=r.attr(n)}),d["default"].populateHomepagePollAndTracking(e,n.lineItemId,c,t)}():d["default"].attachServedBannerAdAttributesAndTracking(e,n.lineItemId,c,l.ImpressionCode.success);"160x600"===s&&$j(".mainContentContainer").addClass("adSkinEnabled")}}),u.display(e)}},{"../../react_actions/google_ads_actions":17,"../../react_stores/google_ads_store":112,lodash:"lodash"}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.BOOK_ORIGINS={CURRENTLY_READING_WIDGET:"currently-reading-widget"}},{}],5:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function s(e){var t=arguments.length<=1||void 0===arguments[1]?(0,l["default"])():arguments[1],r=arguments.length<=2||void 0===arguments[2]?null:arguments[2];t.locale("en-abbreviated"),e=null!==r?r:(0,l["default"])(e).locale("en-abbreviated");var n=t.diff(e,"days"),s=t.diff(e,"months");return a["default"].inRange(s,1,13)?t.subtract(n,"days").format("DD MMM"):s>12?t.subtract(n,"days").format("DD MMM YY"):a["default"].inRange(n,7,28)?Math.ceil(n/7)+"w":e.fromNow()}Object.defineProperty(r,"__esModule",{value:!0}),r.fromNow=s;var o=e("lodash"),a=n(o),i=e("moment"),l=n(i);l["default"].relativeTimeThreshold("s",60),l["default"].relativeTimeThreshold("m",60),l["default"].relativeTimeThreshold("h",24),l["default"].relativeTimeThreshold("d",25),l["default"].relativeTimeThreshold("M",10),l["default"].locale("en-abbreviated",{relativeTime:{future:"in %s",past:"%s",s:"Just now",m:"1m",mm:"%dm",h:"1h",hh:"%dh",d:"1d",dd:"%dd",M:"a month",MM:"%d months",y:"a year",yy:"%d years"}}),l["default"].locale("en")},{lodash:"lodash",moment:"moment"}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.DEFAULT_SHELVES={READ:{name:"read",displayName:"Read"},CURRENTLY_READING:{name:"currently-reading",displayName:"Currently Reading"},WANT_TO_READ:{name:"to-read",displayName:"Want to Read"}}},{}],7:[function(e,t,r){"use strict";t.exports={PRODUCTION:"production",DEVELOPMENT:"development",TEST:"test",getCurrentPath:function(){return window?window.encodeURIComponent(window.location.pathname+window.location.search):void 0},setLocationUrl:function(e){window&&(window.location.href=e)}}},{}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.ICON_SIZES={SMALL:"small",MEDIUM:"medium",LARGE:"large"}},{}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={enter:13,escape:27,space:32,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40};r["default"]={isEnter:function(e){return e===n.enter},isEscape:function(e){return e===n.escape},isSpace:function(e){return e===n.space},isArrowLeft:function(e){return e===n.leftArrow},isArrowUp:function(e){return e===n.upArrow},isArrowRight:function(e){return e===n.rightArrow},isArrowDown:function(e){return e===n.downArrow},isDropdownOpenerKey:function(e){return this.isEnter(e)||this.isSpace(e)||this.isArrowDown(e)},isDefaultOpenerKey:function(e){return this.isEnter(e)||this.isSpace(e)},isDefaultCloserKey:function(e){return this.isEscape(e)},KEYCODES:n}},{}],10:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("lodash"),a=n(o);r["default"]={toSentence:function(e){var t=arguments.length<=1||void 0===arguments[1]?"and":arguments[1],r=[],n=e.length;switch(n){case 1:r.push(e[0]);break;case 2:r.push(e[0]),r.push(" "+t+" "),r.push(e[1]);break;default:a["default"].each(e.slice(0,-1),function(e){r.push(e),r.push(", ")}),r.push(t+" "),r.push(e[n-1])}return s("span",{},void 0,r)},sentenceJoin:function(e){var t=arguments.length<=1||void 0===arguments[1]?", ":arguments[1],r=[];return a["default"].each(e.slice(0,-1),function(e){r.push(e),r.push(t)}),r.push(e[e.length-1]),s("span",{},void 0,r)}}},{lodash:"lodash"}],11:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(){return o["default"].createActions(["selectSpecificResult","selectNextResult","selectPreviousResult","search","searchResultsFound","setShowResultsContainer"])};var s=e("reflux"),o=n(s)},{reflux:"reflux"}],12:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("reflux"),o=n(s);r["default"]=o["default"].createActions({addNewComment:{},commentEntered:{sync:!0},deleteComment:{},showCommentsForPage:{},showSeeMoreLoadingSpinner:{},textareaFocused:{},textareaFocusRequested:{},textareaUnfocused:{}})},{reflux:"reflux"}],13:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("reflux"),o=n(s);r["default"]=o["default"].createActions(["connectToFacebook","togglePublishPermission"])},{reflux:"reflux"}],14:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("reflux"),o=n(s);r["default"]=o["default"].createActions(["changeFavoriteGenres"])},{reflux:"reflux"}],15:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("reflux"),o=n(s);r["default"]=o["default"].createActions(["selectFavoriteGenre","deselectFavoriteGenre","submitSelectedGenres"])},{reflux:"reflux"}],16:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("reflux"),o=n(s);r["default"]=o["default"].createActions(["displayError","requestFeaturedBooks"])},{reflux:"reflux"}],17:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("reflux"),o=n(s);r["default"]=o["default"].createActions(["hasRequestedCreativeForSlot","displayCreativeForSlot","removeAdSlot","trackImpression","attachServedNativeAdAttributesAndTracking","attachServedBannerAdAttributesAndTracking","populateHomepagePollAndTracking","pollAnswerChanged"])},{reflux:"reflux"}],18:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("reflux"),o=n(s);r["default"]=o["default"].createActions(["like","unLike"])},{reflux:"reflux"}],19:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("reflux"),o=n(s);r["default"]=o["default"].createActions(["openModal","closeModal"])},{reflux:"reflux"}],20:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("reflux"),o=n(s);r["default"]=o["default"].createActions({loadMoreUpdates:{},newsfeedItemsLoaded:{sync:!0},updateNativeAdSlot:{},userNotInterested:{},undoUserNotInterested:{},hide:{},previewBook:{}})},{reflux:"reflux"}],21:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("reflux"),o=n(s);r["default"]=o["default"].createActions(["loadError","loadNotifications","requestNotifications"])},{reflux:"reflux"}],22:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("reflux"),o=n(s);r["default"]=o["default"].createActions(["updateProgress","closeUpdateProgressForm","openUpdateProgressForm","refreshReadingSessions","shelveBookSuccess","loadAllReadingSessions"])},{reflux:"reflux"}],23:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("reflux"),o=n(s);r["default"]=o["default"].createActions(["addShelvings","bookShelved","shelveBook","toggleNonExclusiveShelving","rateBook","unshelveBook"])},{reflux:"reflux"}],24:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("reflux"),o=n(s);r["default"]=o["default"].createActions(["selectTab"])},{reflux:"reflux"}],25:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("reflux"),o=n(s);r["default"]=o["default"].createActions(["userAgentGainsTouch","userAgentLosesTouch"])},{reflux:"reflux"}],26:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("reflux"),o=n(s);r["default"]=o["default"].createActions(["addNonExclusiveShelf","removeNonExclusiveShelf"])},{reflux:"reflux"}],27:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("reflux"),o=n(s);r["default"]=o["default"].createActions(["openAddShelfTextbox","updateShelfNameFilter","updateShelves"])},{reflux:"reflux"}],28:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=e("./_dom_ready_initializers"),o=n(s),a=e("./_public_actions"),i=n(a);window.ReactActions=i["default"],o["default"].initializeModernizrTouchCheck(),o["default"].addGooglePublisherTagScript()},{"./_dom_ready_initializers":29,"./_public_actions":30}],29:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../modules/ads/google_ad_helper");r["default"]={addGooglePublisherTagScript:n.addGooglePublisherTagScript,initializeModernizrTouchCheck:function(){$j(function(){Modernizr&&Modernizr.touchevents?window.ReactActions.UserAgentCapabilitiesActions.userAgentGainsTouch():window.ReactActions.UserAgentCapabilitiesActions.userAgentLosesTouch()})}}},{"../modules/ads/google_ad_helper":3}],30:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("../react_actions/user_agent_capabilities_actions"),o=n(s);r["default"]={UserAgentCapabilitiesActions:o["default"]}},{"../react_actions/user_agent_capabilities_actions":25}],31:[function(e,t,r){"use strict";e("./_common");var n=e("../react_isomorphic/site_header"),s=e("../react_isomorphic/experiments"),o=e("lodash");window.ReactComponents=(0,o.merge)({},n.HeaderComponents,s.ExperimentComponents),window.ReactStores=(0,o.merge)({},n.HeaderStores,s.ExperimentStores)},{"../react_isomorphic/experiments":96,"../react_isomorphic/site_header":99,"./_common":28,lodash:"lodash"}],32:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("../gr_component_factory"),l=s(i),u=e("../../react_stores/google_ads_store"),d=s(u),c=e("reflux"),f=s(c),p=e("classnames"),m=s(p),h=e("../../modules/ads/google_ad_helper"),g=n(h),_="googleBannerAd";r["default"]=l["default"].createClass({displayName:"GoogleBannerAd",mixins:[f["default"].connectFilter(d["default"],function(e){return e.ads[this.props.adId]})],propTypes:{adId:a["default"].PropTypes.string.isRequired},componentDidMount:function(){g.requestCreativeForAdSlot(this.props.adId,this.refs.googleHook,this.state.creativeSelector,this.state.path,this.state.dimensions,this.state.isNativeAd)},render:function(){var e=(0,m["default"])(this.state.className,_,{"googleBannerAd--970x66":"970x66"===this.state.dimensions,"googleBannerAd--300x250 u-bottomGrayBorder":this.state.path.match(/goodr.home.cb/)||this.state.path.match(/goodr.home/)&&"300x250"===this.state.dimensions,"googleBannerAd--left_skin":this.state.path.match(/left.160x600/)||this.state.path.match(/left.out.160x600/),"googleBannerAd--right_skin":this.state.path.match(/right.160x600/)||this.state.path.match(/right.out.160x600/)});return this.state?a["default"].createElement("div",{className:e,id:this.props.adId,ref:"googleHook"}):null}})},{"../../modules/ads/google_ad_helper":3,"../../react_stores/google_ads_store":112,"../gr_component_factory":49,classnames:"classnames",react:"react",reflux:"reflux"}],33:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0}),r.VALID_BOOK_SIZES=void 0;var o=e("react"),a=n(o),i=e("lodash"),l=n(i),u=e("./gr_component_factory"),d=n(u),c=e("./shared/gr_prop_types"),f=n(c),p=e("classnames"),m=n(p),h=r.VALID_BOOK_SIZES={MEDIUM:"medium",LARGE:"large"};r["default"]=d["default"].createClass({displayName:"Book",propTypes:{imageUrl:a["default"].PropTypes.string.isRequired,bookUrl:a["default"].PropTypes.string.isRequired,title:a["default"].PropTypes.string.isRequired,size:a["default"].PropTypes.oneOf(l["default"].values(h)),author:f["default"].author(),mediaBoxModifier:a["default"].PropTypes.string,className:a["default"].PropTypes.string,sponsored:a["default"].PropTypes.bool},getDefaultProps:function(){return{size:h.MEDIUM}},render:function(){var e=(0,m["default"])("gr-mediaBox","gr-book--"+this.props.size,this.withBemModifiers("gr-book"),this.props.className),t=(0,m["default"])("gr-mediaBox__media",this.withBemModifiers("gr-book__image"),{"gr-book__image--large":this.props.size===h.LARGE}),r=(0,m["default"])(this.withBemModifiers("gr-book__titleLink"),{"gr-book__titleLink--large":this.props.size===h.LARGE},"gr-hyperlink gr-hyperlink--naked"),n=(0,m["default"])(this.withBemModifiers("gr-book__title")),o=(0,m["default"])(this.withBemModifiers("gr-book__author"),{"gr-book__author--large":this.props.size===h.LARGE}),a=this.withBemModifiers("gr-mediaBox__desc",this.props.mediaBoxModifier);return s("div",{className:e},void 0,s("a",{href:this.props.bookUrl},void 0,s("img",{alt:this.props.title,className:t,src:this.props.imageUrl})),s("div",{className:a},void 0,this.props.sponsored&&s("div",{className:"gr-metaText"},void 0,"Sponsored by:"),s("div",{className:n},void 0,s("a",{href:this.props.bookUrl,className:r},void 0,this.props.title)),s("div",{className:o},void 0,"by ",s("a",{href:this.props.author.profileUrl,className:"gr-book__authorLink gr-hyperlink gr-hyperlink--naked"},void 0,this.props.author.name),this.props.author.isGoodreadsAuthor?s("span",{className:"gr-icon gr-icon--authorBadge",title:"Goodreads Author"}):null),s("div",{className:"gr-book__additionalContent"},void 0,this.props.children)))}})},{"./gr_component_factory":49,"./shared/gr_prop_types":76,classnames:"classnames",lodash:"lodash",react:"react"}],34:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("./gr_component_factory"),l=n(i),u=e("classnames"),d=n(u),c=e("../modules/icon_sizes");r["default"]=l["default"].createClass({displayName:"CircularIcon",propTypes:{imageUrl:a["default"].PropTypes.string.isRequired,imageAlt:a["default"].PropTypes.string.isRequired,includeLink:a["default"].PropTypes.bool,linkUrl:a["default"].PropTypes.string,size:a["default"].PropTypes.oneOf([c.ICON_SIZES.SMALL,c.ICON_SIZES.MEDIUM,c.ICON_SIZES.LARGE]),border:a["default"].PropTypes.bool},getDefaultProps:function(){return{includeLink:!1,size:c.ICON_SIZES.SMALL,border:!1}},render:function(){var e=(0,d["default"])({circularIcon:!0,"circularIcon--medium":this.props.size===c.ICON_SIZES.MEDIUM,"circularIcon--large":this.props.size===c.ICON_SIZES.LARGE,"circularIcon--border":this.props.border});return this.props.includeLink&&this.props.linkUrl?s("a",{href:this.props.linkUrl},void 0,s("img",{className:e,src:this.props.imageUrl,alt:this.props.imageAlt})):s("img",{className:e,src:this.props.imageUrl,alt:this.props.imageAlt})}})},{"../modules/icon_sizes":8,"./gr_component_factory":49,classnames:"classnames",react:"react"}],35:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("./gr_component_factory"),a=n(o),i=e("react"),l=n(i);r["default"]=a["default"].createClass({displayName:"CloseButton",propTypes:{action:l["default"].PropTypes.func.isRequired,closeIcon:l["default"].PropTypes.string},render:function(){return s("button",{className:"gr-nakedButton gr-nakedButton--asLink",onClick:this.props.action},void 0,s("img",{alt:"Dismiss",src:this.props.closeIcon}))}})},{"./gr_component_factory":49,react:"react"}],36:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=n(a),l=e("../gr_component_factory"),u=n(l),d=e("../user_content/expandable_html"),c=n(d),f=e("../user_content/hidden_html"),p=n(f),m=e("../shared/gr_prop_types"),h=n(m),g=e("../user/user_profile_link"),_=n(g),v=e("../user/user_icon"),y=n(v),b=e("./right_side_information"),k=n(b);r["default"]=u["default"].createClass({displayName:"Comment",propTypes:{body:i["default"].PropTypes.shape(h["default"].expandableHtml()),createdAt:h["default"].date.isRequired,authorUser:h["default"].user().isRequired,subjectKey:i["default"].PropTypes.string.isRequired,subject:h["default"].commentSubject(),deletableByCurrentUser:i["default"].PropTypes.bool.isRequired,blockedByCurrentUser:i["default"].PropTypes.bool,showTimestamp:i["default"].PropTypes.bool,uri:i["default"].PropTypes.string.isRequired,flagForAbuseUrl:i["default"].PropTypes.string.isRequired},getDefaultProps:function(){return{blockedByCurrentUser:!1}},getInitialState:function(){return{showCommentDeletingSpinner:!1}},renderBody:function(){if(this.props.blockedByCurrentUser){var e="unhide comment";return o(p["default"],{unhideText:e},void 0,i["default"].createElement(c["default"],this.props.body))}return i["default"].createElement(c["default"],this.props.body)},render:function(){var e=this;return o("div",{className:"gr-comment gr-mediaBox",onMouseEnter:function(){e.setState({isHoveringOnComment:!0})},onMouseLeave:function(){e.setState({isHoveringOnComment:!1})}},void 0,o("div",{className:"gr-mediaBox__media"},void 0,o(y["default"],{user:this.props.authorUser})),o("div",{className:"gr-mediaBox__desc\n                              gr-mediaBox__desc--clearfixOverflow"},void 0,i["default"].createElement(k["default"],s({isHoveringOnComment:this.state.isHoveringOnComment},this.props)),o(_["default"],{user:this.props.authorUser}),this.props.blockedByCurrentUser?o("strong",{},void 0," (blocked)"):null,o("div",{className:"gr-comment__body"},void 0,this.renderBody())))}})},{"../gr_component_factory":49,"../shared/gr_prop_types":76,"../user/user_icon":84,"../user/user_profile_link":85,"../user_content/expandable_html":86,"../user_content/hidden_html":87,"./right_side_information":39,react:"react"}],37:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("lodash"),l=n(i),u=e("../gr_component_factory"),d=n(u),c=e("../shared/gr_prop_types"),f=n(c),p=e("../../react_actions/comment_actions"),m=n(p),h=e("../../react_stores/comments_store"),g=n(h),_=e("../user/user_icon"),v=n(_),y=e("../../react_mixins/gr_reflux");r["default"]=d["default"].createClass({displayName:"CommentForm",propTypes:{authorUser:f["default"].user().isRequired,subjectKey:a["default"].PropTypes.string.isRequired,subject:a["default"].PropTypes.shape({type:a["default"].PropTypes.string,id:a["default"].PropTypes.number,uri:a["default"].PropTypes.string})},mixins:[(0,y.connectToLazyStore)(g["default"],"subjectKey")],addNewComment:function(e){this.isCommentEmpty()||m["default"].addNewComment({subjectKey:this.props.subjectKey,subject:this.props.subject,body:this.state.unsavedComment,authorUser:this.props.authorUser}),e.preventDefault()},isCommentEmpty:function(){return l["default"].isEmpty(l["default"].trim(this.state.unsavedComment))},onTextChange:function(e){m["default"].commentEntered(this.props.subjectKey,e.target.value)},onFocus:function(){m["default"].textareaFocused(this.props.subjectKey)},onBlur:function(){m["default"].textareaUnfocused(this.props.subjectKey)},componentDidUpdate:function(){this.state.textareaFocusRequested===!0&&this.refs.commentBodyTextarea.focus()},render:function(){return s("div",{className:"gr-commentForm gr-mediaBox"},void 0,s("div",{className:"gr-mediaBox__media u-noLineHeight"},void 0,s(v["default"],{user:this.props.authorUser})),s("form",{className:"gr-mediaBox__desc",method:"post",action:"/comment"},void 0,s("input",{type:"hidden",name:"id",value:this.props.subject.id}),s("input",{type:"hidden",name:"type",value:this.props.subject.type}),a["default"].createElement("textarea",{className:"gr-textarea gr-commentForm__textarea",name:"comment[body_usertext]",disabled:this.state.saveInProgress,onChange:this.onTextChange,onFocus:this.onFocus,onBlur:this.onBlur,rows:this.state.textareaRows,value:this.state.unsavedComment,ref:"commentBodyTextarea",placeholder:"Write a comment…","aria-label":"Write a comment…"}),this.state.showCommentButton?s("button",{className:"gr-commentForm__submitButton gr-button gr-button--small",disabled:this.state.saveInProgress||this.isCommentEmpty(),onClick:this.addNewComment,type:"submit"},void 0,"Comment"):null))}})},{"../../react_actions/comment_actions":12,"../../react_mixins/gr_reflux":103,"../../react_stores/comments_store":106,"../gr_component_factory":49,"../shared/gr_prop_types":76,"../user/user_icon":84,lodash:"lodash",react:"react"}],38:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=n(a),l=e("lodash"),u=n(l),d=e("../gr_component_factory"),c=n(d),f=e("../shared/gr_prop_types"),p=n(f),m=e("./comment"),h=n(m),g=e("../pagination_links"),_=n(g),v=e("../../react_stores/comments_store"),y=n(v),b=e("../../react_actions/comment_actions"),k=n(b),S=e("../spinner"),T=n(S),P=e("../../react_mixins/gr_reflux"),N=3,w=1;r["default"]=c["default"].createClass({displayName:"Comments",propTypes:{subjectKey:i["default"].PropTypes.string.isRequired,subject:p["default"].commentSubject(),subjectUrl:i["default"].PropTypes.string,showTimestamp:i["default"].PropTypes.bool},getDefaultProps:function(){return{showTimestamp:!0}},mixins:[(0,P.connectToLazyStore)(y["default"],"subjectKey")],seeMoreCommentsText:function(){return 1==this.state.numComments?"See 1 comment":"See all "+this.state.numComments+" comments"},showCommentsForPage:function(e){k["default"].showCommentsForPage({subjectKey:this.props.subjectKey,subject:this.props.subject,page:e})},showMoreClicked:function(e){k["default"].showSeeMoreLoadingSpinner(this.props.subjectKey),this.showCommentsForPage(w),e.preventDefault()},renderSeeMoreComments:function(){var e=this.state.numComments;return e>N||e>this.state.comments.length?o("div",{className:"gr-comments__seeAllLinkBox"},void 0,this.state.showSeeMoreLoadingSpinner?o("span",{},void 0,o("span",{className:"gr-hyperlink gr-hyperlink--bold"},void 0,this.seeMoreCommentsText()),o("span",{id:"showMoreSpinner",className:"u-marginLeftTiny"},void 0,o(T["default"],{}))):o("a",{href:this.props.subjectUrl,className:"gr-hyperlink gr-hyperlink--bold",onClick:this.showMoreClicked},void 0,this.seeMoreCommentsText())):null},renderComments:function(){var e=this,t=this.state.showPagination?this.state.comments:u["default"].takeRight(this.state.comments,N);return u["default"].map(t,function(t){return i["default"].createElement(h["default"],s({key:t.uri,subjectKey:e.props.subjectKey,subject:e.props.subject,showTimestamp:e.props.showTimestamp},t))})},render:function(){return this.state.numComments>0?o("div",{className:"gr-comments gr-box gr-box--hiddenOverflow u-defaultType"},void 0,this.state.showPagination?null:this.renderSeeMoreComments(),this.renderComments(),this.state.showPagination?o("div",{className:"u-topGrayBorder"},void 0,o(_["default"],{subjectKey:this.props.subjectKey,totalSize:this.state.numComments,currentPageNumber:this.state.currentPage,perPage:10,changePageAction:this.showCommentsForPage,className:"gr-paginationLinks__links"})):null):null}})},{"../../react_actions/comment_actions":12,"../../react_mixins/gr_reflux":103,"../../react_stores/comments_store":106,"../gr_component_factory":49,"../pagination_links":71,"../shared/gr_prop_types":76,"../spinner":80,"./comment":36,lodash:"lodash",react:"react"}],39:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("reflux"),l=n(i),u=e("../gr_component_factory"),d=n(u),c=e("../shared/gr_prop_types"),f=n(c),p=e("../spinner"),m=n(p),h=e("../flagged_resources/flag_for_abuse_link"),g=n(h),_=e("../time/relative_time"),v=n(_),y=e("../dot_separated_elements"),b=n(y),k=e("../../react_actions/comment_actions"),S=n(k),T=e("../../react_stores/user_agent_capabilities_store"),P=n(T);r["default"]=d["default"].createClass({displayName:"CommentRightSideInformation",
mixins:[l["default"].connect(P["default"],"userAgentCapabilities")],propTypes:{showTimestamp:a["default"].PropTypes.bool,isHoveringOnComment:a["default"].PropTypes.bool,deletableByCurrentUser:a["default"].PropTypes.bool.isRequired,subject:f["default"].commentSubject().isRequired,uri:a["default"].PropTypes.string.isRequired,subjectKey:a["default"].PropTypes.string.isRequired,createdAt:f["default"].date.isRequired,flagForAbuseUrl:a["default"].PropTypes.string.isRequired},getDefaultProps:function(){return{showTimestamp:!0,isHoveringOnComment:!1}},getInitialState:function(){return{showCommentDeletingSpinner:!1}},deleteComment:function(){var e={subject:this.props.subject,subjectKey:this.props.subjectKey};window.confirm("Are you sure you want to delete this comment?")&&(this.setState({showCommentDeletingSpinner:!0}),S["default"].deleteComment(this.props.subjectKey,this.props.uri,e))},getDeleteLink:function(){return this.props.deletableByCurrentUser?this.state.showCommentDeletingSpinner?a["default"].createElement(m["default"],{ref:"spinner"}):a["default"].createElement("a",{className:"gr-comment__deleteLink gr-hyperlink--naked gr-hyperlink",ref:"deleteLink",onClick:this.deleteComment,"aria-label":"Delete comment"},"Delete"):void 0},getFlag:function(){return s(g["default"],{flagForAbuseUrl:this.props.flagForAbuseUrl})},getTimestamp:function(){return this.props.showTimestamp?s("small",{className:"gr-comment__timestamp"},void 0,s(v["default"],{time:this.props.createdAt})):void 0},getRightSideElements:function(){var e=[];return this.state.userAgentCapabilities.touch?(e.push(this.getDeleteLink()),e.push(this.getFlag()),e.push(this.getTimestamp())):this.props.isHoveringOnComment?(e.push(this.getDeleteLink()),e.push(this.getFlag())):e.push(this.getTimestamp()),e},render:function(){return s("div",{className:"gr-comment__rightSideInformation"},void 0,s(b["default"],{elements:this.getRightSideElements()}))}})},{"../../react_actions/comment_actions":12,"../../react_stores/user_agent_capabilities_store":119,"../dot_separated_elements":41,"../flagged_resources/flag_for_abuse_link":47,"../gr_component_factory":49,"../shared/gr_prop_types":76,"../spinner":80,"../time/relative_time":83,react:"react",reflux:"reflux"}],40:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("./gr_component_factory"),l=n(i),u=e("classnames"),d=n(u),c={SMALL:"small",MEDIUM:"medium"},f=5;r["default"]=l["default"].createClass({displayName:"CommunityRating",statics:{ICON_SIZES:c},propTypes:{rating:a["default"].PropTypes.number.isRequired,displayAvg:a["default"].PropTypes.bool,className:a["default"].PropTypes.string,size:a["default"].PropTypes.oneOf([c.SMALL,c.MEDIUM])},getDefaultProps:function(){return{displayAvg:!1,size:c.SMALL}},wrapperClasses:function(){return(0,d["default"])("communityRating__starsWrapper",{"communityRating__starsWrapper--small":this.props.size===c.SMALL,"communityRating__starsWrapper--medium":this.props.size===c.MEDIUM})},starClasses:function(){return(0,d["default"])("communityRating__stars",{"communityRating__stars--small":this.props.size===c.SMALL,"communityRating__stars--medium":this.props.size===c.MEDIUM})},getRoundedRating:function(e){var t=Math.floor(e);return e===t?e:.5>e-t?t+.45:t+.6},render:function(){var e=this.getRoundedRating(this.props.rating),t={width:e/f*100+"%"},r=(0,d["default"])("communityRating",this.props.className),n="Rated "+this.props.rating.toFixed(2)+" of "+f;return s("div",{className:r,"aria-label":n},void 0,s("div",{className:this.wrapperClasses()},void 0,s("div",{className:this.starClasses(),style:t,"aria-label":n})),this.props.displayAvg?s("span",{className:"gr-metaText"},void 0,this.props.rating.toFixed(2)," avg. rating"):null)}})},{"./gr_component_factory":49,classnames:"classnames",react:"react"}],41:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("lodash"),l=e("./gr_component_factory"),u=n(l);r["default"]=u["default"].createClass({displayName:"DotSeparatedElements",propTypes:{elements:a["default"].PropTypes.arrayOf(a["default"].PropTypes.oneOfType([a["default"].PropTypes.element,a["default"].PropTypes.string])).isRequired},getSeparatorElement:function(){return s("span",{},void 0," ","·"," ")},joinElementsWithSeparator:function(){var e=this,t=(0,i.compact)(this.props.elements);return(0,i.transform)(t,function(r,n,s){r.push(n),s+1!==t.length&&r.push(e.getSeparatorElement())})},render:function(){return s("span",{},void 0,(0,i.map)(this.joinElementsWithSeparator(),function(e,t){return s("span",{},t,e)}))}})},{"./gr_component_factory":49,lodash:"lodash",react:"react"}],42:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("./gr_component_factory"),l=n(i);r["default"]=l["default"].createClass({displayName:"DropDownList",propTypes:{showMoreLink:a["default"].PropTypes.bool,moreLinkURL:a["default"].PropTypes.string,moreLinkText:a["default"].PropTypes.string},getDefaultProps:function(){return{showMoreLink:!1,moreLinkURL:null,moreLinkText:"…More"}},render:function(){return s("div",{},void 0,this.props.children,this.props.showMoreLink&&null!==this.props.moreLinkURL?s("a",{className:"dropDownList__listItem--moreLink",href:this.props.moreLinkURL},void 0,this.props.moreLinkText):null)}})},{"./gr_component_factory":49,react:"react"}],43:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("lodash"),l=n(i),u=e("reflux"),d=n(u),c=e("./gr_component_factory"),f=n(c),p=e("../react_mixins/hover_intent"),m=n(p),h=e("classnames"),g=n(h),_=e("react-onclickoutside"),v=n(_),y=e("../modules/keys"),b=n(y),k=e("../react_stores/user_agent_capabilities_store"),S=n(k),T={HOVER:"hover",CLICK:"click"},P={LEFT:"left",RIGHT:"right"},N=100,w=N;r["default"]=f["default"].createClass({displayName:"Dropdown",mixins:[m["default"],v["default"],d["default"].connect(S["default"],"userAgentCapabilities")],propTypes:{alignment:a["default"].PropTypes.oneOf(l["default"].values(P)),fallbackUrl:a["default"].PropTypes.string,hoverTriggerClickUrl:a["default"].PropTypes.string,isInSiteHeader:a["default"].PropTypes.bool,onShowCallback:a["default"].PropTypes.func,trigger:a["default"].PropTypes.oneOfType([a["default"].PropTypes.string,a["default"].PropTypes.element]).isRequired,triggerEventType:a["default"].PropTypes.oneOf(l["default"].values(T))},statics:{TriggerEventTypes:T},getTriggerEventType:function(){return this.state.userAgentCapabilities.touch?T.CLICK:this.props.triggerEventType},getInitialState:function(){return{dropdownOpen:!1}},getDefaultProps:function(){return{triggerEventType:T.CLICK,alignment:P.LEFT}},hide:function(){this.setState({dropdownOpen:!1})},show:function(){this.setState({dropdownOpen:!0}),this.props.onShowCallback&&this.props.onShowCallback()},toggle:function(e){this.props.children&&e.preventDefault(),this.state.dropdownOpen?this.hide():this.show()},openList:function(e){b["default"].isDropdownOpenerKey(e.keyCode)?(e.preventDefault(),b["default"].isArrowDown(e.keyCode)?this.show():this.toggle(e)):b["default"].isDefaultCloserKey(e.keyCode)&&(e.preventDefault(),this.hide())},handleClickOutside:function(){this.state.userAgentCapabilities.touch||this.hide()},handleMouseEnter:function(){this.onEnterIntent(this.show,N)},handleMouseLeave:function(){this.onLeaveIntent(this.hide,w)},handleTriggerClick:function(e){return this.state.dropdownOpen&&this.props.triggerEventType===T.HOVER&&this.state.userAgentCapabilities.touch!==!0?void(this.props.hoverTriggerClickUrl||e.preventDefault()):void this.toggle(e)},triggerClasses:function(){return(0,g["default"])(this.withBemModifiers(["dropdown__trigger"]),{"gr-nakedButton gr-nakedButton--invisible":l["default"].isUndefined(this.props.fallbackUrl)},{"dropdown__trigger--triggerEventTypeHover":this.props.triggerEventType===T.HOVER},{"dropdown__trigger--personalNav":"true"===this.props.isInPersonalNav},{"dropdown__trigger--active":this.state.dropdownOpen},{"dropdown__trigger--personalNavActive":"true"===this.props.isInPersonalNav&&this.state.dropdownOpen},{"dropdown__trigger--activeSiteHeader":this.state.dropdownOpen&&this.props.isInSiteHeader})},renderTriggerButton:function(){return s("button",{className:this.triggerClasses(),"aria-haspopup":"true","aria-expanded":this.state.dropdownOpen,onClick:this.handleTriggerClick,onKeyDown:this.openList},void 0,this.props.trigger)},renderTriggerLink:function(){return s("a",{className:this.triggerClasses(),href:this.props.fallbackUrl,onClick:this.handleTriggerClick,onKeyDown:this.openList,role:"button","aria-haspopup":"true","aria-expanded":this.state.dropdownOpen},void 0,this.props.trigger)},render:function(){var e=(0,g["default"])(this.withBemModifiers("dropdown")),t=(0,g["default"])(this.withBemModifiers("dropdown__menu"),"gr-box gr-box--withShadowLarge",{"dropdown__menu--show":this.state.dropdownOpen}),r=l["default"].isUndefined(this.props.fallbackUrl)?this.renderTriggerButton():this.renderTriggerLink(),n=s("div",{className:t,role:"menu"},void 0,this.props.children);switch(this.getTriggerEventType()){case T.HOVER:return s("div",{className:e,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},void 0,r,n);case T.CLICK:return s("div",{className:e},void 0,r,n)}}})},{"../modules/keys":9,"../react_mixins/hover_intent":104,"../react_stores/user_agent_capabilities_store":119,"./gr_component_factory":49,classnames:"classnames",lodash:"lodash",react:"react","react-onclickoutside":"react-onclickoutside",reflux:"reflux"}],44:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o);r["default"]=a["default"].createClass({displayName:"error_message.js",propTypes:{componentName:a["default"].PropTypes.string.isRequired},render:function(){return s("div",{className:"gr-errorMessage"},void 0,"There was an issue rendering ",this.props.componentName)}})},{react:"react"}],45:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("lodash"),l=e("reflux"),u=n(l),d=e("../gr_component_factory"),c=n(d),f=e("../../react_stores/facebook_store"),p=n(f),m=e("../../react_actions/facebook_actions"),h=n(m);r["default"]=c["default"].createClass({mixins:[u["default"].connect(p["default"])],displayName:"facebookTimelinePublishToggle",propTypes:{cogAction:a["default"].PropTypes.oneOf((0,i.values)(p["default"].COG_ACTIONS)),additionalText:a["default"].PropTypes.string},statics:{COG_ACTIONS:p["default"].COG_ACTIONS},labelClicked:function(){this.state.cog.enabled||h["default"].connectToFacebook()},renderCheckbox:function(){var e=this;return this.state.cog.enabled?s("input",{className:"facebookTimelinePublishToggle__checkBox",type:"checkbox",value:"1",checked:this.state.cog[this.props.cogAction],onChange:function(){h["default"].togglePublishPermission(e.props.cogAction)}}):null},render:function(){if(this.state.isUserConnected){var e=this.state.cog[this.props.cogAction]?"Enabled":"Disabled";return s("span",{},void 0,(0,i.isEmpty)(this.props.additionalText)?null:s("span",{className:"u-marginRightTiny"},void 0,this.props.additionalText),s("label",{className:this.withBemModifiers("facebookTimelinePublishToggle"),onClick:this.labelClicked,"aria-label":"Post to your facebook timeline"},void 0,this.renderCheckbox(),s("img",{src:this.state.cog.enabled?this.state.images.fbIconUrl:this.state.images.fbIconDisabledUrl,alt:e+" Facebook timeline posting permission"})))}return null}})},{"../../react_actions/facebook_actions":13,"../../react_stores/facebook_store":108,"../gr_component_factory":49,lodash:"lodash",react:"react",reflux:"reflux"}],46:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("lodash"),l=n(i),u=e("./gr_component_factory"),d=n(u),c=e("reflux"),f=n(c),p=e("./genre_checkbox"),m=n(p),h=e("./../react_actions/modal_actions"),g=n(h),_=e("../react_actions/favorite_genres_form_actions"),v=n(_),y=e("../react_stores/favorite_genres_form_store"),b=n(y);r["default"]=d["default"].createClass({displayName:"FavoriteGenresForm",mixins:[f["default"].connect(b["default"])],propTypes:{favoriteGenres:a["default"].PropTypes.array,genres:a["default"].PropTypes.array.isRequired},getDefaultProps:function(){return{favoriteGenres:[]}},onSubmit:function(e){v["default"].submitSelectedGenres(),g["default"].closeModal(),e.preventDefault()},renderGenreCheckboxes:function(){var e=this;return s("div",{className:"gr-genresForm__checkBoxes"},void 0,l["default"].map(this.props.genres,function(t){return s(m["default"],{genre:t.name,isFavorited:l["default"].includes(e.state.selectedGenres,t.name)},t.name)}))},render:function(){return s("div",{className:"gr-genresForm"},void 0,s("div",{className:"gr-genresForm__title"},void 0,"Follow Your Favorite Genres"),s("div",{className:"gr-genresForm__description"},void 0,"We use your favorite genres to make better book recommendations and tailor what you see in your Updates feed."),s("form",{action:"/user/edit_fav_genres","data-remote":"true",method:"post"},void 0,this.renderGenreCheckboxes(),s("button",{type:"submit",onClick:this.onSubmit,className:"gr-button gr-button--large"},void 0,"Save")))}})},{"../react_actions/favorite_genres_form_actions":15,"../react_stores/favorite_genres_form_store":109,"./../react_actions/modal_actions":19,"./genre_checkbox":48,"./gr_component_factory":49,lodash:"lodash",react:"react",reflux:"reflux"}],47:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("../gr_component_factory"),l=n(i),u=e("classnames"),d=n(u);r["default"]=l["default"].createClass({displayName:"FlagForAbuseLink",propTypes:{flagForAbuseUrl:a["default"].PropTypes.string.isRequired},render:function(){var e=(0,d["default"])("gr-metaText","gr-hyperlink--naked","gr-hyperlink","gr-flag");return s("a",{href:this.props.flagForAbuseUrl,className:e},void 0,"Flag")}})},{"../gr_component_factory":49,classnames:"classnames",react:"react"}],48:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("./gr_component_factory"),l=n(i),u=e("classnames"),d=n(u),c=e("../react_actions/favorite_genres_form_actions"),f=n(c);r["default"]=l["default"].createClass({displayName:"GenreCheckbox",propTypes:{genre:a["default"].PropTypes.string,isFavorited:a["default"].PropTypes.bool.isRequired},onCheckboxChange:function(){this.props.isFavorited?f["default"].deselectFavoriteGenre(this.props.genre):f["default"].selectFavoriteGenre(this.props.genre)},render:function(){var e=(0,d["default"])("gr-genresForm__genreLabel",{"gr-genresForm__genreLabel--selected":this.props.isFavorited});return s("label",{className:e},void 0,s("input",{name:"favorites["+this.props.genre+"]",type:"hidden",value:"false"}),a["default"].createElement("input",{name:"favorites["+this.props.genre+"]",type:"checkbox",value:"true","data-genre":this.props.genre,ref:"checkbox",defaultChecked:this.props.isFavorited,onChange:this.onCheckboxChange}),s("span",{className:"u-verticalAlignMiddle u-marginLeftTiny"},void 0,this.props.genre))}})},{"../react_actions/favorite_genres_form_actions":15,"./gr_component_factory":49,classnames:"classnames",react:"react"}],49:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("lodash"),a=e("react"),i=n(a),l=e("../react_mixins/bem_modifiers"),u=n(l),d=e("../react_mixins/deploy_service"),c=n(d),f=e("react-addons-pure-render-mixin"),p=n(f),m=e("./error_message"),h=n(m),g=e("../modules/env_utils"),_=n(g),v=[p["default"],u["default"],c["default"]],y={showErrorMessage:"production"===_["default"].DEVELOPMENT},b=function(e,t){var r=e.render;t=(0,o.merge)({},y,t),e.render=function(){try{return r.apply(this,arguments)}catch(n){return"undefined"!=typeof Bugsnag&&Bugsnag.notifyException(n,"Failed to render "+e.displayName),console.error(n.stack),t.showErrorMessage?s(h["default"],{componentName:e.displayName}):null}}},k=function(e){if((0,o.isEmpty)(e))throw new Error("GrError: Missing component name. Please make sure `displayName` attribute is defined while creating a React class using GrComponentFactory.createClass.")},S=function(e){var t=e.mixins||[];e.mixins=t.concat(v)},T=function(e,t){return S(e),"production"!==_["default"].TEST&&b(e,t),e};r["default"]={createClass:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return k(e.displayName),i["default"].createClass(T(e,t))}}},{"../modules/env_utils":7,"../react_mixins/bem_modifiers":100,"../react_mixins/deploy_service":101,"./error_message":44,lodash:"lodash",react:"react","react-addons-pure-render-mixin":"react-addons-pure-render-mixin"}],50:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("lodash"),l=n(i),u=e("../gr_component_factory"),d=n(u),c=e("../dropdown"),f=n(c),p=e("./favorite_genres_pane"),m=n(p),h=e("./featured_genres"),g=n(h),_=e("./genre_list"),v=n(_),y=e("../menu_link"),b=n(y),k=e("../../react_actions/featured_genres_actions"),S=n(k);r["default"]=d["default"].createClass({displayName:"BrowseMenu",propTypes:{browseUrl:a["default"].PropTypes.string.isRequired,choiceAwardsUrl:a["default"].PropTypes.string.isRequired,editorsPicksUrl:a["default"].PropTypes.string.isRequired,favoriteGenres:a["default"].PropTypes.array,genres:a["default"].PropTypes.array.isRequired,giveawayUrl:a["default"].PropTypes.string.isRequired,listUrl:a["default"].PropTypes.string.isRequired,newReleasesUrl:a["default"].PropTypes.string.isRequired,recommendationsUrl:a["default"].PropTypes.string.isRequired,signedIn:a["default"].PropTypes.bool},render:function(){var e=function(){S["default"].requestFeaturedBooks()},t=s("span",{},void 0,"Browse ▾");return s(f["default"],{trigger:t,triggerEventType:f["default"].TriggerEventTypes.HOVER,fallbackUrl:this.props.browseUrl,bemModifiers:"siteHeader",isInSiteHeader:!0,onShowCallback:e},void 0,s("div",{className:"siteHeader__browseMenuDropdown"},void 0,s("ul",{className:"siteHeader__subNav"},void 0,s(b["default"],{href:this.props.recommendationsUrl,linkText:"Recommendations",linkClass:"siteHeader__subNavLink"}),s(b["default"],{href:this.props.choiceAwardsUrl,linkText:"Choice Awards",linkClass:"siteHeader__subNavLink"}),s(b["default"],{href:this.props.giveawayUrl,linkText:"Giveaways",linkClass:"siteHeader__subNavLink"}),s(b["default"],{href:this.props.newReleasesUrl,linkText:"New Releases",linkClass:"siteHeader__subNavLink"}),s(b["default"],{href:this.props.listUrl,linkText:"Lists",linkClass:"siteHeader__subNavLink"}),s(b["default"],{href:this.props.editorsPicksUrl,linkText:"News & Interviews",linkClass:"siteHeader__subNavLink"}),s(b["default"],{href:this.props.browseUrl,linkText:"Explore",linkClass:"siteHeader__subNavLink"})),this.renderSpotlight()))},classesWithModifier:function(e){return"siteHeader__spotlight siteHeader__spotlight--"+e},renderGenreList:function(){return s("div",{className:this.classesWithModifier("withoutSubMenu")},void 0,s(v["default"],{genres:this.props.genres}))},renderFeaturedGenres:function(){return s("div",{className:this.classesWithModifier("browseMenu")},void 0,s(g["default"],{favoriteGenres:this.props.favoriteGenres}))},renderFavoriteGenresPane:function(){return s("div",{className:this.classesWithModifier("withoutSubMenu")},void 0,s(m["default"],{genres:this.props.genres}))},renderSpotlight:function(){return this.props.signedIn?l["default"].isEmpty(this.props.favoriteGenres)?this.renderFavoriteGenresPane():this.renderFeaturedGenres():this.renderGenreList()}})},{"../../react_actions/featured_genres_actions":16,"../dropdown":43,"../gr_component_factory":49,"../menu_link":68,"./favorite_genres_pane":52,"./featured_genres":53,"./genre_list":56,lodash:"lodash",react:"react"}],51:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("reflux"),l=n(i),u=e("../gr_component_factory"),d=n(u),c=e("../dropdown"),f=n(c),p=e("../menu_link"),m=n(p),h=e("../ads/google_banner_ad"),g=n(h),_=e("../../react_stores/google_ads_store"),v=n(_);r["default"]=d["default"].createClass({displayName:"CommunityMenu",mixins:[l["default"].connect(v["default"],"googleAdStore")],propTypes:{communityUrl:a["default"].PropTypes.string.isRequired,eventUrl:a["default"].PropTypes.string.isRequired,featuredAskAuthorUrl:a["default"].PropTypes.string.isRequired,groupsUrl:a["default"].PropTypes.string.isRequired,peopleUrl:a["default"].PropTypes.string.isRequired,quizzesUrl:a["default"].PropTypes.string.isRequired,quotesUrl:a["default"].PropTypes.string.isRequired,storiesUrl:a["default"].PropTypes.string.isRequired,triviaUrl:a["default"].PropTypes.string.isRequired},renderSpotlightAd:function(){if(this.isFeatureEnabled("ads_uxo_nav_spotlight")){var e=v["default"].findAd(/goodr.nav.browse.300x250/);if(e)return s("div",{className:"siteHeader__spotlight--withoutSubMenu siteHeader__spotlight--withSpotlightAd googleAd"},void 0,s("div",{className:"spotlightAd"},void 0,s("div",{className:"featuredGenres__book"},void 0,s("div",{className:"u-marginTopTiny"},void 0,s(g["default"],{adId:e.id})))))}},render:function(){var e=s("span",{},void 0,"Community ▾");return s(f["default"],{trigger:e,triggerEventType:f["default"].TriggerEventTypes.HOVER,bemModifiers:["siteHeader"],fallbackUrl:this.props.communityUrl,isInSiteHeader:!0},void 0,s("ul",{className:"siteHeader__subNav"},void 0,s(m["default"],{href:this.props.groupsUrl,linkText:"Groups",linkClass:"siteHeader__subNavLink"}),s(m["default"],{href:this.props.quotesUrl,linkText:"Quotes",linkClass:"siteHeader__subNavLink"}),s(m["default"],{href:this.props.featuredAskAuthorUrl,linkText:"Ask the Author",linkClass:"siteHeader__subNavLink"}),s(m["default"],{href:this.props.triviaUrl,linkText:"Trivia",linkClass:"siteHeader__subNavLink"}),s(m["default"],{href:this.props.quizzesUrl,linkText:"Quizzes",linkClass:"siteHeader__subNavLink"}),s(m["default"],{href:this.props.storiesUrl,linkText:"Creative Writing",linkClass:"siteHeader__subNavLink"}),s(m["default"],{href:this.props.peopleUrl,linkText:"People",linkClass:"siteHeader__subNavLink"}),s(m["default"],{href:this.props.eventUrl,linkText:"Events",linkClass:"siteHeader__subNavLink"})),this.renderSpotlightAd())}})},{"../../react_stores/google_ads_store":112,"../ads/google_banner_ad":32,"../dropdown":43,"../gr_component_factory":49,"../menu_link":68,react:"react",reflux:"reflux"}],52:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("../gr_component_factory"),l=n(i),u=e("../modal_trigger"),d=n(u);r["default"]=l["default"].createClass({displayName:"FavoriteGenresPane",propTypes:{favoriteGenres:a["default"].PropTypes.array,genres:a["default"].PropTypes.array.isRequired},render:function(){return s("div",{className:"favoriteGenresPane"},void 0,s("div",{className:"favoriteGenresPane__title"},void 0,"What do you like to read?"),s("div",{className:"favoriteGenresPane__description"},void 0,"Choose your favorite genres to get personalized book recommendations."),s("div",{className:"favoriteGenresPane__buttonContainer"},void 0,s(d["default"],{id:"favGenres"},void 0,s("button",{className:"gr-button gr-button--dark"},void 0,"Choose Favorite Genres"))),s("a",{href:"/genres",className:"favoriteGenresPane__browseGenres"},void 0,"Browse Genres"))}})},{"../gr_component_factory":49,"../modal_trigger":70,react:"react"}],53:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("lodash"),a=n(o),i=e("reflux"),l=n(i),u=e("../gr_component_factory"),d=n(u),c=e("./featured_genres_book"),f=n(c),p=e("./featured_genres_list"),m=n(p),h=e("../spinner"),g=n(h),_=e("../../react_stores/featured_genres_store"),v=n(_),y=e("../../react_stores/user_agent_capabilities_store"),b=n(y);r["default"]=d["default"].createClass({displayName:"FeaturedGenres",mixins:[l["default"].connect(v["default"],"featuredGenres"),l["default"].connect(b["default"],"userAgentCapabilities")],renderBooks:function(){if(this.state.userAgentCapabilities.touch===!0){var e=this.state.featuredGenres.featuredGenreBookInfo[0];return s("div",{className:"featuredGenres__genreSpotlight"},e.genre.name,s(f["default"],{book:e.book,genre:e.genre,alwaysShown:!0}))}return a["default"].map(this.state.featuredGenres.featuredGenreBookInfo,function(e){return s("div",{className:"featuredGenres__genreSpotlight"},e.genre.name,s(f["default"],{book:e.book,genre:e.genre}))})},render:function(){return this.state.featuredGenres.featuredGenreBookInfo?s("div",{className:"featuredGenres"},void 0,s("span",{className:"featuredGenres__genreList"},void 0,s(m["default"],{genres:a["default"].pluck(this.state.featuredGenres.featuredGenreBookInfo,"genre")})),this.renderBooks()):this.state.featuredGenres.errorMessage?s("span",{},void 0,this.state.featuredGenres.errorMessage):s("div",{className:"featuredGenres featuredGenres--sparse"},void 0,s(g["default"],{}))}})},{"../../react_stores/featured_genres_store":111,"../../react_stores/user_agent_capabilities_store":119,"../gr_component_factory":49,
"../spinner":80,"./featured_genres_book":54,"./featured_genres_list":55,lodash:"lodash",reflux:"reflux"}],54:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=n(a),l=e("../gr_component_factory"),u=n(l),d=e("../shared/gr_prop_types"),c=n(d),f=e("./../book"),p=n(f),m=e("./../community_rating"),h=n(m),g=e("./../tab_content"),_=n(g),v=e("./../user_content/truncated_html"),y=n(v),b=e("../want_to_read/want_to_read_button"),k=n(b),S=e("lodash"),T=e("../../analytics/origins");r["default"]=u["default"].createClass({displayName:"FeaturedGenresBook",propTypes:{alwaysShown:i["default"].PropTypes.bool,genre:i["default"].PropTypes.shape({name:i["default"].PropTypes.string.isRequired,url:i["default"].PropTypes.string.isRequired}).isRequired,book:c["default"].book().isRequired},renderBookDescription:function(){return(0,S.isUndefined)(this.props.book.description)?null:o("div",{className:"featuredGenres__bookDescription"},void 0,i["default"].createElement(y["default"],this.props.book.description))},renderBook:function(){var e=this.props.genre;return o("div",{className:"featuredGenres__book"},void 0,o("div",{className:"siteHeader__title siteHeader__title--secondary"},void 0,"Among Most Read This Week in "+e.name),o("div",{className:"u-marginTopSmall"},void 0,i["default"].createElement(p["default"],s({},this.props.book,{key:this.props.book.bookId,size:f.VALID_BOOK_SIZES.LARGE}),o(h["default"],{rating:parseFloat(this.props.book.avgRating),displayAvg:!0}),o("div",{className:"featuredGenres__bookWantToReadButton"},void 0,o(k["default"],{bookTitlePrimary:this.props.book.title,uniqueId:(0,S.random)(1e6).toString(),bookId:this.props.book.bookId,origin:T.ShelvedBookOrigin.BROWSE_SPOTLIGHT,showMenu:!1})),this.renderBookDescription())),o("a",{href:e.url,className:"u-defaultType gr-hyperlink"},void 0,"More in "+e.name))},render:function(){return this.props.alwaysShown===!0?this.renderBook():o(_["default"],{group:"featuredGenres",name:"featuredGenre-"+this.props.genre.name},void 0,this.renderBook())}})},{"../../analytics/origins":1,"../gr_component_factory":49,"../shared/gr_prop_types":76,"../want_to_read/want_to_read_button":91,"./../book":33,"./../community_rating":40,"./../tab_content":82,"./../user_content/truncated_html":89,lodash:"lodash",react:"react"}],55:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("classnames"),a=n(o),i=e("reflux"),l=n(i),u=e("react"),d=n(u),c=e("lodash"),f=e("../dropdown"),p=n(f),m=e("../gr_component_factory"),h=n(m),g=e("./../tab"),_=n(g),v=e("../../react_stores/user_agent_capabilities_store"),y=n(v),b=8;r["default"]=h["default"].createClass({displayName:"FeaturedGenresList",mixins:[l["default"].connect(y["default"],"userAgentCapabilities")],propTypes:{genres:d["default"].PropTypes.array.isRequired},onClick:function(e){e.preventDefault()},allGenresLink:function(){return s("li",{role:"menuitem",className:"genreList__genre"},"allGenres",s("a",{href:"/genres",className:"siteHeader__subNavLink genreList__genreLink--more"},void 0,"All Genres"))},renderGenreLink:function(e,t){var r=(0,a["default"])(["genreList__genreLink","gr-hyperlink","gr-hyperlink--naked"]),n=s("a",{href:e.url,className:r},void 0,e.name);return this.state.userAgentCapabilities.touch===!0?n:s(_["default"],{group:"featuredGenres",name:"featuredGenre-"+e.name,triggerEventType:p["default"].TriggerEventTypes.HOVER,initiallySelected:t},void 0,n)},render:function(){var e=this,t=(0,c.random)(0,this.props.genres.length-1);return s("div",{className:"featuredGenres__list genreList genreList--sidebar"},void 0,s("div",{className:"siteHeader__title"},void 0,s("span",{className:"featuredGenres__listTitle"},void 0,"Favorite Genres")),s("ul",{},void 0,(0,c.map)((0,c.take)(this.props.genres,b),function(r,n){return s("li",{role:"menuitem",className:"genreList__genre"},r.name,e.renderGenreLink(r,n===t))}),this.allGenresLink()))}})},{"../../react_stores/user_agent_capabilities_store":119,"../dropdown":43,"../gr_component_factory":49,"./../tab":81,classnames:"classnames",lodash:"lodash",react:"react",reflux:"reflux"}],56:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("lodash"),a=n(o),i=e("../gr_component_factory"),l=n(i);r["default"]=l["default"].createClass({displayName:"GenreList",render:function(){for(var e=10,t=[],r=this.props.genres.slice(0);t.length*e<this.props.genres.length;)t.push(r.splice(0,e));return s("div",{className:"genreListContainer"},void 0,s("div",{className:"siteHeader__title"},void 0,"Genres"),a["default"].map(t,function(e,t){return s("ul",{className:"genreList"},"genreList"+t,a["default"].map(e,function(e){return s("li",{role:"menuitem",className:"genreList__genre"},e.name,s("a",{href:e.url,className:"genreList__genreLink"},void 0,e.name))}))}))}})},{"../gr_component_factory":49,lodash:"lodash"}],57:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=n(a),l=e("../gr_component_factory"),u=n(l),d=e("../search/book_search"),c=n(d),f=e("../favorite_genres_form"),p=n(f),m=e("../modal"),h=n(m),g=e("./personal_nav"),_=n(g),v=e("./primary_nav_menus"),y=n(v),b=e("./header_logo"),k=n(b),S=e("../../analytics/url_tracking_params"),T=e("../../modules/env_utils"),P=n(T);r["default"]=u["default"].createClass({displayName:"Header",propTypes:{autocomleteUrl:i["default"].PropTypes.string,browseUrl:i["default"].PropTypes.string,choiceAwardsUrl:i["default"].PropTypes.string,communityUrl:i["default"].PropTypes.string,editorsPicksUrl:i["default"].PropTypes.string,eventUrl:i["default"].PropTypes.string,favoriteGenres:i["default"].PropTypes.array,friendIconUrl:i["default"].PropTypes.string,genres:i["default"].PropTypes.array.isRequired,giveawayUrl:i["default"].PropTypes.string,groupsUrl:i["default"].PropTypes.string,featuredAskAuthorUrl:i["default"].PropTypes.string,helpUrl:i["default"].PropTypes.string,listUrl:i["default"].PropTypes.string,messageIconUrl:i["default"].PropTypes.string,myBooksUrl:i["default"].PropTypes.string,myFriendsUrl:i["default"].PropTypes.string,myGroupsUrl:i["default"].PropTypes.string,myQuotesUrl:i["default"].PropTypes.string,myReadingChallengeUrl:i["default"].PropTypes.string,myRecsUrl:i["default"].PropTypes.string,name:i["default"].PropTypes.string,newReleasesUrl:i["default"].PropTypes.string,notificationIconUrl:i["default"].PropTypes.string,peopleUrl:i["default"].PropTypes.string,profileImage:i["default"].PropTypes.string,profileUrl:i["default"].PropTypes.string,quizzesUrl:i["default"].PropTypes.string,quotesUrl:i["default"].PropTypes.string,recommendationsUrl:i["default"].PropTypes.string,signedIn:i["default"].PropTypes.bool,searchPath:i["default"].PropTypes.string,signInUrl:i["default"].PropTypes.string,signUpUrl:i["default"].PropTypes.string,storiesUrl:i["default"].PropTypes.string,tempFriendRequestCount:i["default"].PropTypes.number,tempUnreadMessageCount:i["default"].PropTypes.number,triviaUrl:i["default"].PropTypes.string,logoUrl:i["default"].PropTypes.string,signInWithReturnUrl:i["default"].PropTypes.bool},render:function(){return o("div",{},void 0,o("header",{className:"siteHeader__contents"},void 0,i["default"].createElement(k["default"],this.props),i["default"].createElement(y["default"],this.props),this.renderSearchForm(),this.props.signedIn?this.renderPersonalNav():this.renderLoginLinks(),this.renderModals()))},renderPersonalNav:function(){return i["default"].createElement(_["default"],this.props)},getSignInUrl:function(){var e=P["default"].getCurrentPath();return this.props.signInUrl+"?returnurl="+e},signIn:function(e){e.preventDefault(),P["default"].setLocationUrl(this.getSignInUrl())},renderLoginLinks:function(){var e={};return this.props.signInWithReturnUrl&&(e.onClick=this.signIn),o("ul",{className:"siteHeader__personal"},void 0,o("li",{className:"siteHeader__topLevelItem siteHeader__topLevelItem--signedOut"},void 0,i["default"].createElement("a",s({href:this.props.signInUrl,rel:"nofollow",className:"siteHeader__topLevelLink"},e),"Sign In")),o("li",{className:"siteHeader__topLevelItem siteHeader__topLevelItem--signedOut"},void 0,o("a",{href:this.props.signUpUrl,rel:"nofollow",className:"siteHeader__topLevelLink"},void 0,"Join")))},onSearchSelection:function(e){var t=e.bookUrl+"?"+S.URLTrackingParams.BOOK_SHOW_INTERACTION_PARAM+"&"+S.URLTrackingParams.FROM_SEARCH_PARAM;P["default"].setLocationUrl(t)},renderSearchForm:function(){return o(c["default"],{bemModifiers:"navbar",searchPath:this.props.searchPath,autocompleteUrl:this.props.autocompleteUrl,onChooseResult:this.onSearchSelection})},renderModals:function(){return this.props.signedIn?o(h["default"],{id:"favGenres"},void 0,o(p["default"],{favoriteGenres:this.props.favoriteGenres,genres:this.props.genres})):null}})},{"../../analytics/url_tracking_params":2,"../../modules/env_utils":7,"../favorite_genres_form":46,"../gr_component_factory":49,"../modal":69,"../search/book_search":73,"./header_logo":58,"./personal_nav":61,"./primary_nav_menus":62,react:"react"}],58:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("../gr_component_factory"),a=n(o);r["default"]=a["default"].createClass({displayName:"HeaderLogo",render:function(){return s("a",{href:this.props.logoActionUrl,className:this.isFeatureEnabled("logo_doodle")?"siteHeader__logo siteHeader__logo--doodle":"siteHeader__logo",title:"Goodreads home"})}})},{"../gr_component_factory":49}],59:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("lodash"),o=n(s),a=e("../gr_component_factory"),i=n(a),l=e("reflux"),u=n(l),d=e("./header"),c=n(d),f=e("../../react_stores/current_user_store"),p=n(f),m=e("../../react_stores/favorite_genres_store"),h=n(m);r["default"]=i["default"].createClass({displayName:"HeaderStoreConnector",mixins:[u["default"].connect(p["default"],"currentUser"),u["default"].connect(h["default"],"favoriteGenres")],render:function(){var e=this.state.currentUser.currentUser,t=!o["default"].isNull(e),r={signedIn:t,genres:this.state.favoriteGenres.allGenres,favoriteGenres:this.state.favoriteGenres.favoriteGenres};return t&&o["default"].merge(r,e),o["default"].merge(r,this.props),React.createElement(c["default"],r)}})},{"../../react_stores/current_user_store":107,"../../react_stores/favorite_genres_store":110,"../gr_component_factory":49,"./header":57,lodash:"lodash",reflux:"reflux"}],60:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("lodash"),l=n(i),u=e("../gr_component_factory"),d=n(u),c=e("reflux"),f=n(c),p=e("../spinner"),m=n(p),h=e("../time/relative_time"),g=n(h),_=e("../dropdown"),v=n(_),y=e("../user/user_icon"),b=n(y),k=e("../../react_stores/notifications_store"),S=n(k),T=e("../../react_actions/notifications_actions"),P=n(T),N=e("../../modules/to_sentence"),w=n(N);r["default"]=d["default"].createClass({displayName:"Notifications",mixins:[f["default"].connect(S["default"]),w["default"]],propTypes:{notificationIconUrl:a["default"].PropTypes.string.isRequired},userLink:function(e){return s("a",{href:e.profileUrl,className:"u-defaultType"},e.profileUrl,s("b",{},void 0,e.viewableName))},userLinks:function x(e){var t=this,x=l["default"].map(e.actors,function(e){return t.userLink(e)});return e.moreActors?this.sentenceJoin(x):this.toSentence(x)},renderNewNotificationFlag:function(e){return e.viewed?null:s("small",{className:"gr-smallAlert u-marginRightTiny"},void 0,"New")},renderNotification:function(e){return e.error?void 0:s("li",{className:"gr-mediaBox gr-notification"},""+e.actor.profileUrl+e.createdAt,s("div",{className:"gr-mediaBox__media u-marginRightMedium"},void 0,s(b["default"],{user:e.actor})),s("div",{className:"gr-mediaBox__desc u-defaultType"},void 0,this.userLinks(e),e.moreActors?"":e.directlyAddressed?", ":" ",e.body+" ",e.resource?s("a",{className:"gr-hyperlink",href:e.resource.url},void 0,e.resource.text):null,s("div",{},void 0,this.renderNewNotificationFlag(e),s("small",{},void 0,s(g["default"],{time:e.createdAt,longFormat:!0})))))},renderNotificationList:function(){var e=this,t=this.state.notifications;return this.state.errorOccurred?s("div",{className:"gr-notifications gr-notifications--sparse"},void 0,s("span",{},void 0,"An error occurred loading your notifications")):l["default"].isUndefined(t)?s("div",{className:"gr-notifications gr-notifications--sparse"},void 0,s(m["default"],{})):l["default"].isEmpty(t)?s("div",{className:"gr-notifications gr-notifications--sparse"},void 0,s("span",{},void 0,"No notifications")):s("div",{},void 0,s("section",{className:"gr-notifications gr-box--forceScrollBar"},void 0,s("h4",{className:"gr-notifications__header siteHeader__title"},void 0,"Notifications"),s("ul",{},void 0,l["default"].map(t,function(t){return e.renderNotification(t)}))),s("div",{className:"gr-moreNotifications"},void 0,s("a",{className:"gr-hyperlink u-defaultType",href:"/notifications"},void 0,"View all notifications")))},render:function(){var e=s("span",{className:"headerPersonalNav__icon\n                       headerPersonalNav__icon--notifications","aria-label":"Notifications"},void 0,this.state.unreadCount>0?s("span",{className:"headerPersonalNav__flag"},void 0,this.state.unreadCount):null),t=function(){P["default"].requestNotifications()};return s(v["default"],{trigger:e,triggerEventType:v["default"].TriggerEventTypes.HOVER,hoverTriggerClickUrl:this.props.notificationIconUrl,fallbackUrl:this.props.notificationIconUrl,onShowCallback:t,bemModifiers:"notifications",isInPersonalNav:"true"},void 0,this.renderNotificationList())}})},{"../../modules/to_sentence":10,"../../react_actions/notifications_actions":21,"../../react_stores/notifications_store":115,"../dropdown":43,"../gr_component_factory":49,"../spinner":80,"../time/relative_time":83,"../user/user_icon":84,lodash:"lodash",react:"react",reflux:"reflux"}],61:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=n(a),l=e("lodash"),u=n(l),d=e("../gr_component_factory"),c=n(d),f=e("../dropdown"),p=n(f),m=e("./notifications"),h=n(m),g=e("./profile_menu"),_=n(g),v=e("../user/user_icon"),y=n(v);r["default"]=c["default"].createClass({displayName:"PersonalNav",propTypes:{author:i["default"].PropTypes.shape({id:i["default"].PropTypes.number,editProfileUrl:i["default"].PropTypes.string,profileUrl:i["default"].PropTypes.string,dashboardUrl:i["default"].PropTypes.string}),commentsUrl:i["default"].PropTypes.string,editFavGenresUrl:i["default"].PropTypes.string,groupInvitesCount:i["default"].PropTypes.number,messageIconUrl:i["default"].PropTypes.string,myFriendsUrl:i["default"].PropTypes.string,myQuotesUrl:i["default"].PropTypes.string,myReadingChallengeUrl:i["default"].PropTypes.string,name:i["default"].PropTypes.string,pendingRecsCount:i["default"].PropTypes.number,profileEditUrl:i["default"].PropTypes.string,profileImage:i["default"].PropTypes.string,profileUrl:i["default"].PropTypes.string,signOutUrl:i["default"].PropTypes.string,tempFriendRequestCount:i["default"].PropTypes.number,tempUnreadMessageCount:i["default"].PropTypes.number},render:function(){var e={viewableName:this.props.name,profileImage:this.props.profileImage,profileUrl:this.props.profileUrl},t=o("span",{className:"headerPersonalNav"},void 0,o("span",{className:"headerPersonalNav__icon\n                         headerPersonalNav__icon--profile"},void 0,o(y["default"],{user:e,includeLink:!1}))),r=o("span",{className:"headerPersonalNav__icon headerPersonalNav__icon--inbox","aria-label":"Inbox"},void 0,this.props.tempUnreadMessageCount>0?o("span",{className:"headerPersonalNav__flag"},void 0,this.props.tempUnreadMessageCount):null),n=o("span",{className:"headerPersonalNav__icon headerPersonalNav__icon--friendRequests","aria-label":"Friend Requests"},void 0,this.props.tempFriendRequestCount>0?o("span",{className:"headerPersonalNav__flag"},void 0,this.props.tempFriendRequestCount):null),a=0===u["default"].size(this.props.author)?this.props.profileUrl:this.props.author.profileUrl;return o("ul",{className:"siteHeader__personal"},void 0,o("li",{},void 0,o(h["default"],{notificationIconUrl:this.props.notificationIconUrl})),o("li",{},void 0,o("a",{href:this.props.messageIconUrl,title:"Messages",className:"headerPersonalNav"},void 0,r)),o("li",{},void 0,o("a",{href:this.props.friendIconUrl,title:"Friends",className:"headerPersonalNav"},void 0,n)),o("li",{},void 0,o(p["default"],{trigger:t,triggerEventType:p["default"].TriggerEventTypes.HOVER,hoverTriggerClickUrl:a,fallbackUrl:a,bemModifiers:"profileMenu",isInPersonalNav:"true"},void 0,i["default"].createElement(_["default"],s({},this.props,{profileUrl:a})))))}})},{"../dropdown":43,"../gr_component_factory":49,"../user/user_icon":84,"./notifications":60,"./profile_menu":63,lodash:"lodash",react:"react"}],62:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("../gr_component_factory"),l=n(i),u=e("./community_menu"),d=n(u),c=e("./browse_menu"),f=n(c);r["default"]=l["default"].createClass({displayName:"PrimaryNavMenus",propTypes:{browseUrl:a["default"].PropTypes.string,choiceAwardsUrl:a["default"].PropTypes.string,communityUrl:a["default"].PropTypes.string,editorsPicksUrl:a["default"].PropTypes.string,eventUrl:a["default"].PropTypes.string,favoriteGenres:a["default"].PropTypes.array,featuredAskAuthorUrl:a["default"].PropTypes.string,genres:a["default"].PropTypes.array.isRequired,giveawayUrl:a["default"].PropTypes.string,groupsUrl:a["default"].PropTypes.string,homeUrl:a["default"].PropTypes.string,listUrl:a["default"].PropTypes.string,myBooksUrl:a["default"].PropTypes.string,newReleasesUrl:a["default"].PropTypes.string,peopleUrl:a["default"].PropTypes.string,quizzesUrl:a["default"].PropTypes.string,quotesUrl:a["default"].PropTypes.string,recommendationsUrl:a["default"].PropTypes.string,signedIn:a["default"].PropTypes.bool,storiesUrl:a["default"].PropTypes.string,triviaUrl:a["default"].PropTypes.string},render:function(){return s("nav",{className:"primaryNav"},void 0,s("ul",{role:"menu"},void 0,s("li",{className:"siteHeader__topLevelItem"},void 0,s("a",{href:this.props.homeUrl,className:"siteHeader__topLevelLink"},void 0,"Home")),s("li",{className:"siteHeader__topLevelItem"},void 0,s("a",{href:this.props.myBooksUrl,className:"siteHeader__topLevelLink"},void 0,"My Books")),s("li",{className:"siteHeader__topLevelItem"},void 0,a["default"].createElement(f["default"],this.props)),s("li",{className:"siteHeader__topLevelItem"},void 0,a["default"].createElement(d["default"],this.props))))}})},{"../gr_component_factory":49,"./browse_menu":50,"./community_menu":51,react:"react"}],63:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("lodash"),l=n(i),u=e("../gr_component_factory"),d=n(u),c=e("../menu_link"),f=n(c);r["default"]=d["default"].createClass({displayName:"ProfileMenu",propTypes:{author:a["default"].PropTypes.shape({id:a["default"].PropTypes.number,editProfileUrl:a["default"].PropTypes.string,profileUrl:a["default"].PropTypes.string,dashboardUrl:a["default"].PropTypes.string}),commentsUrl:a["default"].PropTypes.string,discussionsUrl:a["default"].PropTypes.string,editFavGenresUrl:a["default"].PropTypes.string,groupInvitesCount:a["default"].PropTypes.number,helpUrl:a["default"].PropTypes.string,myFriendsUrl:a["default"].PropTypes.string,myGroupsUrl:a["default"].PropTypes.string,myQuotesUrl:a["default"].PropTypes.string,myReadingChallengeUrl:a["default"].PropTypes.string,myRecsUrl:a["default"].PropTypes.string,pendingRecsCount:a["default"].PropTypes.number,profileEditUrl:a["default"].PropTypes.string,profileUrl:a["default"].PropTypes.string,signOutUrl:a["default"].PropTypes.string},isAuthor:function(){return!l["default"].isUndefined(this.props.author)},groupInvitesMessage:function(){var e=this.props.groupInvitesCount;return 0===e?"No invitations":1===e?"1 invitation":e+" invitations"},renderGroupInvites:function(){return this.props.groupInvitesCount>0?s("span",{className:"gr-smallAlert u-marginLeftXSmall"},void 0,this.groupInvitesMessage()):void 0},renderPendingRecs:function(){return this.props.pendingRecsCount>0?s("span",{className:"gr-smallAlert u-marginLeftXSmall"},void 0,this.props.pendingRecsCount+" new"):void 0},renderAuthorDashboardLink:function(){return this.isAuthor()?s(f["default"],{href:this.props.author.dashboardUrl,linkText:"Author Dashboard",linkClass:"siteHeader__subNavLink"}):void 0},render:function(){var e=this.isAuthor()?this.props.author.editProfileUrl:this.props.profileEditUrl;return s("ul",{className:"siteHeader__subNav siteHeader__subNav--profile gr-box gr-box--withShadowLarge"},void 0,s(f["default"],{},void 0,s("a",{href:this.props.profileUrl,className:"siteHeader__subNavLink"},void 0,"View Profile")),this.renderAuthorDashboardLink(),s(f["default"],{href:this.props.myFriendsUrl,linkText:"Friends",linkClass:"siteHeader__subNavLink"}),s(f["default"],{href:this.props.myQuotesUrl,linkText:"My Quotes",linkClass:"siteHeader__subNavLink"}),s(f["default"],{href:this.props.commentsUrl,linkText:"My Comments",linkClass:"siteHeader__subNavLink"}),s(f["default"],{href:this.props.discussionsUrl,linkText:"My Discussions",linkClass:"siteHeader__subNavLink"}),s(f["default"],{},void 0,s("a",{href:this.props.myGroupsUrl,className:"siteHeader__subNavLink"},void 0,"My Groups",this.renderGroupInvites())),s(f["default"],{href:this.props.myReadingChallengeUrl,linkText:"My Reading Challenge",linkClass:"siteHeader__subNavLink"}),s(f["default"],{href:this.props.editFavGenresUrl,linkText:"My Favorite Genres",linkClass:"siteHeader__subNavLink"}),s(f["default"],{},void 0,s("a",{href:this.props.myRecsUrl,className:"siteHeader__subNavLink"},void 0,"Friends’ Recommendations",this.renderPendingRecs())),s(f["default"],{href:e,linkText:"Account Settings",linkClass:"siteHeader__subNavLink"}),s(f["default"],{href:this.props.helpUrl,linkText:"Help",linkClass:"siteHeader__subNavLink"}),s(f["default"],{href:this.props.signOutUrl,linkText:"Sign Out",linkClass:"siteHeader__subNavLink",method:"POST"}))}})},{"../gr_component_factory":49,"../menu_link":68,lodash:"lodash",react:"react"}],64:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("../gr_component_factory"),l=n(i),u=e("../../react_mixins/gr_reflux"),d=e("../../react_actions/like_actions"),c=n(d),f=e("../../react_stores/like_store"),p=n(f),m=e("../spinner"),h=n(m),g=e("classnames"),_=n(g);r["default"]=l["default"].createClass({displayName:"LikeButton",mixins:[(0,u.connectToLazyStore)(p["default"],"resourceKey")],propTypes:{resourceKey:a["default"].PropTypes.string.isRequired,resourceLabel:a["default"].PropTypes.string.isRequired,showAsLink:a["default"].PropTypes.bool},getDefaultProps:function(){return{showAsLink:!0}},componentDidUpdate:function(){this.likeFocused&&!this.state.showLoadingSpinner&&(this.refs.likeButton.focus(),this.likeFocused=!1)},buttonClicked:function(){this.state.isLiked?c["default"].unLike(this.props.resourceKey):c["default"].like(this.props.resourceKey)},render:function(){var e=this,t=this.state.isLiked?"Unlike":"Like",r=(0,_["default"])({"gr-nakedButton gr-nakedButton--asLink":this.props.showAsLink},{"gr-button gr-button--small":!this.props.showAsLink});return s("span",{"aria-live":"polite"},void 0,this.state.showLoadingSpinner?s(h["default"],{}):a["default"].createElement("button",{"aria-label":t+" "+this.props.resourceLabel,ref:"likeButton",className:r,onClick:this.buttonClicked,onFocus:function(){e.likeFocused=!0}},t))}})},{"../../react_actions/like_actions":18,"../../react_mixins/gr_reflux":103,"../../react_stores/like_store":113,"../gr_component_factory":49,"../spinner":80,classnames:"classnames",react:"react"}],65:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("../gr_component_factory"),l=n(i),u=e("../../react_stores/like_store"),d=n(u),c=e("../../react_mixins/gr_reflux");r["default"]=l["default"].createClass({displayName:"LikeCount",mixins:[(0,c.connectToLazyStore)(d["default"],"resourceKey")],propTypes:{resourceKey:a["default"].PropTypes.string.isRequired},getPluralLike:function(e){return 1===e?"like":"likes"},render:function(){return this.state.likeCount>0?s("span",{},void 0,s("a",{className:"gr-hyperlink",href:this.state.likersListUrl},void 0,this.state.likeCount," ",this.getPluralLike(this.state.likeCount))," · "):null}})},{"../../react_mixins/gr_reflux":103,"../../react_stores/like_store":113,"../gr_component_factory":49,react:"react"}],66:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("lodash"),l=n(i),u=e("../gr_component_factory"),d=n(u),c=e("reflux"),f=n(c),p=e("../../react_stores/like_store"),m=n(p);r["default"]=d["default"].createClass({displayName:"LikeInformation",mixins:[f["default"].connectFilter(m["default"],function(e){return e[this.props.resourceKey]})],propTypes:{resourceKey:a["default"].PropTypes.string.isRequired},getNameLink:function(){var e=l["default"].isUndefined(this.state.likedBy.friends)?this.state.likedBy.others[0]:this.state.likedBy.friends[0];return s("a",{href:e.profile_url,className:"gr-hyperlink gr-hyperlink--bold likeInformation__name"},void 0,e.name)},getPluralPerson:function(e){return e>1?"people":"person"},getYouLikeMessage:function(){return s("span",{className:"likeInformation__name"},void 0,"You")},getYouAndAnotherPersonLikeMessage:function(){return s("span",{},void 0,this.getYouLikeMessage()," and ",this.getNameLink());
},getYouAndManyPeopleLikeMessage:function(){var e=this.state.likeCount-2;return s("span",{},void 0,this.getYouLikeMessage(),", ",this.getNameLink(),","," and ",s("a",{className:"gr-hyperlink gr-hyperlink--bold",href:this.state.likersListUrl},void 0,e," other ",this.getPluralPerson(e)))},getSomeoneLikeMessage:function(){return s("span",{},void 0,this.getNameLink())},getManyPeopleLikeMessage:function(){var e=this.state.likeCount-1;return s("span",{},void 0,this.getNameLink()," and ",s("a",{className:"gr-hyperlink gr-hyperlink--bold",href:this.state.likersListUrl},void 0,e," other ",this.getPluralPerson(e)))},getLikeMessage:function(){if(this.state.isLiked)switch(this.state.likeCount){case 1:return this.getYouLikeMessage();case 2:return this.getYouAndAnotherPersonLikeMessage();default:return this.getYouAndManyPeopleLikeMessage()}else switch(this.state.likeCount){case 1:return this.getSomeoneLikeMessage();default:return this.getManyPeopleLikeMessage()}},render:function(){return!this.state.isLiked&&l["default"].isEmpty(this.state.likedBy)?null:s("div",{className:"likeInformation u-defaultType"},void 0,this.getLikeMessage()," liked this")}})},{"../../react_stores/like_store":113,"../gr_component_factory":49,lodash:"lodash",react:"react",reflux:"reflux"}],67:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("../gr_component_factory"),l=n(i),u=e("./like_count"),d=n(u),c=e("./like_button"),f=n(c);r["default"]=l["default"].createClass({displayName:"LikeSimpleFooter",propTypes:{resourceKey:a["default"].PropTypes.string.isRequired,resourceLabel:a["default"].PropTypes.string.isRequired,isLikeable:a["default"].PropTypes.bool.isRequired,showAsLink:a["default"].PropTypes.bool},render:function(){return s("span",{},void 0,s(d["default"],{resourceKey:this.props.resourceKey}),this.props.isLikeable?s(f["default"],{resourceKey:this.props.resourceKey,resourceLabel:this.props.resourceLabel,showAsLink:this.props.showAsLink}):null)}})},{"../gr_component_factory":49,"./like_button":64,"./like_count":65,react:"react"}],68:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("./gr_component_factory"),l=n(i);r["default"]=l["default"].createClass({displayName:"MenuLink",propTypes:{href:a["default"].PropTypes.string,linkText:a["default"].PropTypes.string,linkClass:a["default"].PropTypes.string,method:a["default"].PropTypes.oneOf(["POST","PUT","DELETE"])},render:function(){return s("li",{role:"menuitem",className:"menuLink"},void 0,this.props.children?s("span",{},void 0,this.props.children):s("a",{href:this.props.href,className:this.props.linkClass,"data-method":this.props.method},void 0,this.props.linkText))}})},{"./gr_component_factory":49,react:"react"}],69:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("./gr_component_factory"),l=n(i),u=e("reflux"),d=n(u),c=e("classnames"),f=n(c),p=e("../react_stores/modal_store"),m=n(p),h=e("../react_actions/modal_actions"),g=n(h),_=e("./close_button"),v=n(_),y=e("../modules/keys"),b=n(y);r["default"]=l["default"].createClass({displayName:"Modal",mixins:[d["default"].connect(m["default"])],propTypes:{id:a["default"].PropTypes.string.isRequired},hide:function(){g["default"].closeModal()},isActive:function(){return this.state.currentActiveModal===this.props.id},hideOnOverlayClick:function(e){e.target.className.indexOf("modal--overlay")>-1&&this.hide()},hideOnEscape:function(e){b["default"].isDefaultCloserKey(e.keyCode)&&this.hide()},render:function(){var e=(0,f["default"])("modal","modal--overlay",{"modal--show":this.isActive()});return a["default"].createElement("div",{className:e,ref:"modalContent",tabIndex:"0",onClick:this.hideOnOverlayClick,onKeyDown:this.hideOnEscape},s("div",{className:this.withBemModifiers("modal__content")},void 0,s("div",{className:"modal__close"},void 0,s(v["default"],{action:this.hide})),this.props.children))}})},{"../modules/keys":9,"../react_actions/modal_actions":19,"../react_stores/modal_store":114,"./close_button":35,"./gr_component_factory":49,classnames:"classnames",react:"react",reflux:"reflux"}],70:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("./gr_component_factory"),l=n(i),u=e("../react_actions/modal_actions"),d=n(u);r["default"]=l["default"].createClass({displayName:"ModalTrigger",propTypes:{id:a["default"].PropTypes.string.isRequired},openModal:function(){d["default"].openModal(this.props.id)},render:function(){return s("a",{className:"modalTrigger",onClick:this.openModal},void 0,this.props.children)}})},{"../react_actions/modal_actions":19,"./gr_component_factory":49,react:"react"}],71:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("lodash"),l=n(i),u=e("./gr_component_factory"),d=n(u),c=e("./pagination_single_page_link"),f=n(c),p=e("./shared/gr_prop_types"),m=n(p);r["default"]=d["default"].createClass({displayName:"PaginationLinks",propTypes:{totalSize:m["default"].naturalNumber.isRequired,currentPageNumber:a["default"].PropTypes.number.isRequired,className:a["default"].PropTypes.string,perPage:m["default"].naturalNumber.isRequired,changePageAction:a["default"].PropTypes.func.isRequired},maxPageNumber:function(){return Math.ceil(this.props.totalSize/this.props.perPage)},renderPageLinks:function(){var e=this,t=this.maxPageNumber();return 1!==t?l["default"].times(t,function(t){return s(f["default"],{pageNumber:t+1,currentPageNumber:e.props.currentPageNumber,changePageAction:e.props.changePageAction},t+1)}):void 0},renderPrevLink:function(){return 1===this.maxPageNumber()?null:1!==this.props.currentPageNumber?s("button",{className:"gr-nakedButton\n                                 gr-nakedButton--asLink\n                                 gr-paginationLinks__previousLink\n                                 gr-hyperlink\n                                 gr-hyperlink--black",onClick:this.moveToPrevPage},void 0,"← Previous"):s("span",{className:"gr-paginationLinks__previousLink gr-paginationLinks__previousLink--inactive"},void 0,"← Previous")},renderNextLink:function(){return 1===this.maxPageNumber()?null:this.props.currentPageNumber!==this.maxPageNumber()?s("button",{className:"gr-nakedButton\n                                 gr-nakedButton--asLink\n                                 gr-paginationLinks__nextLink\n                                 gr-hyperlink\n                                 gr-hyperlink--black",onClick:this.moveToNextPage},void 0,"Next →"):s("span",{className:"gr-paginationLinks__nextLink gr-paginationLinks__nextLink--inactive"},void 0,"Next →")},moveToNextPage:function(e){e.preventDefault(),this.props.changePageAction(this.props.currentPageNumber+1)},moveToPrevPage:function(e){e.preventDefault(),this.props.changePageAction(this.props.currentPageNumber-1)},render:function(){return s("div",{className:"gr-paginationLinks "+(this.props.className||"")},void 0,this.renderPrevLink(),this.renderPageLinks(),this.renderNextLink())}})},{"./gr_component_factory":49,"./pagination_single_page_link":72,"./shared/gr_prop_types":76,lodash:"lodash",react:"react"}],72:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("./gr_component_factory"),l=n(i);r["default"]=l["default"].createClass({displayName:"PaginationSinglePageLink",propTypes:{pageNumber:a["default"].PropTypes.number,currentPageNumber:a["default"].PropTypes.number,changePageAction:a["default"].PropTypes.func.isRequired},render:function(){return this.props.pageNumber===this.props.currentPageNumber?s("span",{className:"gr-paginationLinks__pageNumLink\n                         gr-paginationLinks__pageNumLink--selected"},void 0,this.props.pageNumber):s("button",{className:"gr-nakedButton\n                           gr-nakedButton--asLink\n                           gr-paginationLinks__pageNumLink\n                           gr-hyperlink\n                           gr-hyperlink--black",onClick:this.jumpToPage},void 0,this.props.pageNumber)},jumpToPage:function(e){e.preventDefault(),this.props.changePageAction(this.props.pageNumber)}})},{"./gr_component_factory":49,react:"react"}],73:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=n(a),l=e("lodash"),u=n(l),d=e("../gr_component_factory"),c=n(d),f=e("reflux"),p=n(f),m=e("react-onclickoutside"),h=n(m),g=e("classnames"),_=n(g),v=e("../../modules/keys"),y=n(v),b=e("../../react_stores/book_search_store_factory"),k=n(b),S=e("./book_search_results"),T=n(S),P=e("../spinner"),N=n(P),w=e("../../react_mixins/factory_store_mixin"),x=n(w),C=300;r["default"]=c["default"].createClass({displayName:"BookSearch",mixins:[h["default"],p["default"].ListenerMixin,(0,x["default"])(k["default"])],propTypes:{onChooseResult:i["default"].PropTypes.func.isRequired,maxResults:i["default"].PropTypes.number,shelfName:i["default"].PropTypes.string,searchPath:i["default"].PropTypes.string.isRequired,closeAfterResultChosen:i["default"].PropTypes.bool,autocompleteUrl:i["default"].PropTypes.string.isRequired},getDefaultProps:function(){return{maxResults:5,closeAfterResultChosen:!1}},componentDidMount:function(){var e=this;this.delayedSearch=u["default"].debounce(function(t){e.actions.search(t.target.value,e.props.autocompleteUrl)},C)},hide:function(){this.actions.setShowResultsContainer(!1)},handleClickOutside:function(){this.hide()},handleSearch:function(e){u["default"].isEmpty(e.target.value)?this.hide():(e.persist(),this.delayedSearch(e))},handleClick:function(e){u["default"].isEmpty(this.state.query)||this.handleSearch(e)},handleChoice:function(e){this.props.onChooseResult(e),this.props.closeAfterResultChosen&&this.hide()},handleKeyPress:function(e){var t=Math.min(this.props.maxResults,this.state.results.length);y["default"].isEnter(e.keyCode)&&null!==this.state.activeResult?(this.handleChoice(this.state.activeResult),e.preventDefault()):y["default"].isArrowDown(e.keyCode)?this.actions.selectNextResult(t):y["default"].isArrowUp(e.keyCode)?this.actions.selectPreviousResult(t):y["default"].isEscape(e.keyCode)&&this.hide()},renderInputIcon:function(){var e=(0,_["default"])("searchBox__icon",{"searchBox__icon--loadingSpinner":this.state.showLoadingSpinner,"searchBox__icon--magnifyingGlass gr-nakedButton":!this.state.showLoadingSpinner});return this.state.showLoadingSpinner?o("span",{className:e},void 0,o(N["default"],{})):o("button",{type:"submit",className:e,"aria-label":"Search"})},render:function(){var e=(0,_["default"])(this.withBemModifiers("searchBox")),t=(0,_["default"])(this.withBemModifiers("searchBox__input"));return o("div",{acceptCharset:"UTF-8",className:e,onKeyDown:this.handleKeyPress},void 0,o("form",{autoComplete:"off",action:this.props.searchPath,role:"search","aria-label":"Search for books to add to your shelves"},void 0,o("input",{className:t,autoComplete:"off",name:"q",type:"text",placeholder:"Search books","aria-label":"Search books",onClick:this.handleClick,onChange:this.handleSearch,"aria-controls":"searchResults"}),this.renderInputIcon(),this.state.showResultsContainer?i["default"].createElement(T["default"],s({},this.props,this.state,{onChooseResult:this.handleChoice,mouseoverAction:this.actions.selectSpecificResult})):null))}})},{"../../modules/keys":9,"../../react_mixins/factory_store_mixin":102,"../../react_stores/book_search_store_factory":105,"../gr_component_factory":49,"../spinner":80,"./book_search_results":75,classnames:"classnames",lodash:"lodash",react:"react","react-onclickoutside":"react-onclickoutside",reflux:"reflux"}],74:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("../gr_component_factory"),l=n(i),u=e("../shared/gr_prop_types"),d=n(u),c=e("classnames"),f=n(c);r["default"]=l["default"].createClass({displayName:"BookSearchResult",propTypes:{book:d["default"].book().isRequired,onChooseResult:a["default"].PropTypes.func.isRequired},render:function(){var e=this,t=(0,f["default"])("gr-mediaBox","gr-book--navbar","gr-hyperlink","gr-hyperlink--naked","gr-hyperlink--noUnderline","searchResults__result");return s("a",{className:t,href:"#","aria-label":"Search result",onClick:function(){e.props.onChooseResult(e.props.book)}},void 0,s("img",{className:"gr-mediaBox__media",src:this.props.book.imageUrl,alt:""}),s("div",{className:"gr-mediaBox__desc"},void 0,s("div",{className:"gr-book__title gr-book__title--navbar u-defaultType"},void 0,this.props.book.title),s("div",{className:"gr-book__author gr-book__author--navbar"},void 0,"by ",this.props.book.author.name,this.props.book.author.isGoodreadsAuthor?s("span",{className:"gr-icon gr-icon--authorBadge"}):null)))}})},{"../gr_component_factory":49,"../shared/gr_prop_types":76,classnames:"classnames",react:"react"}],75:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("lodash"),l=n(i),u=e("classnames"),d=n(u),c=e("../drop_down_list"),f=n(c),p=e("./book_search_result"),m=n(p),h=e("../gr_component_factory"),g=n(h);r["default"]=g["default"].createClass({displayName:"BookSearchResults",propTypes:{maxResults:a["default"].PropTypes.number.isRequired,query:a["default"].PropTypes.string,results:a["default"].PropTypes.array.isRequired,shelfName:a["default"].PropTypes.string,searchPath:a["default"].PropTypes.string,onChooseResult:a["default"].PropTypes.func.isRequired,mouseoverAction:a["default"].PropTypes.func.isRequired,activeResult:a["default"].PropTypes.shape({title:a["default"].PropTypes.string.isRequired,bookId:a["default"].PropTypes.string.isRequired})},renderLastSearchResultItem:function(e){var t=(0,d["default"])("gr-nakedButton","gr-nakedButton--asLink","searchResults__lastItem",this.withBemElement("searchResults","lastItem"));return s("button",{className:t,type:"submit"},void 0,e)},render:function(){var e=this,t=(0,d["default"])(this.withBemModifiers("searchResults"),"gr-box","gr-box--withShadow");return s("div",{className:t,id:"bookSearchResults"+this.props.query+this.props.results.length,"aria-live":"polite","aria-label":"Book search results"},void 0,s(f["default"],{maxListItems:this.props.maxResults},void 0,this.props.results.length>0?l["default"].map(l["default"].slice(this.props.results,0,this.props.maxResults),function(t){return s("div",{className:(0,d["default"])("searchResults__item",{"searchResults__item--active":t===e.props.activeResult}),onMouseOver:function(){e.props.mouseoverAction(t.bookId)}},t.bookId,s(m["default"],{book:t,onChooseResult:e.props.onChooseResult}))}):this.renderLastSearchResultItem('Search for "'+this.props.query+'"…'),this.props.results.length>0?this.renderLastSearchResultItem('See all results for "'+this.props.query+'"'):null))}})},{"../drop_down_list":42,"../gr_component_factory":49,"./book_search_result":74,classnames:"classnames",lodash:"lodash",react:"react"}],76:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function s(e){function t(t,r,n,s){return s||(s="<<anonymous>>"),l["default"].isNull(r[n])||l["default"].isUndefined(r[n])?t?new Error("Required property `"+n+"` was not specified in "+("`"+s+"`.")):null:e(r,n,s)}var r=t.bind(null,!1);return r.isRequired=t.bind(null,!0),r}Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("lodash"),l=n(i),u=function(e,t,r){var n=e[t],s=l["default"].isString(n)?new Date(n):n;return!l["default"].isDate(s)||l["default"].isNaN(s.getTime())?new Error("Property '"+t+"' must be a Date. "+r+" was supplied: '"+n+"'."):void 0},d=function(e,t,r){var n=e[t];return 0>=n?new Error("Property '"+t+"' must be > 0. "+r+" was supplied: '"+n+"'."):void 0},c=function(e,t){return l["default"].merge({},e,t)},f=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t={viewableName:a["default"].PropTypes.string.isRequired,profileImage:a["default"].PropTypes.string.isRequired,profileUrl:a["default"].PropTypes.string,informalName:a["default"].PropTypes.string};return a["default"].PropTypes.shape(c(t,e))},p=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t={bookId:a["default"].PropTypes.string,workId:a["default"].PropTypes.string,bookUrl:a["default"].PropTypes.string,authorName:a["default"].PropTypes.string,title:a["default"].PropTypes.string,imageUrl:a["default"].PropTypes.string,numPages:a["default"].PropTypes.number};return a["default"].PropTypes.shape(c(t,e))},m=function(){return a["default"].PropTypes.shape({id:a["default"].PropTypes.number.isRequired,name:a["default"].PropTypes.string.isRequired,isGoodreadsAuthor:a["default"].PropTypes.bool,profileImage:a["default"].PropTypes.string,profileUrl:a["default"].PropTypes.string.isRequired})},h=function(){return{html:a["default"].PropTypes.string.isRequired,truncatedHtml:a["default"].PropTypes.string}},g=function(){return{html:a["default"].PropTypes.string,fullContentUrl:a["default"].PropTypes.string,truncated:a["default"].PropTypes.bool.isRequired,className:a["default"].PropTypes.string}},_=function(){return a["default"].PropTypes.shape({user:f().isRequired,friendUser:f().isRequired,isMyFriend:a["default"].PropTypes.bool.isRequired,addFriendUrl:a["default"].PropTypes.string,compareBooksUrl:a["default"].PropTypes.string,ratingDetailsText:a["default"].PropTypes.string,currentlyReadingBook:p()})},v=function(){return a["default"].PropTypes.shape({type:a["default"].PropTypes.string,id:a["default"].PropTypes.number,uri:a["default"].PropTypes.string})},y=function(){return a["default"].PropTypes.shape({author:m().isRequred,title:a["default"].PropTypes.string,url:a["default"].PropTypes.string})},b=function(){return a["default"].PropTypes.shape({user:f().isRequired,author:m().isRequred,userAuthorFollowingsUrl:a["default"].PropTypes.string})},k=function(){return a["default"].PropTypes.shape({author:m().isRequired,body:a["default"].PropTypes.object.isRequired,url:a["default"].PropTypes.string.isRequired,quotesAuthorUrl:a["default"].PropTypes.string.isRequired})},S=function(){return a["default"].PropTypes.shape({user:f().isRequired,pollName:a["default"].PropTypes.string.isRequired,answer:a["default"].PropTypes.object.isRequired,url:a["default"].PropTypes.string.isRequired,imageUrl:a["default"].PropTypes.string.isRequired,isGroupPoll:a["default"].PropTypes.bool.isRequired,groupName:a["default"].PropTypes.string,groupUrl:a["default"].PropTypes.string})},T=function(){return a["default"].PropTypes.shape({book:p(),customText:a["default"].PropTypes.object,helpLink:a["default"].PropTypes.string,defaultIcon:a["default"].PropTypes.string,numAdditionalFriends:a["default"].PropTypes.number,friendActionText:a["default"].PropTypes.string,firstFriend:f(),customTextReview:a["default"].PropTypes.object,similarBook:p(),similarBookShelf:a["default"].PropTypes.string,similarBookShelfUrl:a["default"].PropTypes.string,genres:a["default"].PropTypes.array})};r["default"]={user:f,author:m,book:p,quote:k,commentSubject:v,authorBlogPostNewsfeedResource:y,authorFollowNewsfeedResource:b,friendNewsfeedResource:_,pollVoteNewsfeedResource:S,expandableHtml:h,truncatedHtml:g,date:s(u),naturalNumber:s(d),creative:T}},{lodash:"lodash",react:"react"}],77:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),o=n(s),a=e("react-dom"),i=n(a),l=e("lodash"),u=n(l),d=e("../user_content/spoiler"),c=n(d);r["default"]={replaceSpoilerHTMLWithReactComponents:function(e,t){var r=t||window.$j,n=r(".jsShowSpoiler",e);u["default"].each(n,function(e){var t=r(e),n=t.next(".spoilerContainer");if(n){var s=n.text().replace("(hide spoiler)",""),a=o["default"].createElement(c["default"],{html:s}),l=r("<span></span>");t.replaceWith(l),i["default"].render(a,r(l)[0])}})}}},{"../user_content/spoiler":88,lodash:"lodash",react:"react","react-dom":"react-dom"}],78:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("../gr_component_factory"),a=n(o),i=e("../circular_icon"),l=n(i),u=e("../../modules/icon_sizes"),d=e("lodash"),c=n(d),f=e("classnames"),p=n(f),m="u-defaultType u-noTopMargin u-noBottomMargin siteAnnouncement__announcementHeader";r["default"]=a["default"].createClass({displayName:"SiteAnnouncement",propTypes:{imageUrl:React.PropTypes.string.isRequired,announcementText:React.PropTypes.string.isRequired,targetUrl:React.PropTypes.string},getAriaLabel:function(){return"Read more "+this.props.announcementText},hasTargetUrl:function(){return!c["default"].isEmpty(this.props.targetUrl)},renderIcon:function(){return s(l["default"],{imageUrl:this.props.imageUrl,size:u.ICON_SIZES.MEDIUM,imageAlt:"Site Announcement",border:!0})},renderAnnouncementText:function(){var e=this.hasTargetUrl(),t="siteAnnouncement__announcementText";return e?s("a",{className:(0,p["default"])(t,"gr-hyperlink"),"aria-label":this.getAriaLabel(),href:this.props.targetUrl},void 0,this.props.announcementText):s("span",{className:t},void 0,this.props.announcementText)},renderSecondaryLinkSection:function(){return this.hasTargetUrl()?s("span",{className:"siteAnnouncement__secondaryLinkSection"},void 0,s("a",{className:"gr-button gr-button--quiet","aria-label":this.getAriaLabel(),href:this.props.targetUrl},void 0,"Read more")):null},render:function(){return s("div",{className:"siteAnnouncement gr-mediaFlexbox gr-mediaFlexbox--alignItemsCenter"},void 0,s("div",{className:"gr-mediaFlexbox__media"},void 0,this.renderIcon()),s("div",{className:"gr-mediaFlexbox__desc siteAnnouncement__announcementBody"},void 0,s("h5",{className:m},void 0,"Goodreads News"),this.renderAnnouncementText()),this.renderSecondaryLinkSection())}})},{"../../modules/icon_sizes":8,"../circular_icon":34,"../gr_component_factory":49,classnames:"classnames",lodash:"lodash"}],79:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("../gr_component_factory"),a=n(o),i=e("../circular_icon"),l=n(i),u=e("../../modules/icon_sizes");r["default"]=a["default"].createClass({displayName:"WelcomeAnnouncement",propTypes:{imageUrl:React.PropTypes.string.isRequired},renderIcon:function(){return s(l["default"],{imageUrl:this.props.imageUrl,size:u.ICON_SIZES.MEDIUM,imageAlt:"Welcome to Goodreads",border:!0})},render:function(){return s("div",{className:"siteAnnouncement siteAnnouncement--welcome"},void 0,s("div",{className:"siteAnnouncement__welcomeIcon"},void 0,this.renderIcon()),s("div",{className:"siteAnnouncement__welcomeBody"},void 0,s("h5",{className:"siteAnnouncement__announcementText"},void 0,"Welcome to Goodreads"),s("span",{},void 0,"Meet your favorite book, find your reading community, and manage your reading life.")))}})},{"../../modules/icon_sizes":8,"../circular_icon":34,"../gr_component_factory":49}],80:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("./gr_component_factory"),a=n(o);r["default"]=a["default"].createClass({displayName:"Spinner",render:function(){return s("div",{className:"spinnerContainer"},void 0,s("div",{className:"spinner"},void 0,s("div",{className:"spinner__mask"},void 0,s("div",{className:"spinner__maskedCircle"},void 0))),s("div",{className:"spinnerFallbackText"},void 0,"Loading…"))}})},{"./gr_component_factory":49}],81:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),o=n(s),a=e("./gr_component_factory"),i=n(a),l=e("../react_actions/tab_actions"),u=n(l),d={CLICK:"click",HOVER:"hover"};r["default"]=i["default"].createClass({displayName:"Tab",propTypes:{group:o["default"].PropTypes.string.isRequired,name:o["default"].PropTypes.string.isRequired,initiallySelected:o["default"].PropTypes.bool,triggerEventType:o["default"].PropTypes.string},getDefaultProps:function(){return{initiallySelected:!1,triggerEventType:d.CLICK}},componentDidMount:function(){this.props.initiallySelected&&this.selectTab()},selectTab:function(){u["default"].selectTab(this.props.name,this.props.group)},render:function(){var e={};switch(this.props.triggerEventType){case d.CLICK:e.onClick=this.selectTab;break;case d.HOVER:e.onMouseOver=this.selectTab}return o["default"].createElement("span",e,this.props.children)}})},{"../react_actions/tab_actions":24,"./gr_component_factory":49,react:"react"}],82:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("./gr_component_factory"),l=n(i),u=e("reflux"),d=n(u),c=e("../react_stores/tabs_store"),f=n(c);r["default"]=l["default"].createClass({displayName:"TabContent",mixins:[d["default"].connect(f["default"])],propTypes:{group:a["default"].PropTypes.string.isRequired,name:a["default"].PropTypes.string.isRequired},isActive:function(){return this.props.name===this.state[this.props.group]},render:function(){return s("div",{},void 0,this.isActive()?this.props.children:null)}})},{"../react_stores/tabs_store":118,"./gr_component_factory":49,react:"react",reflux:"reflux"}],83:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){
for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("../gr_component_factory"),l=n(i),u=e("../shared/gr_prop_types"),d=n(u),c=e("moment"),f=n(c),p=e("../../modules/date_utils");r["default"]=l["default"].createClass({displayName:"RelativeTime",propTypes:{time:d["default"].date.isRequired,longFormat:a["default"].PropTypes.bool},getDefaultProps:function(){return{longFormat:!1}},getRelativeTime:function(){return this.props.longFormat?(0,f["default"])(this.props.time).fromNow():(0,p.fromNow)(this.props.time)},render:function(){return s("time",{dateTime:this.props.time,"aria-label":(0,f["default"])(this.props.time).fromNow()},void 0,this.getRelativeTime())}})},{"../../modules/date_utils":5,"../gr_component_factory":49,"../shared/gr_prop_types":76,moment:"moment",react:"react"}],84:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("../gr_component_factory"),l=n(i),u=e("../circular_icon"),d=n(u),c=e("../../modules/icon_sizes");r["default"]=l["default"].createClass({displayName:"UserIcon",propTypes:{user:a["default"].PropTypes.shape({viewableName:a["default"].PropTypes.string.isRequired,profileImage:a["default"].PropTypes.string.isRequired,profileUrl:a["default"].PropTypes.string}).isRequired,includeLink:a["default"].PropTypes.bool,size:a["default"].PropTypes.oneOf([c.ICON_SIZES.SMALL,c.ICON_SIZES.MEDIUM,c.ICON_SIZES.LARGE])},getDefaultProps:function(){return{includeLink:!0,size:c.ICON_SIZES.SMALL}},render:function(){var e=this.props.user;return a["default"].createElement(d["default"],s({imageUrl:e.profileImage,imageAlt:e.viewableName,linkUrl:e.profileUrl},this.props))}})},{"../../modules/icon_sizes":8,"../circular_icon":34,"../gr_component_factory":49,react:"react"}],85:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("../gr_component_factory"),a=n(o),i=e("../shared/gr_prop_types"),l=n(i);r["default"]=a["default"].createClass({displayName:"UserProfileLink",propTypes:{user:l["default"].user().isRequired},render:function(){return this.props.user.profileUrl?s("a",{className:"gr-hyperlink gr-hyperlink--bold",href:this.props.user.profileUrl},void 0,this.props.user.viewableName):s("b",{},void 0,this.props.user.viewableName)}})},{"../gr_component_factory":49,"../shared/gr_prop_types":76}],86:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("lodash"),a=n(o),i=e("../gr_component_factory"),l=n(i),u=e("../shared/gr_prop_types"),d=n(u),c=e("../shared/gr_spoiler_handler"),f=n(c),p=e("classnames"),m=n(p);r["default"]=l["default"].createClass({displayName:"ExpandableHtml",propTypes:d["default"].expandableHtml(),getInitialState:function(){return{expanded:!1}},collapse:function(){this.setState({expanded:!1})},expand:function(){this.setState({expanded:!0})},expandable:function(){return!a["default"].isEmpty(this.props.truncatedHtml)},visibleHtml:function(){return this.expandable()&&this.state.expanded!==!0?this.props.truncatedHtml:this.props.html},renderToggleButton:function(){if(!this.expandable())return null;var e=this.state.expanded?this.collapse:this.expand,t=this.state.expanded?"Less":"More",r=(0,m["default"])("gr-nakedButton","gr-nakedButton--asLink","u-marginLeftTiny");return s("button",{className:r,onClick:e},void 0,t)},componentDidMount:function(){this.refs.rootNode&&f["default"].replaceSpoilerHTMLWithReactComponents(this.refs.rootNode)},componentDidUpdate:function(){this.refs.rootNode&&f["default"].replaceSpoilerHTMLWithReactComponents(this.refs.rootNode)},render:function(){if(a["default"].isEmpty(this.props.html))return null;var e=(0,m["default"])("expandableHtml",this.props.className);return React.createElement("div",{className:e,ref:"rootNode"},s("span",{dangerouslySetInnerHTML:{__html:this.visibleHtml()}}),this.renderToggleButton())}})},{"../gr_component_factory":49,"../shared/gr_prop_types":76,"../shared/gr_spoiler_handler":77,classnames:"classnames",lodash:"lodash"}],87:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("../gr_component_factory"),a=n(o);r["default"]=a["default"].createClass({displayName:"HiddenHtml",propTypes:{unhideText:React.PropTypes.string},getDefaultProps:function(){return{unhideText:"unhide"}},getInitialState:function(){return{expanded:!1}},expand:function(){this.setState({expanded:!0})},renderUnhideButton:function(){return s("button",{className:"gr-nakedButton gr-nakedButton--asLink",onClick:this.expand},void 0,this.props.unhideText)},renderContent:function(){return this.state.expanded?this.props.children:s("span",{},void 0,this.renderUnhideButton())},render:function(){return s("div",{},void 0,this.renderContent())}})},{"../gr_component_factory":49}],88:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("../gr_component_factory"),l=n(i);r["default"]=l["default"].createClass({displayName:"Spoiler",propTypes:{html:a["default"].PropTypes.string.isRequired},getInitialState:function(){return{showSpoiler:!1}},onClickShowSpoiler:function(){this.setState({showSpoiler:!0})},onClickHideSpoiler:function(){this.setState({showSpoiler:!1})},render:function(){return s("span",{},void 0,this.state.showSpoiler?s("span",{className:"spoiler__textContainer"},void 0,s("span",{className:"spoiler__text u-marginRightTiny",dangerouslySetInnerHTML:{__html:this.props.html}}),s("button",{className:"gr-nakedButton gr-nakedButton--asLink",onClick:this.onClickHideSpoiler},void 0,"(hide spoiler)")):s("button",{className:"gr-nakedButton gr-nakedButton--asLink",onClick:this.onClickShowSpoiler},void 0,"(view spoiler)"))}})},{"../gr_component_factory":49,react:"react"}],89:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("../gr_component_factory"),i=n(a),l=e("../shared/gr_prop_types"),u=n(l),d=e("../shared/gr_spoiler_handler"),c=n(d);r["default"]=i["default"].createClass({displayName:"TruncatedHtml",propTypes:u["default"].truncatedHtml(),componentDidMount:function(){c["default"].replaceSpoilerHTMLWithReactComponents(this.refs.rootNode)},getComponentClassNames:function(){return this.props.className?{className:this.props.className}:{}},render:function(){return React.createElement("div",s({ref:"rootNode"},this.getComponentClassNames()),o("span",{dangerouslySetInnerHTML:{__html:this.props.html}}),this.props.truncated?o("a",{className:"u-marginLeftTiny",href:this.props.fullContentUrl},void 0,"More"):null)}})},{"../gr_component_factory":49,"../shared/gr_prop_types":76,"../shared/gr_spoiler_handler":77}],90:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("lodash"),l=n(i),u=e("./gr_component_factory"),d=n(u),c=e("classnames"),f=n(c),p=e("../react_actions/shelvings_actions"),m=n(p),h=e("../react_stores/shelvings_store"),g=n(h),_=e("../react_mixins/gr_reflux");r["default"]=d["default"].createClass({displayName:"UserRating",mixins:[(0,_.connectToLazyStore)(g["default"],"bookId")],propTypes:{bookId:a["default"].PropTypes.string,bookTitlePrimary:a["default"].PropTypes.string},setHoverRating:function(e){this.setState({hoverRating:e})},removeHoverRating:function(){this.setState({hoverRating:null})},isShelved:function(){return null!==this.state.exclusiveShelfName},updateRating:function(e,t){t.preventDefault(),this.isShelved()?m["default"].rateBook(this.state.book.bookId,e,this.state.book.title):m["default"].rateBook(this.props.bookId,e,this.props.bookTitlePrimary),this.refs.ratingContainer.focus()},starLabel:function v(e){var v=void 0;return v=null!==this.state.exclusiveShelfName&&this.state.rating>0?"Change rating from "+this.state.rating+" to "+e+" ":"Rate "+e+" ",v+=1==e?"star":"stars"},renderStar:function(e){var t=e+1,r=null!==this.state.exclusiveShelfName?this.state.rating:0,n=this.state.hoverRating?this.state.hoverRating:r,o=(0,f["default"])({userRating__star:!0,"userRating__star--selected":n>=t});return s("button",{className:o,title:this.starLabel(t),onClick:this.updateRating.bind(this,t),onMouseEnter:this.setHoverRating.bind(this,t)},t)},renderTextLabel:function(){return s("small",{className:"userRating__label"},void 0,null!==this.state.exclusiveShelfName&&this.state.rating>0?"My rating:":"Rate it:")},render:function(){return s("div",{className:"userRating"},void 0,this.renderTextLabel(),a["default"].createElement("div",{className:"userRating__starsWrapper",tabIndex:"0",ref:"ratingContainer",role:"group",onMouseLeave:this.removeHoverRating},l["default"].times(5,function(e){return this.renderStar(e)},this)))}})},{"../react_actions/shelvings_actions":23,"../react_mixins/gr_reflux":103,"../react_stores/shelvings_store":117,"./gr_component_factory":49,classnames:"classnames",lodash:"lodash",react:"react"}],91:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("../gr_component_factory"),l=n(i),u=e("reflux"),d=n(u),c=e("../../react_mixins/gr_reflux"),f=e("classnames"),p=n(f),m=e("../../react_stores/shelvings_store"),h=n(m),g=e("../../react_stores/user_shelves_store"),_=n(g),v=e("../../react_stores/user_agent_capabilities_store"),y=n(v),b=e("../../react_actions/shelvings_actions"),k=n(b),S=e("../dropdown"),T=n(S),P=e("../want_to_read/want_to_read_menu"),N=n(P),w=e("../user_rating"),x=n(w),C="Saving…";r["default"]=l["default"].createClass({displayName:"WantToReadButton",propTypes:{bookId:a["default"].PropTypes.string.isRequired,bookTitlePrimary:a["default"].PropTypes.string.isRequired,uniqueId:a["default"].PropTypes.string.isRequired,showStars:a["default"].PropTypes.bool,showMenu:a["default"].PropTypes.bool,origin:a["default"].PropTypes.string},mixins:[(0,c.connectToLazyStore)(h["default"],"bookId",{stateKey:"shelvings"}),d["default"].connect(_["default"],"userShelves"),d["default"].connect(y["default"],"userAgentCapabilities")],getDefaultProps:function(){return{showStars:!1,showMenu:!0}},shelveBook:function(){k["default"].shelveBook(this.props.bookId,_["default"].defaultShelves().WANT_TO_READ,this.props.origin)},unshelveBook:function(){window.confirm("Removing a book deletes your rating, review, etc. Remove this book from all your shelves?")&&k["default"].unshelveBook(this.state.shelvings.book.bookId)},componentDidUpdate:function(){this.buttonFocused&&!this.state.isShelvingInProgress&&(this.refs.wtrButton.focus(),this.buttonFocused=!1)},checkmarkClass:function(){var e="wantToReadButton__checkIcon--",t=_["default"].defaultShelves(),r=(0,p["default"])({toRead:this.state.shelvings.exclusiveShelfName==t.WANT_TO_READ.name,currentlyReading:this.state.shelvings.exclusiveShelfName==t.CURRENTLY_READING.name,read:this.state.shelvings.exclusiveShelfName==t.READ.name,other:!this.unshelved()});return e+r},unshelved:function(){return null===this.state.shelvings.exclusiveShelfName},renderWantToReadLeftUnshelved:function(){var e=this,t=this.state.shelvings.isShelvingInProgress?C:"Want to Read",r=(0,p["default"])("gr-nakedButton","gr-nakedButton--invisible","wantToReadButton__leftUnshelvedButton",{"wantToReadButton__leftUnshelvedButton--noOutline":this.state.shelvings.isShelvingInProgress}),n="Add "+this.props.bookTitlePrimary+" to your want to read shelf";return a["default"].createElement("button",{"aria-label":n,ref:"wtrButton",className:r,onClick:this.shelveBook,onFocus:function(){e.buttonFocused=!0}},t)},renderWantToReadLeftShelved:function(){var e=this,t=(0,p["default"])("gr-nakedButton","gr-nakedButton--invisible","wantToReadButton__leftShelvedButton"),r=(0,p["default"])({wantToReadButton__checkIcon:!this.state.shelvings.isShelvingInProgress},this.checkmarkClass()),n="Remove "+this.state.shelvings.book.title+" from my shelves",o=this.state.shelvings.isShelvingInProgress?C:this.state.shelvings.exclusiveShelfDisplayName;return this.state.userAgentCapabilities.touch?a["default"].createElement("button",{"aria-label":n,onClick:this.unshelveBook,onFocus:function(){e.buttonFocused=!0},ref:"wtrButton",className:t},s("span",{className:r+" u-inlineBlock"}),s("div",{className:"wantToReadButton__shelvedButtonText"},void 0,o)):s("span",{},void 0,a["default"].createElement("button",{"aria-label":n,ref:"wtrButton",onClick:this.unshelveBook,onFocus:function(){e.buttonFocused=!0},className:t+" "+r}),s("div",{className:"wantToReadButton__shelvedButtonText"},void 0,o))},renderWantToReadRight:function(){var e=this.unshelved()?this.props.bookId:this.state.shelvings.book.bookId,t=this.unshelved()?this.props.bookTitlePrimary:this.state.shelvings.book.title;return this.props.showMenu?s(T["default"],{trigger:s("div",{className:"wantToReadButton__right"}),triggerEventType:T["default"].TriggerEventTypes.HOVER,bemModifiers:"wantToReadMenu"},void 0,s(N["default"],{uniqueId:this.props.uniqueId,bookId:e,bookTitlePrimary:t,userShelves:this.state.userShelves,shelvings:this.state.shelvings})):null},render:function(){var e="",t=(0,p["default"])("wantToReadButton__left",{"wantToReadButton__left--standalone":!this.props.showMenu},{wantToReadButton__leftUnshelved:this.unshelved()},{wantToReadButton__leftShelved:!this.unshelved()});return e=this.unshelved()?this.renderWantToReadLeftUnshelved():this.renderWantToReadLeftShelved(),s("div",{},void 0,s("div",{className:"wantToReadButton"},void 0,s("div",{className:t},void 0,e),this.renderWantToReadRight()),this.props.showStars?s(x["default"],{bookId:this.props.bookId}):null)}})},{"../../react_actions/shelvings_actions":23,"../../react_mixins/gr_reflux":103,"../../react_stores/shelvings_store":117,"../../react_stores/user_agent_capabilities_store":119,"../../react_stores/user_shelves_store":120,"../dropdown":43,"../gr_component_factory":49,"../user_rating":90,"../want_to_read/want_to_read_menu":92,classnames:"classnames",react:"react",reflux:"reflux"}],92:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("lodash"),i=n(a),l=e("../gr_component_factory"),u=n(l),d=e("../../react_mixins/gr_reflux"),c=e("../../react_stores/want_to_read_menu_store"),f=n(c),p=e("./want_to_read_menu_filter"),m=n(p),h=e("../../react_actions/shelvings_actions"),g=n(h),_=e("./want_to_read_menu_shelf_creator"),v=n(_),y=7;r["default"]=u["default"].createClass({displayName:"WantToReadMenu",mixins:[(0,d.connectToLazyStore)(f["default"],"uniqueId")],propTypes:{bookId:React.PropTypes.string.isRequired,bookTitlePrimary:React.PropTypes.string.isRequired,uniqueId:React.PropTypes.string.isRequired,userShelves:React.PropTypes.object.isRequired,shelvings:React.PropTypes.object.isRequired},shelveBook:function(e){g["default"].shelveBook(this.props.bookId,e)},toggleNonExclusiveShelving:function(e){g["default"].toggleNonExclusiveShelving(this.props.bookId,e,!1,this.props.bookTitlePrimary)},renderFilter:function(){var e=this.props.userShelves.customExclusiveShelves.concat(this.props.userShelves.nonExclusiveShelves),t=e.length>=y;return t?o(m["default"],{bookId:this.props.bookId,uniqueId:this.props.uniqueId,shelvings:this.props.shelvings,wantToReadMenu:this.state}):void 0},renderEmptyMessage:function(){var e=this.state.displayableExclusiveShelves,t=this.state.displayableNonExclusiveShelves,r=t.concat(e).length;return 0===r?o("li",{className:"wantToReadMenu__genericItem"},void 0,"No Matching Shelves"):void 0},renderExclusiveShelves:function(){var e=this,t=this.state.displayableExclusiveShelves;return null!==this.props.shelvings.exclusiveShelfName&&(t=i["default"].reject(t,function(t){return t.name===e.props.shelvings.exclusiveShelfName})),i["default"].map(t,function(t){var r=t.displayName,n="Shelve "+e.props.bookTitlePrimary+" as "+r;return o("li",{className:"wantToReadMenu__shelfItem"},r,o("button",{className:"gr-nakedButton\n                           gr-nakedButton--invisible\n                           wantToReadMenu__exclusiveShelf","aria-label":n,onClick:function(){e.shelveBook(t)}},void 0,r))})},renderNonExclusiveShelves:function(){var e=this,t=this.state.displayableNonExclusiveShelves;return i["default"].map(t,function(t){var r=!1;null!==e.props.shelvings.exclusiveShelfName&&i["default"].includes(e.props.shelvings.nonExclusiveShelfNames,t.name)&&(r=!0);var n=t.displayName,s="Shelve "+e.props.bookTitlePrimary+" as "+n;return o("li",{className:"wantToReadMenu__shelfItem"},n,o("label",{className:"wantToReadMenu__nonExclusiveShelf"},void 0,o("input",{className:"wantToReadMenu__shelfCheckbox",checked:r,type:"checkbox",name:"shelf["+t.name+"]","aria-label":s,onChange:function(){e.toggleNonExclusiveShelving(t)}}),n))})},renderAddNewShelfButton:function(){var e=this.props.userShelves.customExclusiveShelves.concat(this.props.userShelves.nonExclusiveShelves).concat(this.props.userShelves.defaultShelves),t=i["default"].map(e,function(e){return e.name}),r=!i["default"].includes(t,this.state.shelfNameFilter);return o("li",{className:"wantToReadMenu__newShelfButtonContainer"},void 0,React.createElement(v["default"],s({shelfNameFilter:this.state.shelfNameFilter,userCanAddShelf:r,uniqueId:this.props.uniqueId,bookId:this.props.bookId,bookTitlePrimary:this.props.bookTitlePrimary},this.state)))},render:function(){return o("div",{},void 0,o("div",{className:"wantToReadMenu__scrollableContainer"},void 0,this.renderFilter(),this.renderEmptyMessage(),this.renderExclusiveShelves(),this.renderNonExclusiveShelves()),this.renderAddNewShelfButton())}})},{"../../react_actions/shelvings_actions":23,"../../react_mixins/gr_reflux":103,"../../react_stores/want_to_read_menu_store":121,"../gr_component_factory":49,"./want_to_read_menu_filter":93,"./want_to_read_menu_shelf_creator":94,lodash:"lodash"}],93:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("../gr_component_factory"),l=n(i),u=e("../../react_actions/want_to_read_menu_actions"),d=n(u);r["default"]=l["default"].createClass({displayName:"WantToReadMenuFilter",propTypes:{bookId:a["default"].PropTypes.string.isRequired,uniqueId:a["default"].PropTypes.string.isRequired,shelvings:a["default"].PropTypes.object.isRequired,wantToReadMenu:a["default"].PropTypes.object.isRequired},handleKeyPress:function(e){var t=null;null!==this.props.shelvings.exclusiveShelfName&&(t=this.props.shelvings.exclusiveShelfName),d["default"].updateShelfNameFilter(e.target.value,this.props.uniqueId,t)},render:function(){return s("form",{className:"wantToReadMenuFilter"},void 0,s("input",{className:"gr-textInput\n                               gr-textInput--small\n                               gr-textInput--fullWidth\n                               wantToReadMenuFilter--textInput",type:"text",placeholder:"Filter Shelves","aria-label":"Filter Shelf Names",value:this.props.wantToReadMenu.shelfNameFilter,onChange:this.handleKeyPress}))}})},{"../../react_actions/want_to_read_menu_actions":27,"../gr_component_factory":49,react:"react"}],94:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,n,s){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=s;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=n(o),i=e("../gr_component_factory"),l=n(i),u=e("../../react_actions/want_to_read_menu_actions"),d=n(u),c=e("../../react_actions/shelvings_actions"),f=n(c),p=e("../facebook/timeline_publish_toggle"),m=n(p),h=e("lodash"),g=n(h);r["default"]=l["default"].createClass({displayName:"WantToReadMenuShelfCreator",propTypes:{userCanAddShelf:a["default"].PropTypes.bool.isRequired,shelfNameFilter:a["default"].PropTypes.string,uniqueId:a["default"].PropTypes.string.isRequired,bookId:a["default"].PropTypes.string.isRequired,bookTitlePrimary:a["default"].PropTypes.string.isRequired},getInitialState:function(){return{unsavedShelfName:""}},openAddShelfTextbox:function(){d["default"].openAddShelfTextbox(this.props.uniqueId)},checkIfCommentIsEmpty:function(e){this.setState({unsavedShelfName:e.target.value})},shelveAsNewShelfName:function(e,t){t.preventDefault(),d["default"].updateShelfNameFilter("",this.props.uniqueId),f["default"].toggleNonExclusiveShelving(this.props.bookId,{name:e},!0,this.props.bookTitlePrimary)},render:function(){var e=this;return""!==this.props.shelfNameFilter&&this.props.userCanAddShelf?s("span",{className:"wantToReadShelfCreator"},void 0,s("button",{className:"gr-nakedButton\n                                   gr-nakedButton--invisible\n                                   wantToReadShelfCreator__button","aria-label":"Add new "+this.props.shelfNameFilter+" shelf",onClick:function(t){e.shelveAsNewShelfName(e.props.shelfNameFilter,t)}},void 0,"Add new “",s("span",{className:"wantToReadShelfCreator__addShelfButtonShelfName"},void 0,this.props.shelfNameFilter),"” shelf")):this.props.showAddShelfTextbox?s("form",{className:"wantToReadShelfCreator",onSubmit:function(t){e.shelveAsNewShelfName(e.state.unsavedShelfName,t)}},void 0,s("input",{className:"gr-textInput\n                                  gr-textInput--small\n                                  wantToReadShelfCreator__textInput",type:"text",placeholder:"New Shelf Name","aria-label":"Add new shelf name",onChange:this.checkIfCommentIsEmpty}),s("input",{type:"submit",className:"gr-button\n                                  gr-button--small\n                                  wantToReadShelfCreator__addShelfButton",disabled:g["default"].isEmpty(g["default"].trim(this.state.unsavedShelfName)),value:"Add"})):this.props.userCanAddShelf?s("span",{className:"wantToReadShelfCreator"},void 0,s("button",{className:"gr-nakedButton\n                                   gr-nakedButton--invisible\n                                   wantToReadShelfCreator__showAddShelfTextboxButton","aria-label":"Add new shelf",onClick:this.openAddShelfTextbox},void 0,"Add New Shelf"),s(m["default"],{cogAction:m["default"].COG_ACTIONS.READ,bemModifiers:"wtrMenu"})):null}})},{"../../react_actions/shelvings_actions":23,"../../react_actions/want_to_read_menu_actions":27,"../facebook/timeline_publish_toggle":45,"../gr_component_factory":49,lodash:"lodash",react:"react"}],95:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.ConversationsStores=r.ConversationsComponents=void 0;var s=e("../../react_stores/like_store"),o=n(s),a=e("../../react_stores/comments_store"),i=n(a),l=e("../../react_components/comment/comment_form"),u=n(l),d=e("../../react_components/comment/comments"),c=n(d),f=e("../../react_components/like/like_button"),p=n(f),m=e("../../react_components/like/like_information"),h=n(m);r.ConversationsComponents={CommentForm:u["default"],Comments:c["default"],LikeButton:p["default"],LikeInformation:h["default"]},r.ConversationsStores={CommentsStore:i["default"],LikeStore:o["default"]}},{"../../react_components/comment/comment_form":37,"../../react_components/comment/comments":38,"../../react_components/like/like_button":64,"../../react_components/like/like_information":66,"../../react_stores/comments_store":106,"../../react_stores/like_store":113}],96:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ExperimentStores=r.ExperimentComponents=void 0;var n=e("./conversations"),s=e("./old_homepage"),o=e("./review_show"),a=e("lodash");r.ExperimentComponents=(0,a.merge)({},n.ConversationsComponents,s.OldHomepageComponents,o.ReviewShowComponents),r.ExperimentStores=(0,a.merge)({},n.ConversationsStores,s.OldHomepageStores,o.ReviewShowStores)},{"./conversations":95,"./old_homepage":97,"./review_show":98,lodash:"lodash"}],97:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.OldHomepageStores=r.OldHomepageComponents=void 0;var s=e("../../react_stores/like_store"),o=n(s),a=e("../../react_stores/comments_store"),i=n(a),l=e("../../react_components/comment/comment_form"),u=n(l),d=e("../../react_components/comment/comments"),c=n(d),f=e("../../react_components/like/like_button"),p=n(f),m=e("../../react_components/like/like_information"),h=n(m),g=e("../../react_components/like/like_simple_footer"),_=n(g);r.OldHomepageComponents={CommentForm:u["default"],Comments:c["default"],LikeButton:p["default"],LikeInformation:h["default"],LikeSimpleFooter:_["default"]},r.OldHomepageStores={CommentsStore:i["default"],LikeStore:o["default"]}},{"../../react_components/comment/comment_form":37,"../../react_components/comment/comments":38,"../../react_components/like/like_button":64,"../../react_components/like/like_information":66,"../../react_components/like/like_simple_footer":67,"../../react_stores/comments_store":106,"../../react_stores/like_store":113}],98:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.ReviewShowStores=r.ReviewShowComponents=void 0;var s=e("../../react_stores/like_store"),o=n(s),a=e("../../react_components/like/like_simple_footer"),i=n(a);r.ReviewShowComponents={LikeSimpleFooter:i["default"]},r.ReviewShowStores={LikeStore:o["default"]}},{"../../react_components/like/like_simple_footer":67,"../../react_stores/like_store":113}],99:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.HeaderComponents=r.HeaderStores=void 0;var s=e("../react_stores/favorite_genres_store"),o=n(s),a=e("../react_stores/notifications_store"),i=n(a),l=e("../react_stores/tabs_store"),u=n(l),d=e("../react_stores/current_user_store"),c=n(d),f=e("../react_stores/google_ads_store"),p=n(f),m=e("../react_components/ads/google_banner_ad"),h=n(m),g=e("../react_components/header/header_store_connector"),_=n(g),v=e("../react_components/site_announcement/site_announcement"),y=n(v),b=e("../react_components/site_announcement/welcome_announcement"),k=n(b);r.HeaderStores={FavoriteGenresStore:o["default"],NotificationsStore:i["default"],TabsStore:u["default"],GoogleAdsStore:p["default"],CurrentUserStore:c["default"]},r.HeaderComponents={HeaderStoreConnector:_["default"],GoogleBannerAd:h["default"],SiteAnnouncement:y["default"],WelcomeAnnouncement:k["default"]}},{"../react_components/ads/google_banner_ad":32,"../react_components/header/header_store_connector":59,"../react_components/site_announcement/site_announcement":78,"../react_components/site_announcement/welcome_announcement":79,"../react_stores/current_user_store":107,"../react_stores/favorite_genres_store":110,"../react_stores/google_ads_store":112,"../react_stores/notifications_store":115,"../react_stores/tabs_store":118}],100:[function(e,t,r){"use strict";
function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),o=n(s),a=e("lodash"),i=n(a),l=e("classnames"),u=n(l);r["default"]={propTypes:{bemModifiers:o["default"].PropTypes.oneOfType([o["default"].PropTypes.string,o["default"].PropTypes.arrayOf(o["default"].PropTypes.string)])},withBemModifiers:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if(null===t&&(t=this.props.bemModifiers),!t)return e;if(i["default"].isString(t))return e+" "+e+"--"+t;if(i["default"].isArray(t)){var r=(0,u["default"])(e,i["default"].map(t,function(t){return e+"--"+t}));return r}},withBemElement:function(e,t){return this.props.bemModifiers?i["default"].isString(this.props.bemModifiers)?e+"--"+this.props.bemModifiers+"__"+t:i["default"].isArray(this.props.bemModifiers)?(0,u["default"])(i["default"].map(this.props.bemModifiers,function(r){return e+"--"+r+"__"+t})):void 0:e+"__"+t}}},{classnames:"classnames",lodash:"lodash",react:"react"}],101:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),o=n(s),a=e("lodash"),i=n(a);r["default"]={propTypes:{deployServices:o["default"].PropTypes.arrayOf(o["default"].PropTypes.string)},isFeatureEnabled:function(e){return i["default"].indexOf(this.deployServices(),e)>=0},deployServices:function(){if(void 0===this.props.deployServices)throw"trying to access Deploy Services from component, but component does not contain deployServices prop ("+this.displayName+")";return this.props.deployServices}}},{lodash:"lodash",react:"react"}],102:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(e){return{getInitialState:function(){return this.store=e(),this.store.getInitialState()},componentWillMount:function(){this.actions=this.store.actions,this.unsubscribe=this.store.listen(this.onStoreChange)},componentWillUnmount:function(){this.unsubscribe()},onStoreChange:function(e){this.setState(e)}}}},{}],103:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n=r.stateKey,o=void 0===n?null:n,a=r.filterValue,l=void 0===a?null:a;return{getInitialState:function(){var r=e.getInitialState(i["default"].get(this.props,t));return l&&(r=r[l]),i["default"].isNull(o)||(r=s({},o,r)),r},componentDidMount:function(){var r=this;u["default"].utils.extend(this,u["default"].ListenerMethods),this.listenTo(e,function(e){var n=e[i["default"].get(r.props,t)];l&&(n=n[l]),i["default"].isNull(o)||(n=s({},o,n)),r.setState(n)})},componentWillUnmount:u["default"].ListenerMixin.componentWillUnmount}}Object.defineProperty(r,"__esModule",{value:!0}),r.connectToLazyStore=o;var a=e("lodash"),i=n(a),l=e("reflux"),u=n(l)},{lodash:"lodash",reflux:"reflux"}],104:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("lodash"),o=n(s),a=250;r["default"]={onEnterIntent:function(e,t){t||(t=a);try{clearTimeout(this.leaveTimeout)}catch(r){}this.hoverTimeout=o["default"].delay(e,t)},onLeaveIntent:function(e,t){t||(t=a);try{clearTimeout(this.hoverTimeout)}catch(r){}this.leaveTimeout=o["default"].delay(e,t)}}},{lodash:"lodash"}],105:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("lodash"),o=n(s),a=e("reflux"),i=n(a),l=e("freezer-js"),u=n(l),d=e("../react_actions/book_search_actions_factory"),c=n(d),f=function(){var e=new u["default"]({showLoadingSpinner:!1,showResultsContainer:!1,results:[],query:"",activeResult:null}),t=(0,c["default"])(),r=function(t){var r=e.get();r.results.reset(t)},n=i["default"].createStore({listenables:t,getInitialState:e.get,getState:e.get,actions:t,initializeWith:function(t){e.get().set("showLoadingSpinner",t.showLoadingSpinner).set("showResultsContainer",t.showResultsContainer).set("query",t.query).set("activeResult",t.activeResult).results.reset(t.results)},reset:function(){e.get().reset({})},setValue:function(t,r){var n=e.get();n.set(t,r)},onSelectSpecificResult:function(e){var t=o["default"].find(this.getState().results,function(t){return t.bookId===e});this.setValue("activeResult",t),this.trigger(this.getState())},onSetShowResultsContainer:function(e){this.setValue("showResultsContainer",e),this.trigger(this.getState())},onSelectNextResult:function(e){var t=this.getState().results,r=o["default"].indexOf(t,this.getState().activeResult);this.setValue("activeResult",t[(r+1)%e]),this.trigger(this.getState())},onSelectPreviousResult:function(e){var t=this.getState().results,r=this.getState().activeResult,n=o["default"].indexOf(t,r);0===n||null===r?this.setValue("activeResult",t[e-1]):this.setValue("activeResult",t[(n-1)%e]),this.trigger(this.getState())},onSearchResultsFound:function(e,t){r(t),this.setValue("query",e),this.setValue("showLoadingSpinner",!1),this.setValue("activeResult",null),this.setValue("showResultsContainer",!0),this.trigger(this.getState())},onSearch:function(e,r){this.setValue("showLoadingSpinner",!0),this.trigger(this.getState()),$j.ajax({url:r,data:{format:"json",q:e},success:function(r){t.searchResultsFound(e,r)}})}});return n};r["default"]=f},{"../react_actions/book_search_actions_factory":11,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],106:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("lodash"),o=n(s),a=e("reflux"),i=n(a),l=e("freezer-js"),u=n(l),d=e("../react_actions/comment_actions"),c=n(d),f=e("./shared/newsfeed_updates_mixin"),p=n(f),m={},h=new u["default"](m),g=2,_=10,v=function(){return h.get()},y=function(e){v().reset(o["default"].merge({},m,e))},b=function(e){return o["default"].has(v(),e)||v().set(e,{numComments:0,unsavedComment:"",comments:[],saveInProgress:!1,showCommentButton:!1,textareaRows:1,showPagination:!1,currentPage:1,showSeeMoreLoadingSpinner:!1}),v()[e]},k=function(e,t){b(e).set(t)};r["default"]=i["default"].createStore({listenables:c["default"],mixins:[(0,p["default"])(f.NEWSFEED_DEPENDENT_STORE_KEYS.COMMENTS)],initializeWith:function(e){y(e)},updateWith:function(e){var t=o["default"].transform(e,function(e,t,r){e[r]={numComments:t.numComments||0,unsavedComment:t.unsavedComment||"",comments:t.comments||[],showCommentButton:!1,saveInProgress:!1,textareaRows:1,deletableByCurrentUser:t.deletableByCurrentUser,blockedByCurrentUser:t.blockedByCurrentUser||!1}});v().set(t)},onTextareaFocusRequested:function(e){k(e,{textareaFocusRequested:!0}),this.notifyListeners()},onTextareaFocused:function(e){k(e,{textareaRows:g,textareaFocusRequested:!1,showCommentButton:!0}),this.notifyListeners()},onTextareaUnfocused:function(e){var t=b(e).unsavedComment;o["default"].isEmpty(o["default"].trim(t))&&k(e,{textareaRows:1}),this.notifyListeners()},onShowSeeMoreLoadingSpinner:function(e){k(e,{showSeeMoreLoadingSpinner:!0}),this.notifyListeners()},onDeleteComment:function(e,t,r){var n=this,s=b(e),a=s.numComments-1,i=o["default"].findIndex(s.comments,function(e){return e.uri===t});i>=0&&(s.set("numComments",a),s.comments.splice(i,1),s.showPagination||this.notifyListeners(),$j.post("/comment/destroy?comment_uri="+t).done(function(){s.showPagination&&(0===b(e).comments.length&&s.currentPage>1?(r.page=s.currentPage-1,c["default"].showCommentsForPage(r)):s.currentPage<Math.ceil(a/_)?(r.page=s.currentPage,c["default"].showCommentsForPage(r)):n.notifyListeners())}))},onAddNewComment:function(e){var t=this,r={body:b(e.subjectKey).unsavedComment,authorUser:e.authorUser,updatedAtMessage:"Just now"};k(e.subjectKey,{saveInProgress:!0}),this.notifyListeners(),$j.post("/comment.json",{type:e.subject.type,id:e.subject.id,resource_uri:e.subject.uri,comment:{body_usertext:r.body},update_feed:!0,digest_default:!0}).done(function(r){var n=b(e.subjectKey),s=n.numComments+1;if(n.set({unsavedComment:"",saveInProgress:!1,numComments:s,showCommentButton:!1}),n.comments.length<_){var o=r;n.comments.push({createdAt:new Date,body:o.body,deletableByCurrentUser:o.deletableByCurrentUser,blockedByCurrentUser:o.blockedByCurrentUser,authorUser:e.authorUser,updatedAtMessage:"Just now",uri:o.uri,flagForAbuseUrl:o.flagForAbuseUrl})}else e.page=Math.ceil(s/_),c["default"].showCommentsForPage(e);t.onTextareaUnfocused(e.subjectKey)}).fail(function(){k(e.subjectKey,{saveInProgress:!1,showCommentButton:!1}),c["default"].textareaUnfocused(e.subjectKey)})},onShowCommentsForPage:function(e){var t=this,r=e.page>0?e.page:1;$j.get("/comment/index.json",{type:e.subject.type,id:e.subject.id,resource_uri:e.subject.uri,page:r,per_page:_,reverse:!0}).done(function(n){k(e.subjectKey,{comments:n.comments,showPagination:!0,currentPage:r,showSeeMoreLoadingSpinner:!1}),t.notifyListeners()})},onCommentEntered:function(e,t){k(e,{unsavedComment:t}),this.notifyListeners()},getState:v,getInitialState:function(e){return o["default"].isUndefined(e)?v():b(e)},getInitialStateForKey:b,reset:function(){y({})},notifyListeners:function(){this.trigger(v())}})},{"../react_actions/comment_actions":12,"./shared/newsfeed_updates_mixin":116,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],107:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("lodash"),o=n(s),a=e("reflux"),i=n(a),l=e("freezer-js"),u=n(l),d={currentUser:{}},c=new u["default"](d),f=function(){return c.get()},p=function(e){f().reset(o["default"].merge({},d,e))};r["default"]=i["default"].createStore({initializeWith:function(e){o["default"].each(o["default"].keys(e),function(e){if(!o["default"].has(d,e))throw new Error("Unexpected key passed to initializeWith. Received "+e+" Expected one of "+o["default"].keys(d))}),p(e)},getState:f,getInitialState:f,reset:function(){p({})}})},{"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],108:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("lodash"),o=n(s),a=e("reflux"),i=n(a),l=e("freezer-js"),u=n(l),d=e("../react_actions/facebook_actions"),c=n(d),f={isUserConnected:!1,cog:{},images:{}},p={STATUS:"status",READ:"read",TO_READ:"toRead",AUTO_ADD_FRIENDS:"autoAdd",FOLLOWING:"following",LIKE:"like"},m=new u["default"](f),h=function(){return m.get()};r["default"]=i["default"].createStore({listenables:c["default"],getState:h,getInitialState:h,COG_ACTIONS:p,getCogValue:function(e){var t=h().cog;return t&&t[e]?1:0},getCogRead:function(){return this.getCogValue(p.READ)},getCogStatus:function(){return this.getCogValue(p.STATUS)},initializeWith:function(e){h().reset(e)},reset:function(){h().reset({})},updateWith:function(e){h().set({isUserConnected:e.isUserConnected,cog:e.cog,images:e.images})},onConnectToFacebook:function(){var e=this;$grfb.ensurePublishPermission().done(function(){var t={isUserConnected:!0};h().set("isUserConnected",!0);var r=o["default"].transform(h().cog,function(e,t,r){e[r]=!0});t.cog=r,h().set(t),e.trigger(h())})},onTogglePublishPermission:function(e){var t=h(),r=t.cog[e];t.cog.enabled&&(t.cog.set(e,!r),this.trigger(h()))}})},{"../react_actions/facebook_actions":13,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],109:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("lodash"),o=n(s),a=e("reflux"),i=n(a),l=e("freezer-js"),u=n(l),d=e("../react_actions/favorite_genres_actions"),c=n(d),f=e("../react_actions/favorite_genres_form_actions"),p=n(f),m=new u["default"]({selectedGenres:[]}),h=function(){return m.get()},g=function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];h().selectedGenres.reset(e)},_=i["default"].createStore({listenables:p["default"],getInitialState:h,getState:h,initializeWith:function(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];g(t)},onSubmitSelectedGenres:function(){c["default"].changeFavoriteGenres(h().selectedGenres)},onSelectFavoriteGenre:function(e){o["default"].includes(h().selectedGenres,e)||(h().selectedGenres.push(e),this.notifyListeners())},onDeselectFavoriteGenre:function(e){h().selectedGenres.shift(e),this.notifyListeners()},notifyListeners:function(){this.trigger(h())},reset:function(){g()}});r["default"]=_},{"../react_actions/favorite_genres_actions":14,"../react_actions/favorite_genres_form_actions":15,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],110:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("lodash"),o=n(s),a=e("reflux"),i=n(a),l=e("freezer-js"),u=n(l),d=e("../react_actions/favorite_genres_actions"),c=n(d),f={allGenres:[],favoriteGenres:[]},p=new u["default"](f),m=function(){return p.get()},h=function(e){m().reset(o["default"].merge({},f,e))},g=function(e){return o["default"].inject(m().allGenres,function(t,r){var n=r.name;return t.favorites[n]=o["default"].includes(e,n),t},{favorites:{}})};r["default"]=i["default"].createStore({listenables:[c["default"]],initializeWith:function(e){o["default"].each(o["default"].keys(e),function(e){if(!o["default"].has(f,e))throw new Error("Unexpected key passed to initializeWith. Received "+e+". Expected one of "+o["default"].keys(f))}),h(e)},updateWith:function(e){m().set(e)},getState:m,getInitialState:m,reset:function(){h()},notifyListeners:function(){this.trigger(m())},onChangeFavoriteGenres:function(e){var t=this,r=function(){m().favoriteGenres.reset(e),t.notifyListeners()};$j.post("/user/edit_fav_genres",g(e),r)}})},{"../react_actions/favorite_genres_actions":14,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],111:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("lodash"),o=n(s),a=e("reflux"),i=n(a),l=e("freezer-js"),u=n(l),d=e("../react_actions/featured_genres_actions"),c=n(d),f=e("../react_actions/shelvings_actions"),p=n(f),m=e("../react_stores/favorite_genres_store"),h=n(m),g=new u["default"]({}),_=function(){return g.get()},v=i["default"].createStore({listenables:c["default"],init:function(){h["default"].listen(function(){c["default"].requestFeaturedBooks()})},initializeWith:function(e){g.get().reset({featuredGenreBookInfo:e})},getInitialState:_,getState:_,onRequestFeaturedBooks:function(){var e=this;return o["default"].isEmpty(h["default"].getState().favoriteGenres)?void this.saveNewFeaturedBooks([]):void(_().requestedFeaturedBooksBefore||($j.get("/genres/featured_books").done(function(t){e.saveNewFeaturedBooks(t.genres),p["default"].addShelvings(t.shelvings)}).fail(function(e){c["default"].displayError(e)}),_().set("requestedFeaturedBooksBefore",!0)))},saveNewFeaturedBooks:function(e){_().set("featuredGenreBookInfo",e),this.notifyListeners()},onDisplayError:function(){_().set("errorMessage","Error loading featured books in genre."),this.notifyListeners()},notifyListeners:function(){this.trigger(_())},reset:function(){_().reset({})}});r["default"]=v},{"../react_actions/featured_genres_actions":16,"../react_actions/shelvings_actions":23,"../react_stores/favorite_genres_store":110,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],112:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.ImpressionCode=void 0;var s=e("lodash"),o=n(s),a=e("reflux"),i=n(a),l=e("freezer-js"),u=n(l),d=e("../react_actions/google_ads_actions"),c=n(d),f=e("../react_actions/newsfeed_actions"),p=n(f),m=e("../modules/ads/google_ad_helper"),h=e("./shared/newsfeed_updates_mixin"),g=n(h),_={targeting:{},ads:{},nativeAds:{},polls:{},device_type:null},v=new u["default"](_),y=r.ImpressionCode={success:"0",dfpError:"1",monolithError:"2",empty:"3"},b=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];k().reset(o["default"].merge({},_,e))},k=function(){return v.get()},S=function(e){if(!o["default"].has(k().ads,e)){if(!o["default"].has(k().nativeAds,e)){if(!o["default"].has(k().polls,e))throw new ReferenceError("No such product existing for key "+e);return k().polls[e]}return k().nativeAds[e]}return k().ads[e]},T=function(e,t){S(e).set(t)},P=function(e){return e.path.split("/",3)[2]},N=function(e){return{ad_unit:P(e),line_item_id:e.lineItemId,ad_device_type:e.adDeviceType}},w=function(e,t,r){var n=o["default"].merge(N(t),r);$j.ajax({url:e,type:"GET",data:n})},x=function(e){w(e.pmetClickTrackUrl,e,{click_type:"click"})};r["default"]=i["default"].createStore({listenables:[c["default"]],mixins:[(0,g["default"])(h.NEWSFEED_DEPENDENT_STORE_KEYS.NATIVE_ADS)],initializeWith:function(e){b(e),(0,m.initGooglePublisherTag)(k().targeting),o["default"].map(o["default"].merge(this.getState().ads,this.getState().nativeAds,this.getState().polls),function(e,t){(0,m.defineSlot)(t,e.path,e.dimensions)})},initializeWithoutDFPIntegrationWithData:function(e){b(e)},updateWith:function(e){k().set(e)},mergeWith:function(e){k().set(o["default"].merge({},k(),e))},onHasRequestedCreativeForSlot:function(e){T(e,{hasRequestedCreative:!0})},onDisplayCreativeForSlot:function(e){T(e,{hasCreative:!0})},onRemoveAdSlot:function(e){T(e,{hasCreative:!1,hasRequestedCreative:!0}),this.notifyListeners()},onTrackImpression:function(e,t){var r=S(e);w(r.pmetImpressionTrackUrl,r,{impression_output:t})},findAd:function(e){var t=o["default"].findKey(k().ads,function(t){return t.path.match(e)}),r=t?k().ads[t]:null;return!r||r.hasRequestedCreative&&!r.hasCreative?null:{id:t,ad:k().ads[t]}},onAttachServedBannerAdAttributesAndTracking:function(e,t,r,n){T(e,{lineItemId:t,creative:r});var s=S(e);return r?(w(s.pmetImpressionTrackUrl,s,{impression_output:n}),void s.creative.on("click","a",function(){x(s)})):void w(s.pmetImpressionTrackUrl,s,{impression_output:y.dfpError})},onPollAnswerChanged:function(e,t){var r=this;$j.post("/poll/homepage_vote",{answer:e,id:t.creative.pollId}).done(function(e){e.showStats=!0,T(t.id,e),r.trigger(k())}),T(t.id,{answer:Number(e)}),this.trigger(k())},onPopulateHomepagePollAndTracking:function(e,t,r,n){var s=this,o=S(e);return r?(T(e,{creative:r}),$j.get("/poll/index_ajax_homepage_poll/",n).done(function(t){"answer"in t&&(t.showStats=!0),T(e,t),s.trigger(k())}),void w(o.pmetImpressionTrackUrl,o,{impression_output:y.success})):void w(o.pmetImpressionTrackUrl,o,{impression_output:y.dfpError})},onAttachServedNativeAdAttributesAndTracking:function(e,t,r,n,s){var o=this,a=S(e);return r?(T(e,{creative:r,lineItemId:t}),void $j.ajax({type:"GET",url:"/home/index_ajax_newsfeed_ad",data:{format:"json",id:n,line_item_id:t,ad_unit:"goodr.home.news.625x210",ad_device_type:"desktop",uxo:!0}}).done(function(t){t.ok?(T(e,t),p["default"].updateNativeAdSlot(e,S(e)),o.trigger(k()),w(a.pmetImpressionTrackUrl,a,{impression_output:s})):w(a.pmetImpressionTrackUrl,a,{impression_output:y.monolithError})})):void w(a.pmetImpressionTrackUrl,a,{impression_output:y.dfpError})},getInitialState:function(e){return o["default"].isUndefined(e)?k():S(e)},getInitialStateForKey:S,getState:k,reset:b,notifyListeners:function(){this.trigger(k())}})},{"../modules/ads/google_ad_helper":3,"../react_actions/google_ads_actions":17,"../react_actions/newsfeed_actions":20,"./shared/newsfeed_updates_mixin":116,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],113:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("lodash"),o=n(s),a=e("reflux"),i=n(a),l=e("../modules/env_utils"),u=n(l),d=e("freezer-js"),c=n(d),f=e("../react_actions/like_actions"),p=n(f),m=e("./shared/newsfeed_updates_mixin"),h=n(m),g=new c["default"]({}),_=function(){return g.get()},v=function(e){return o["default"].has(_(),e)||_().set(e,{likeCount:0,isLiked:!1,showLoadingSpinner:!1}),_()[e]},y=function(e,t,r){_()[e].set(t,r)},b=function(e,t){return _()[e][t]},k=function(e){var t=b(e,"likeCount"),r=b(e,"isLiked");y(e,"isLiked",!r),y(e,"likeCount",b(e,"isLiked")?t+1:t-1)},S=i["default"].createStore({listenables:p["default"],mixins:[(0,h["default"])(m.NEWSFEED_DEPENDENT_STORE_KEYS.LIKES)],getState:_,getInitialState:function(e){return o["default"].isUndefined(e)?_():v(e)},getInitialStateForKey:v,reset:function(){g.get().reset({})},initializeWith:function(e){o["default"].each(o["default"].keys(e),function(t){var r=e[t];r.likedBy=r.likedBy||!1,r.likeCount=r.likeCount||0,r.showLoadingSpinner=!1,_().set(t,r)})},updateWith:function(e){this.initializeWith(e)},triggerLoadingSpinner:function(e){var t=b(e,"showLoadingSpinner");y(e,"showLoadingSpinner",!t)},onLike:function(e){var t=this;this.triggerLoadingSpinner(e),this.trigger(this.getState()),$j.post("/rating",{format:"json",rating:{resource_type:b(e,"resourceType"),resource_id:b(e,"resourceId"),resource_uri:b(e,"resourceUri"),rating:1}}).done(function(r){k(e),y(e,"ratingId",r.rating_id),t.triggerLoadingSpinner(e),t.trigger(_())}).fail(function(e){JSON.parse(e.responseText).redirect&&u["default"].setLocationUrl(JSON.parse(e.responseText).redirect)})},onUnLike:function(e){var t=this;this.triggerLoadingSpinner(e),this.trigger(this.getState());var r=b(e,"ratingId"),n="",s={};r?(n="/rating/"+r,s={format:"json"}):(n="/rating/",s={format:"json",resource_uri:b(e,"resourceUri")}),$j.ajax({type:"DELETE",url:n,data:s,success:function(){k(e),t.triggerLoadingSpinner(e),t.trigger(_())}})}});r["default"]=S},{"../modules/env_utils":7,"../react_actions/like_actions":18,"./shared/newsfeed_updates_mixin":116,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],114:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("reflux"),o=n(s),a=e("freezer-js"),i=n(a),l=e("../react_actions/modal_actions"),u=n(l),d=new i["default"]({}),c=function(){return d.get()},f=o["default"].createStore({listenables:u["default"],getInitialState:c,getState:c,initializeWith:function(e){d.get().reset(e)},onOpenModal:function(e){d.get().set("currentActiveModal",e),this.notifyListeners()},onCloseModal:function(){d.get().set("currentActiveModal",null),this.notifyListeners()},notifyListeners:function(){this.trigger(c())},reset:function(){d.get().reset({})}});r["default"]=f},{"../react_actions/modal_actions":19,"freezer-js":"freezer-js",reflux:"reflux"}],115:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("reflux"),o=n(s),a=e("freezer-js"),i=n(a),l=e("../react_actions/notifications_actions"),u=n(l),d=new i["default"]({}),c=function(){return d.get()},f=o["default"].createStore({listenables:u["default"],getInitialState:c,getState:c,initializeWith:function(e){d.get().reset(e)},updateWith:function(e){this.initializeWith(e)},onLoadNotifications:function(e){d.get().set("notifications",e),d.get().set("unreadCount",0),this.notifyListeners()},onLoadError:function(){d.get().set("errorOccurred",!0),this.notifyListeners()},onRequestNotifications:function(){d.get().hasRequestedBefore||$j.ajax({url:"/notifications/",type:"GET",success:function(e){u["default"].loadNotifications(e)},error:function(){u["default"].loadError()}}),d.get().set("hasRequestedBefore",!0)},notifyListeners:function(){this.trigger(c())},reset:function(){d.get().reset({})}});r["default"]=f},{"../react_actions/notifications_actions":21,"freezer-js":"freezer-js",reflux:"reflux"}],116:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.NEWSFEED_DEPENDENT_STORE_KEYS=void 0;var s=e("../../react_actions/newsfeed_actions"),o=n(s),a=e("lodash"),i=function(e){var t={init:function(){(0,a.includes)((0,a.values)(l),e)&&this.listenTo(o["default"].newsfeedItemsLoaded,this.onNewsfeedItemsLoaded)},onNewsfeedItemsLoaded:function(t){e&&(this.updateWith(t[e]),this.trigger(this.getState()))}};return t};r["default"]=i;var l=r.NEWSFEED_DEPENDENT_STORE_KEYS={COMMENTS:"comments",LIKES:"likes",SHELVINGS:"shelvings",AUTHOR_FOLLOWS:"authorFollows",NATIVE_ADS:"ads"}},{"../../react_actions/newsfeed_actions":20,lodash:"lodash"}],117:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("lodash"),o=n(s),a=e("reflux"),i=n(a),l=e("freezer-js"),u=n(l),d=e("../react_actions/shelvings_actions"),c=n(d),f=e("../react_actions/reading_session_actions"),p=n(f),m=e("../react_actions/user_shelves_actions"),h=n(m),g=e("../react_stores/facebook_store"),_=n(g),v=e("./shared/newsfeed_updates_mixin"),y=n(v),b=e("../modules/default_shelves"),k=e("../modules/book_origins"),S=new u["default"]({}),T=function(){return S.get()},P=function(e){return o["default"].has(T(),e)||T().set(e,{exclusiveShelfName:null,nonExclusiveShelfNames:null,exclusiveShelfDisplayName:null,isShelvingInProgress:!1}),T()[e]},N=function(e,t){P(e).set(t),o["default"].each(T(),function(r,n){r.book&&r.book.bookId===e&&P(n).set(t)})},w=function(e,t,r){N(e,{exclusiveShelfName:t.name,exclusiveShelfDisplayName:t.displayName}),"undefined"!=typeof r&&N(e,{book:r.book,updatedAt:Date.parse(r.updatedAt)}),t.name===b.DEFAULT_SHELVES.CURRENTLY_READING.name&&p["default"].refreshReadingSessions()},x=function(e,t,r){N(e,{exclusiveShelfName:null,exclusiveShelfDisplayName:null,rating:0,nonExclusiveShelfNames:null}),r&&h["default"].removeNonExclusiveShelf(t.name)},C=function(e){N(e,{rating:0})},R=function(e,t){var r=arguments.length<=2||void 0===arguments[2]?null:arguments[2];A(e,r),N(e,{rating:t})},M=function(e,t){var r=arguments.length<=2||void 0===arguments[2]?null:arguments[2],n=P(e),s=o["default"].clone(n.nonExclusiveShelfNames)||[];s.push(t.name),N(e,{nonExclusiveShelfNames:s}),A(e,r),h["default"].addNonExclusiveShelf(t.name)},L=function(e,t,r){var n=P(e),s=o["default"].clone(n.nonExclusiveShelfNames);s=o["default"].without(s,t.name),r&&h["default"].removeNonExclusiveShelf(t.name),N(e,{nonExclusiveShelfNames:s})},A=function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],r=P(e);null===r.exclusiveShelfName&&w(e,b.DEFAULT_SHELVES.READ,t)},E=function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],r=e;return t&&(r=o["default"].merge({},e,{book_origin:t})),$j.post("/shelf/add_to_shelf.json",r)};r["default"]=i["default"].createStore({listenables:c["default"],mixins:[(0,y["default"])(v.NEWSFEED_DEPENDENT_STORE_KEYS.SHELVINGS)],getState:T,getInitialState:function(e){return o["default"].isUndefined(e)?T():P(e)},initializeWith:function(e){S.get().reset(e),this.notifyListeners()},reset:function(){S.get().reset({})},notifyListeners:function(){this.trigger(T())},updateWith:function(e){var t=o["default"].transform(e,function(e,t,r){return e[r].isShelvingInProgress=!1,e[r].updatedAt=Date.parse(t.updatedAt),e},e);this.getState().set(t),this.notifyListeners()},onShelveBook:function(e,t){var r=this,n=arguments.length<=2||void 0===arguments[2]?null:arguments[2];N(e,{isShelvingInProgress:!0});var s={book_id:e,name:t.name};t.name===b.DEFAULT_SHELVES.READ.name&&(s.explicit=_["default"].getCogRead()),this.notifyListeners(),E(s,n).done(function(r){w(e,t,r),c["default"].bookShelved(r),n===k.BOOK_ORIGINS.CURRENTLY_READING_WIDGET&&p["default"].shelveBookSuccess()}).fail(function(){window.alert("There was an error adding the book to your shelf, please try again.")}).always(function(){N(e,{isShelvingInProgress:!1}),r.notifyListeners()})},onUnshelveBook:function(e){var t=this;N(e,{isShelvingInProgress:!0}),this.notifyListeners(),$j.post("/review/destroy",{id:e}).done(function(){x(e)}).fail(function(){window.alert("There was an error removing the book from your shelves, please try again.")}).always(function(){N(e,{isShelvingInProgress:!1}),t.notifyListeners()})},onToggleNonExclusiveShelving:function(e,t,r,n){var s=this,a=P(e).nonExclusiveShelfNames,i=!o["default"].includes(a,t.name),l=T()[e]&&null!==P(e).exclusiveShelfName,u={book:{bookId:e,title:n}};i?(A(e,u),M(e,t,u)):L(e,t,!1),this.notifyListeners();var d={book_id:e,name:t.name,a:i?"":"remove",explicit:_["default"].getCogRead()};E(d).fail(function(){window.alert("There was an error adding the book to your shelf, please try again."),l?i?L(e,t,r):M(e,t,u):x(e,t,r),s.notifyListeners()})},onRateBook:function(e,t,r){var n=this,s=0,o=!1,a={book:{bookId:e,title:r}};T()[e]&&(s=P(e).rating,o=null!==P(e).exclusiveShelfName),R(e,t,a),this.notifyListeners(),$j.post("/review/rate",{format:"json",stars_click:!0,id:e,rating:t}).fail(function(){window.alert("There was an error saving your rating, please try again."),s>0?R(e,s,a):o?C(e):x(e,null,!1),n.notifyListeners()})},onAddShelvings:function(e){this.updateWith(e),this.notifyListeners()}})},{"../modules/book_origins":4,"../modules/default_shelves":6,"../react_actions/reading_session_actions":22,"../react_actions/shelvings_actions":23,"../react_actions/user_shelves_actions":26,"../react_stores/facebook_store":108,"./shared/newsfeed_updates_mixin":116,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],118:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("reflux"),o=n(s),a=e("freezer-js"),i=n(a),l=e("../react_actions/tab_actions"),u=n(l),d=new i["default"]({}),c=function(){return d.get()},f=o["default"].createStore({listenables:u["default"],getInitialState:c,getState:c,initializeWith:function(e){d.get().reset(e)},updateWith:function(e){c().set(e)},onSelectTab:function(e,t){d.get().set(t,e),this.notifyListeners()},notifyListeners:function(){this.trigger(c())},reset:function(){d.get().reset({})}});r["default"]=f},{"../react_actions/tab_actions":24,"freezer-js":"freezer-js",reflux:"reflux"}],119:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("reflux"),o=n(s),a=e("freezer-js"),i=n(a),l=e("../react_actions/user_agent_capabilities_actions"),u=n(l),d={touch:!1},c=new i["default"](d);r["default"]=o["default"].createStore({listenables:[u["default"]],initializeWith:function(e){c.get().reset(e)},reset:function(){c.get().reset(d)},getInitialState:function(){return c.get()},onUserAgentGainsTouch:function(){c.get().set("touch",!0),this.trigger(c.get())},onUserAgentLosesTouch:function(){c.get().set("touch",!1),this.trigger(c.get())}})},{"../react_actions/user_agent_capabilities_actions":25,"freezer-js":"freezer-js",reflux:"reflux"}],120:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("lodash"),o=n(s),a=e("reflux"),i=n(a),l=e("freezer-js"),u=n(l),d=e("../react_actions/user_shelves_actions"),c=n(d),f=e("../react_actions/want_to_read_menu_actions"),p=n(f),m=e("../modules/default_shelves"),h={defaultShelves:[],customExclusiveShelves:[],nonExclusiveShelves:[]},g=new u["default"](h),_=function(){return g.get()};r["default"]=i["default"].createStore({listenables:[c["default"]],getInitialState:g.get,getState:_,defaultShelves:function(){var e=_().defaultShelves;return 0===e.length?m.DEFAULT_SHELVES:{READ:o["default"].find(e,"name","read"),CURRENTLY_READING:o["default"].find(e,"name","currently-reading"),WANT_TO_READ:o["default"].find(e,"name","to-read")}},initializeWith:function(e){g.get().reset(e)},reset:function(){g.get().reset(h)},updateWith:function(e){g.get().reset(e)},onAddNonExclusiveShelf:function(e){var t=o["default"].clone(g.get().nonExclusiveShelves)||[],r=o["default"].map(t,function(e){return e.name});o["default"].includes(r,e)||(t.unshift({name:e,url:"",displayName:e}),g.get().set("nonExclusiveShelves",t),p["default"].updateShelves(),this.trigger(_()));
},onRemoveNonExclusiveShelf:function(e){var t=o["default"].clone(g.get().nonExclusiveShelves)||[],r=o["default"].map(t,function(e){return e.name});o["default"].includes(r,e)&&(o["default"].remove(t,function(t){return t.name===e}),g.get().set("nonExclusiveShelves",t),p["default"].updateShelves(),this.trigger(_()))}})},{"../modules/default_shelves":6,"../react_actions/user_shelves_actions":26,"../react_actions/want_to_read_menu_actions":27,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],121:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var s=e("lodash"),o=n(s),a=e("reflux"),i=n(a),l=e("freezer-js"),u=n(l),d=e("../react_actions/want_to_read_menu_actions"),c=n(d),f=e("./user_shelves_store"),p=n(f),m={},h=new u["default"](m),g=function(){return h.get()},_=function(e,t){var r=[],n=t.defaultShelves.concat(t.customExclusiveShelves||[]);return r=o["default"].isEmpty(e)?n:o["default"].filter(n,function(t){return t.name.match(new RegExp(e,"i"))})},v=function(e,t){var r=[];return r=o["default"].isEmpty(e)?t.nonExclusiveShelves:o["default"].filter(t.nonExclusiveShelves,function(t){return t.name.match(new RegExp(e,"i"))})},y=function(e){var t=p["default"].getState(),r=_(e,t),n=v(e,t);return{displayableExclusiveShelves:r,displayableNonExclusiveShelves:n,shelfNameFilter:e}},b=function(e,t){g().set(t,y(e))},k=function(e){var t=g()[e].shelfNameFilter;g().set(e,y(t))},S=function(e){return o["default"].has(g(),e)||b("",e),g()[e]},T=function(e){g().reset(o["default"].merge({},m,e))};r["default"]=i["default"].createStore({listenables:[c["default"]],getInitialState:function(e){return o["default"].isUndefined(e)?g():S(e)},getState:g,initializeWith:function(e){T(e)},reset:function(){T(m)},updateWith:function(e){o["default"].each(o["default"].keys(e),function(t){g().set(t,e[t])}),this.notifyListeners()},notifyListeners:function(){this.trigger(g())},onUpdateShelfNameFilter:function(e,t){b(e,t),S(t).set("showAddShelfTextbox",!1),this.notifyListeners()},onOpenAddShelfTextbox:function(e){S(e).set("showAddShelfTextbox",!0),this.notifyListeners()},onUpdateShelves:function(){o["default"].each(o["default"].keys(g()),function(e){k(e)}),this.notifyListeners()}})},{"../react_actions/want_to_read_menu_actions":27,"./user_shelves_store":120,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}]},{},[31]);
//# sourceMappingURL=../react_client_side/site_header-b693abdfca.js.map