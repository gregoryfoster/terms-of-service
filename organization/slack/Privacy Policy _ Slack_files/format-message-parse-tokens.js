(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.parseMessageFormatString=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";module.exports=function tokens(pattern){var current={tokens:[],pattern:String(pattern),index:0};try{messageTokens(current,"message");if(current.index<current.pattern.length){throw new Error("Unexpected symbol")}}catch(error){current.error=error}return{tokens:current.tokens,lastIndex:current.index,error:current.error}};function isDigit(char){return char==="0"||char==="1"||char==="2"||char==="3"||char==="4"||char==="5"||char==="6"||char==="7"||char==="8"||char==="9"}function isWhitespace(char){var code=char&&char.charCodeAt(0);return code>=9&&code<=13||code===32||code===133||code===160||code===6158||code>=8192&&code<=8205||code===8232||code===8233||code===8239||code===8287||code===8288||code===12288||code===65279}function skipWhitespace(current){var start=current.index;var pattern=current.pattern;var length=pattern.length;while(current.index<length&&isWhitespace(pattern[current.index])){++current.index}if(start<current.index){current.tokens.push(["space",pattern.slice(start,current.index)])}}function text(current,parentType){var pattern=current.pattern;var length=pattern.length;var isHashSpecial=parentType==="plural"||parentType==="selectordinal";var isSpaceSpecial=parentType==="style";var start=current.index;var char;while(current.index<length){char=pattern[current.index];if(char==="{"||char==="}"||isHashSpecial&&char==="#"||isSpaceSpecial&&isWhitespace(char)){break}else if(char==="'"){char=pattern[++current.index];if(char==="'"){++current.index}else if(char==="{"||char==="}"||isHashSpecial&&char==="#"||isSpaceSpecial&&isWhitespace(char)){while(++current.index<length){char=pattern[current.index];if(pattern.slice(current.index,current.index+2)==="''"){++current.index}else if(char==="'"){++current.index;break}}}}else{++current.index}}return pattern.slice(start,current.index)}function argumentTokens(current){var pattern=current.pattern;var char=pattern[current.index];if(char==="#"){++current.index;current.tokens.push(["#","#"]);return}if(char==="{"){++current.index;current.tokens.push(["{","{"])}else{throw new Error("Expected { to start placeholder")}skipWhitespace(current);argId(current);skipWhitespace(current);char=pattern[current.index];if(char==="}"){++current.index;current.tokens.push([char,char]);return}else if(char===","){++current.index;current.tokens.push([char,char])}else{throw new Error("Expected , or }")}skipWhitespace(current);var type=argType(current);skipWhitespace(current);char=pattern[current.index];if(char==="}"){++current.index;current.tokens.push([char,char]);return}else if(char===","){++current.index;current.tokens.push([char,char])}else{throw new Error("Expected , or }")}skipWhitespace(current);if(type==="plural"||type==="selectordinal"){pluralOffsetTokens(current);skipWhitespace(current);subMessagesTokens(current,type)}else if(type==="select"){subMessagesTokens(current,type)}else{argStyle(current)}skipWhitespace(current);char=pattern[current.index];if(char==="}"){++current.index;current.tokens.push([char,char])}else{throw new Error("Expected } to end the placeholder")}}function argId(current){var pattern=current.pattern;var length=pattern.length;var start=current.index;while(current.index<length){var char=pattern[current.index];if(char==="{"||char==="#"||char==="}"||char===","||isWhitespace(char)){break}++current.index}var token=pattern.slice(start,current.index);if(token){current.tokens.push(["id",token])}else{throw new Error("Expected placeholder id")}return token}function argType(current){var pattern=current.pattern;var token;var types=["number","date","time","ordinal","duration","spellout","plural","selectordinal","select"];for(var t=0,tt=types.length;t<tt;++t){var type=types[t];if(pattern.slice(current.index,current.index+type.length)===type){token=type;current.index+=type.length;break}}if(token){current.tokens.push(["type",token])}else{throw new Error("Expected placeholder type:\n"+types.join(", "))}return token}function argStyle(current){var token=text(current,"style");if(token){current.tokens.push(["style",token])}else{throw new Error("Expected a placeholder style name")}return token}function pluralOffsetTokens(current){var pattern=current.pattern;var length=pattern.length;if(pattern.slice(current.index,current.index+7)==="offset:"){current.index+=7;current.tokens.push(["offset","offset"]);current.tokens.push([":",":"]);skipWhitespace(current);var start=current.index;while(current.index<length&&isDigit(pattern[current.index])){++current.index}if(start!==current.index){current.tokens.push(["number",pattern.slice(start,current.index)])}else{throw new Error("Expected offset number")}}}function subMessagesTokens(current,parentType){var pattern=current.pattern;var length=pattern.length;var hasSubs=false;var hasOther=false;while(current.index<length&&pattern[current.index]!=="}"){var select=selector(current);if(select==="other"){hasOther=true}skipWhitespace(current);subMessageTokens(current,parentType);skipWhitespace(current);hasSubs=true}if(!hasSubs){throw new Error("Expected "+parentType+" message options")}else if(!hasOther){throw new Error("Expected "+parentType+' to have an "other" option')}}function selector(current){var start=current.index;var pattern=current.pattern;var length=pattern.length;while(current.index<length){var char=pattern[current.index];if(char==="}"||char===","||char==="{"||isWhitespace(char)){break}++current.index}var token=pattern.slice(start,current.index);if(token){current.tokens.push(["selector",token])}else{throw new Error("Expected option selector")}return token}function subMessageTokens(current,parentType){var char=current.pattern[current.index];if(char!=="{"){throw new Error("Expected { to start sub message")}++current.index;current.tokens.push([char,char]);messageTokens(current,parentType);char=current.pattern[current.index];if(char!=="}"){throw new Error("Expected } to end sub message")}++current.index;current.tokens.push([char,char])}function messageTokens(current,parentType){var tokens=current.tokens;var pattern=current.pattern;var length=pattern.length;var token;if(token=text(current,parentType)){tokens.push(["text",token])}while(current.index<length&&pattern[current.index]!=="}"){argumentTokens(current);if(token=text(current,parentType)){tokens.push(["text",token])}}return tokens}},{}]},{},[1])(1)});
