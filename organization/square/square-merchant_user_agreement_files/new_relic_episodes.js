var NR_QUEUE=[];typeof window.NREUMQ!="undefined"?NR_QUEUE=NREUMQ:typeof window.EPISODES!="undefined"?NR_QUEUE=EPISODES.q:typeof window.NREUM!="undefined"&&(NR_QUEUE=NREUM.q);var NREUM=NREUM||{};NREUM.q=NR_QUEUE,NREUM.targetOrigin=document.location.protocol+"//"+document.location.host,NREUM.version=23,NREUM.autorun="undefined"!=typeof NREUM.autorun?NREUM.autorun:!0,NREUM.init=function(){NREUM.jsonp=!1,NREUM.beaconToken=null,NREUM.navCookie=!0,NREUM.bDone=!1,NREUM.cycle=0,NREUM.logging=!1,NREUM.contentLoadFired=!1,NREUM.marks={},NREUM.measures={},NREUM.starts={},NREUM.findStartTime(),NREUM.load=null,NREUM.addEventListener("beforeunload",NREUM.beforeUnload,!1),NREUM.addEventListener("pagehide",NREUM.beforeUnload,!1),NREUM.processQ(),NREUM.beacon=null,NREUM.licenseKey=null,NREUM.applicationID=null,NREUM.transactionName=null,NREUM.agentToken=null,NREUM.txnParam=null,NREUM.unloaded=!1,document.readyState==="complete"?NREUM.domContentLoaded():"undefined"!=typeof document.addEventListener?document.addEventListener("DOMContentLoaded",NREUM.domContentLoaded,!1):"undefined"!=typeof document.attachEvent&&document.attachEvent("onreadystatechange",NREUM.readyStateChange),NREUM.load||document.loaded?NREUM.onload():NREUM.addEventListener("load",NREUM.onload,!1)},NREUM.processQ=function(){var f=NREUM.q.length,e,h,g;for(g=0;g<f;g++){e=NREUM.q[g],h=null;switch(e[0]){case"mark":NREUM.mark(e[1],e[2]);break;case"measure":NREUM.measure(e[1],e[2],e[3]);break;case"done":NREUM.done(e[1]);break;case"nrf":case"nrfinish":h="t";break;case"nrf2":case"nrfinish2":h="to";break;case"nrfj":h="to",NREUM.jsonp=!0;break;case"load":NREUM.load=e[1];break;default:NREUM.dprint("Unknown queue command "+e[0])}h&&NREUM.nrfinish(h,e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12])}},NREUM.nrfinish=function(z,y,x,w,v,u,t,s,r,q,p,o,n){NREUM.dprint("NREUM: finish data received"),NREUM.txnParam=z,NREUM.beacon=y,NREUM.licenseKey=x,NREUM.applicationID=w,NREUM.transactionName=v,NREUM.tt_guid=r,NREUM.user=p,NREUM.account=o,NREUM.product=n,NREUM.measures.qt=u,NREUM.measures.ap=t,NREUM.dom_end_time=s,NREUM.agentToken=q},NREUM.mark=function(d,c){NREUM.dprint("NREUM.mark: "+d+", "+c);d?(NREUM.marks[d]=parseInt(c||(new Date).getTime(),10),"firstbyte"===d?(NREUM.measure("be","starttime","firstbyte"),NREUM.dom_start_time=NREUM.marks.firstbyte):"onload"===d?NREUM.measure("fe","firstbyte","onload"):"domContent"===d&&NREUM.measure("dc","firstbyte","domContent")):NREUM.dprint("Error: markName is undefined in NREUM.mark.")},NREUM.measure=function(g,f,j){NREUM.dprint("NREUM.measure: "+g+", "+f+", "+j);if(!g){NREUM.dprint("Error: episodeName is undefined in NREUM.measure.")}else{var i;if("undefined"==typeof f){"number"==typeof NREUM.marks[g]?i=NREUM.marks[g]:i=(new Date).getTime()}else{if("number"==typeof NREUM.marks[f]){i=NREUM.marks[f]}else{if("number"==typeof f){i=f}else{NREUM.dprint("Error: unexpected startNameOrTime in NREUM.measure: "+f);return}}}var h;if("undefined"==typeof j){h=(new Date).getTime()}else{if("number"==typeof NREUM.marks[j]){h=NREUM.marks[j]}else{if("number"==typeof j){h=j}else{NREUM.dprint("NREUM: Error: unexpected endNameOrTime in NREUM.measure: "+j);return}}}NREUM.starts[g]=parseInt(i,10),NREUM.measures[g]=parseInt(h-i,10)}},NREUM.done=function(b){NREUM.bDone||(NREUM.bDone=!0,NREUM.mark("done"),NREUM.autorun&&NREUM.sendBeacon(),"function"==typeof b&&b())},NREUM.getMarks=function(){return NREUM.marks},NREUM.getMeasures=function(){return NREUM.measures},NREUM.getStarts=function(){return NREUM.starts},NREUM.sendBeacon=function(){var i=document.getElementById("nreum-send-beacon");if(!i){NREUM.processQ(),NREUM.domContentLoaded();if(NREUM.licenseKey===null||NREUM.applicationID===null){NREUM.dprint("NREUM: licenseKey or applicationID has not been set");return}NREUM.dom_end_time&&NREUM.dom_start_time&&(NREUM.dprint("NREUM: picking up DOM processing time from embedded JS"),NREUM.mark("domContent",NREUM.dom_end_time)),NREUM.load&&(NREUM.dprint("NREUM: picking up load event time from embedded JS"),NREUM.mark("onload",NREUM.load));var h=NREUM.getMeasures(),n="",m;for(m in h){n+=m+"="+h[m]+"&"}var l;if(n){l=("http:"===document.location.protocol?"http:":"https:")+"//"+NREUM.beacon+"/1/"+NREUM.licenseKey,l+="?a="+NREUM.applicationID+"&",l+=n,NREUM.transactionName!==null&&NREUM.transactionName.length>0&&(l+=NREUM.txnParam+"="+encodeURIComponent(NREUM.transactionName)),NREUM.tt_guid!=null&&NREUM.tt_guid.length>0&&(l+="&tt="+encodeURIComponent(NREUM.tt_guid)),NREUM.user!=null&&NREUM.user.length>0&&(l+="&us="+encodeURIComponent(NREUM.user)),NREUM.account!=null&&NREUM.account.length>0&&(l+="&ac="+encodeURIComponent(NREUM.account)),NREUM.product!=null&&NREUM.product.length>0&&(l+="&pr="+encodeURIComponent(NREUM.product)),NREUM.agentToken!=null&&NREUM.agentToken.length>0&&(l+="&tk="+encodeURIComponent(NREUM.agentToken)),l+="&v="+NREUM.version;var k=document.createElement("script");k.id="nreum-send-beacon";if(NREUM.jsonp){l+="&jsonp=NREUM.setToken",k.type="text/javascript",k.src=l}else{var j=new Image;j.src=l,k.type="text/x-nreum-data"}document.body.appendChild(k),NREUM.dprint("NREUM: (new) data sent",l)}}},NREUM.setToken=function(b){NREUM.dprint("NREUM: trace "+b),NREUM.beaconToken=b},NREUM.inlineHit=function(h,g,l,k,j,i){NREUM.cycle+=1;NREUM.licenseKey===null||NREUM.applicationID===null?NREUM.dprint("NREUM: licenseKey or applicationID has not been set"):(img=new Image,url=("http:"===document.location.protocol?"http:":"https:")+"//"+NREUM.beacon+"/1/"+NREUM.licenseKey,url+="?a="+NREUM.applicationID+"&",url+="t="+h+"&",url+="qt="+g+"&",url+="ap="+l+"&",url+="be="+k+"&",url+="dc="+j+"&",url+="fe="+i+"&",url+="c="+NREUM.cycle,img.src=url,NREUM.dprint("NREUM Inline: "+url))},NREUM.findStartTime=function(){var b=NREUM.findStartWebTiming()||NREUM.findStartGToolbar()||NREUM.findStartCookie();b?NREUM.mark("starttime",b):NREUM.dprint("NREUM: Error: couldn't find a start time")},NREUM.findStartWebTiming=function(){var e;if(/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)){var d=new Number(RegExp.$1);if(d>=7){return e}}var f=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance;"undefined"!=typeof f&&"undefined"!=typeof f.timing&&"undefined"!=typeof f.timing.navigationStart&&(e=f.timing.navigationStart,NREUM.dprint("NREUM.findStartWebTiming: startTime = "+e)),e&&(NREUM.navCookie=!1);return e},NREUM.findStartGToolbar=function(){var e,d;try{window.external&&window.external.pageT?e=window.external.pageT:window.gtbExternal&&window.gtbExternal.pageT?e=window.gtbExternal.pageT():window.chrome&&window.chrome.csi&&(e=window.chrome.csi().pageT),e&&e<60000&&(d=(new Date).getTime()-e,NREUM.dprint("NREUM.findStartGToolbar: startTime = "+d))}catch(f){}d&&(NREUM.navCookie=!1);return d},NREUM.findStartCookie=function(){var t=document.cookie.split(" "),s,r;for(s=0;s<t.length;s++){if(0===t[s].indexOf("NREUM=")){var q,p,o=t[s].substring("NREUM=".length).split("&"),n,m;for(r=0;r<o.length;r++){0===o[r].indexOf("s=")?n=o[r].substring(2):0===o[r].indexOf("p=")?(p=o[r].substring(2),p.charAt(p.length-1)===";"&&(p=p.substr(0,p.length-1))):0===o[r].indexOf("r=")&&(q=o[r].substring(2),q.charAt(q.length-1)===";"&&(q=q.substr(0,q.length-1)))}if(q){var l=NREUM.sHash(document.referrer);m=l==q,m||(m=NREUM.sHash(document.location.href)==q&&l==p)}if(m&&n){var k=(new Date).getTime();if(k-n>60000){NREUM.dprint("NREUM.findStartCookie: startTime > 60s old - ignored");return undefined}NREUM.dprint("NREUM.findStartCookie: startTime = "+n);return n}}}return undefined},NREUM.beforeUnload=function(b){NREUM.unloaded||(NREUM.navCookie&&(document.cookie="NREUM=s="+Number(new Date)+"&r="+NREUM.sHash(document.location.href)+"&p="+NREUM.sHash(document.referrer)+"; path=/"),NREUM.beaconToken&&(document.cookie="NRAGENT=tk="+NREUM.beaconToken+"; max-age=1; path=/"),NREUM.unloaded=!0)},NREUM.onload=function(b){NREUM.mark("onload"),NREUM.autorun&&NREUM.done()},NREUM.domContentLoaded=function(b){NREUM.contentLoadFired||(NREUM.mark("domContent",(new Date).getTime()),NREUM.contentLoadFired=!0)},NREUM.readyStateChange=function(b){document.readyState==="complete"&&NREUM.domContentLoaded()},NREUM.addEventListener=function(e,d,f){if("undefined"!=typeof window.attachEvent){return window.attachEvent("on"+e,d)}if(window.addEventListener){return window.addEventListener(e,d,f)}},NREUM.sHash=function(e){var d,f=0;for(d=0;d<e.length;d++){f+=(d+1)*e.charCodeAt(d)}return Math.abs(f)},"undefined"!=typeof console&&"undefined"!=typeof console.log?NREUM.dprint=function(b){NREUM.logging&&console.log(b)}:NREUM.dprint=function(b){},NREUM.init();