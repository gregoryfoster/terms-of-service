!function(){"use strict";window.crush=window.crush||{},crush.capabilityList={},crush.capabilityList.saveDataFromGet=function(a){var b,c,d,e=[];if(void 0===a)return void(crush.capabilityList.capabilities=void 0);for(d=0;d<a.length;d++)c=a[d],b={},b.capabilityProductType=c.capabilityType,b.capabilityDescription=c.capabilityDescription,c.treatmentName=c.treatmentName.toLowerCase(),b.capabilityTreatmentName=c.treatmentName,b.capabilityProgramId=c.programId,b.capabilityId=c.capabilityId,b.capabilityTreatmentId=c.treatmentId,c.placement.page=c.placement.page.toLowerCase(),b.capabilityPlacement=c.placement,b.firstTime=c.firstTime,e.push(b),"object"!=typeof crush.capabilityList[c.placement.page]&&(crush.capabilityList[c.placement.page]={}),crush.capabilityList[c.placement.page]&&"object"!=typeof crush.capabilityList[c.placement.page][c.treatmentName]&&(crush.capabilityList[c.placement.page][c.treatmentName]={}),crush.capabilityList[c.placement.page][c.treatmentName].capability=b;crush.capabilityList.capabilities=e}}(),function(){"use strict";window.crush=window.crush||{},crush.captureExperimentData={},crush.captureExperimentData.sendData=function(a,b,c){var d,e=window.location.href,f=window.navigator.userAgent,g=crush.captureExperimentData.getIeVersion(f),h=crush.util.getDomain(e),i=h.serviceDomain+"/capability-management-webservice-"+h.space+"-current/programs/"+b.capabilityProgramId+"/capabilities/"+b.capabilityId+"/treatments/"+b.capabilityTreatmentId+"/selected-users/X-REP-CLIENT-POID/interaction-records";9===g?(d=new window.XMLHttpRequest,d.open("POST",i,!0),d.setRequestHeader("Accept","application/json"),d.setRequestHeader("X-XSRF-TOKEN",crush.token),d.withCredentials=!0,d.send(JSON.stringify(a))):$.ajax({url:i,headers:{"X-XSRF-TOKEN":crush.token,Accept:"application/json"},contentType:"application/json",type:"POST",data:JSON.stringify(a),xhrFields:{withCredentials:!0},timeout:1e3}).then(function(){void 0!==c&&c()})},crush.captureExperimentData.scrubString=function(a){var b=a.replace(/[ ]/g," ").replace(/[Â ]/g," ");return b=b.replace(/[^a-zA-Z0-9]/g," ")},crush.captureExperimentData.sendCommonData=function(a,b,c,d){var e=window.location.href,f=crush.forcePilot.getForcedPilot(e,"crush"),g=crush.captureExperimentData.scrubString(b);f||crush.isInternal?void 0!==d&&crush.isInternal&&d():(c&&crush.captureExperimentData.setSessionCookie(c,!0),crush.captureExperimentData.captureSessions(),crush.captureExperimentData.sendData({capabilityDescription:a.capabilityDescription,capabilityType:a.capabilityType,capabilityTreatmentName:a.capabilityTreatmentName,event:g,sessionID:crush.util.sessionID,AAID:crush.util.analyticsVisitorID,TLID:crush.util.teaLeafID,windowHeight:$(window).height(),windowWidth:$(window).width()},a,d))},crush.captureExperimentData.captureSessions=function(){crush.util.sessionID=$("meta[name=SessionID]").attr("content"),crush.util.analyticsVisitorID="",crush.util.teaLeafID=crush.cookies.getCookie("TLTSID"),$(window.adobeAnalytics).length&&window.adobeAnalytics.analyticsVisitorID&&(crush.util.analyticsVisitorID=window.adobeAnalytics.analyticsVisitorID)},crush.captureExperimentData.getIeVersion=function(a){var b,c,d,e,f=-1;return b=a.indexOf("MSIE "),c=a.indexOf("Trident/"),d=a.indexOf("Edge/"),b>0?f=parseInt(a.substring(b+5,a.indexOf(".",b)),10):c>0?(e=a.indexOf("rv:"),f=parseInt(a.substring(e+3,a.indexOf(".",e)),10)):d>0&&(f=parseInt(a.substring(d+5,a.indexOf(".",d)),10)),f}}(),function(){"use strict";window.crush=window.crush||{},crush.cookies={},crush.cookies.setCookie=function(a,b,c){var d,e,f,g=new Date;return g.setTime(g.getTime()+24*b*60*60*1e3),d="expires="+g.toGMTString(),e=a+"="+c+"; domain=.vanguard.com; path=/; "+d+";",crush.mockCookie?f=e:(document.cookie=e,f=e),f},crush.cookies.getCookie=function(a){var b,c,d=a+"=",e=[],f=0,g="";for(e=crush.mockCookie?crush.mockCookie.split(";"):document.cookie.split(";"),f=e.length,c=0;c<f;c++)for(b=e[c];" "===b.charAt(0);)b=b.substring(1),0===b.indexOf(d)&&(g=b.substring(d.length,b.length));return g},crush.cookies.setSessionCookie=function(a,b){var c,d;return c=a+"="+b+"; domain=.vanguard.com; path=/; ",crush.mockCookie?d=c:(document.cookie=c,d=c),d},crush.cookies.hasCookie=function(a){var b,c,d=a+"=",e=[],f=0;for(e=crush.mockCookie?crush.mockCookie.split(";"):document.cookie.split(";"),f=e.length,c=0;c<f;c++)for(b=e[c];" "===b.charAt(0);)if(b=b.substring(1),0===b.indexOf(d))return!0;return!1}}(),function(){"use strict";window.crush=window.crush||{},crush.createHiddenIFrame={},crush.createHiddenIFrame.iFramePromiseCounter=0,crush.createHiddenIFrame.createPromiseIFrame=function(a,b){var c,d=$("#main"),e=$(document.createElement("iFrame")),f=new $.Deferred;return e.attr("src",a),e.attr("id","iFramePromise"+crush.createHiddenIFrame.iFramePromiseCounter),e.attr("style","display:none;"),c=setTimeout(function(){f.resolve(!1)},4e3),e.load(function(){clearTimeout(c),b(e[0],f)}),crush.createHiddenIFrame.iFramePromiseCounter++,d.append(e),f.promise()},crush.createHiddenIFrame.iFrameCounter=0,crush.createHiddenIFrame.createIFrame=function(a,b){var c=$("#main"),d=$(document.createElement("iFrame"));d.attr("src",a),d.attr("id","iFrame"+crush.iFrameCounter),d.attr("style","display:none;"),d.load(function(){b(d[0])}),crush.createHiddenIFrame.iFrameCounter++,c.append(d)}}(),function(){"use strict";window.crush=window.crush||{},crush.createSurveyBanner={},crush.createSurveyBanner.Survey={createThankYouBanner:function(){var a=$(document.createElement("div"));return a.addClass("thankYouTitle"),a.append("Thank you for your help!"),a},optionSelected:function(){var a,b=event.currentTarget.outerText,c=$(document.getElementsByClassName("surveyWrapper")),d=$(document.getElementsByClassName("surveyBanner"));d.hide(),a=this.createThankYouBanner(),c.append(a),crush.captureExperimentData.sendCommonData(this.capability,b+" clicked"),crush.captureExperimentData.sendCommonData(this.capability,"SurveyTaken")},createRadioButtons:function(a){var b,c=$(document.createElement("div")),d=this,e=function(){d.optionSelected()};return c.addClass("surveyOptionsWrapper"),$.each(a,function(a,d){b=$('<span class="statusRadio"><input class="surveyRadioBtn" type="radio" name="crushAnswer"></span>'),b.attr("value",a),b.append(d.description),b.on("click",e),c.append(b),c.append("<br/>")}),c},main:function(a){var b,c=a.pageLocation,d=$(document.createElement("div")),e=$(document.createElement("div")),f=$(document.createElement("div"));d.addClass("surveyWrapper"),e.addClass("surveyBanner"),f.addClass("surveyTitle"),f.append("What best describes the reason for your visit?"),b=this.createRadioButtons(a.questions),d.append(e),e.append(f),e.append(b),c.after(d)},init:function(a){this.capability=a.capability,this.main(a)}},crush.createSurveyBanner.createSurveyBanner=function(){var a=Object.create(crush.createSurveyBanner.Survey);return a}}(),function(){"use strict";window.crush=window.crush||{},crush.experimentBanner={},crush.experimentBanner.toggleBanner=function(a,b){a.hasClass("experimentBanner")?a.text("[+]"):a.text("[+] As part of a Vanguard initiative, there are intentional changes on this page: "+b),a.toggleClass("experimentBanner")},crush.experimentBanner.experimentBanner=function(a,b){var c=$(document.createElement("span"));c.addClass("experimentBannerStyle"),crush.experimentBanner.toggleBanner(c,a),b.append(c),c.on("click",function(){crush.experimentBanner.toggleBanner($(this),a)})}}(),function(){"use strict";window.crush=window.crush||{},crush.forcePilot={},crush.forcePilot.getForcedPilot=function(a,b){var c,d,e,f,g=a.split("?")[1],h=0,i=[],j=0;if(g)for(i=g.split("&"),j=i.length,h=0;h<j;h++)if(d=i[h].split("="),e=d[0].toLowerCase(),f=d[1],e===b){c=f;break}return c}}(),function(){"use strict";window.crush=window.crush||{},crush.util={},crush.util.getDomain=function(a){var b=a.toLowerCase(),c=b.match(/\/\/localhost/),d=b.match(/\/\/t/),e=b.match(/\/\/dev/),f=b.match(/\/\/int/),g=b.match(/\/\/cat/),h=b.match(/\/\/sat/),i=b.match(/\/\/perf/),j=b.match(/iplans/),k="https://api.vanguard.com/rs/cf",l="https://static-origin.vgcontent.info/web/cf",m="production",n=!0;return crush.isInternal=j,j&&(k="http://apii.vanguard.com/rs/cf",n=!1),(c||d||e||f||g||h||i)&&(n=!1,k=j?"http://satapii.vanguard.com:1080/rs/cf":"https://satapi.vanguard.com:1443/rs/cf",l="https://satstatic-origin.vgcontent.info:1443/web/cf",m="development"),crush.development&&(void 0!==crush.development.serviceDomain&&(k=crush.development.serviceDomain),void 0!==crush.development.uiDomain&&(l=crush.development.uiDomain),void 0!==crush.development.space&&(m=crush.development.space),void 0!==crush.development.isExternalProd&&(n=crush.development.isExternalProd)),{serviceDomain:k,uiDomain:l,space:m,isProd:n}},crush.util.identifier=null,crush.util.getIdentifier=function(){var a,b,c,d,e=$('meta[name="DCSext.pageid"]');return crush.util.identifier||(e.length<1?(a=document.title,a=a.split("-"),a=a[a.length-1],crush.util.identifier=a.trim().replace(/ /g,"_").toLowerCase()):crush.util.identifier=e.attr("content").toLowerCase()),"terminationsreview"===crush.util.identifier&&(b=$(document.getElementById("comp-terminationsConfirm:heading")),c=b&&b.find(".option2"),d=c&&c.text(),"Transaction confirmation"===d&&(crush.util.identifier="terminationsconfirm")),crush.util.identifier},crush.util.loadFile=function(a,b){var c,d,e,f=new Date,g=0;for(g=0;g<b.length;g++)e=b[g],c=document.createElement("script"),c.setAttribute("type","text/javascript"),d="src","css"===e.type&&(c=document.createElement("link"),c.setAttribute("rel","stylesheet"),c.setAttribute("type","text/css"),d="href"),c.setAttribute(d,e.path+"?"+f.yyyymmdd()+"|"+f.hhmmss()),a.appendChild(c)},crush.util.Experiment={setName:function(a){this.name=a},getName:function(){return this.name},sendCommonData:function(a,b,c){crush.captureExperimentData.sendCommonData(this.capability,a,b,c)},main:function(){this.sendCommonData(this.capability.capabilityTreatmentName+" was shown")},init:function(){var a=crush.util.getIdentifier(),b=crush.pageMap[a],c=crush.capabilityList[b],d=c&&c[this.name],e=d&&d.capability;d&&e&&(this.capability=e,this.sendCommonData("Eligible for "+this.capability.capabilityTreatmentName),this.main())}},crush.util.createNewExperiment=function(a){var b=Object.create(crush.util.Experiment);return b.setName(a),b}}(),function(){"use strict";window.crush=window.crush||{},crush.pageMap={securehomemain:"shome",searchjsp:"search",loansandwithdrawalsjsp:"loanswithdrawals",hardshipreasonsjsp:"hardshipreasons",termlandingpage:"termlandingpage",transactionhistory:"transactionhistory"},crush.pages={securehomemain:!0,searchjsp:!0,loansandwithdrawalsjsp:!0,hardshipreasonsjsp:!0,termlandingpage:!0,transactionhistory:!0},Date.prototype.yyyymmdd=function(){var a=this.getMonth()+1,b=this.getDate();return[this.getFullYear(),!a[1]&&"0",a,!b[1]&&"0",b].join("")},Date.prototype.hhmmss=function(){var a=("0"+this.getHours()).slice(-2),b=("0"+this.getMinutes()).slice(-2),c=("0"+this.getSeconds()).slice(-2);return a+b+c},crush.loadExperiments=function(a,b,c){var d,e,f,g,h,i=document.getElementsByTagName("head")[0],j=b.uiDomain+"/digital-containment-experiments-"+b.space+"-current/";for(crush.development&&crush.development.uiDomain&&(j=crush.development.uiDomain),crush.util.loadFile(i,[{type:"css",path:j+"css/digital-containment.css"}]),crush.capabilityList.saveDataFromGet(a),d=crush.capabilityList.capabilities,e=d.length,h=0;h<e;h++)f=d[h],f.capabilityPlacement.page===crush.pageMap[crush.util.getIdentifier()]&&("control"!==f.capabilityTreatmentName?(crush.util.loadFile(i,[{type:"css",path:j+"css/"+c+"/"+f.capabilityTreatmentName+".css"},{type:"js",path:j+"js/"+c+"/"+f.capabilityTreatmentName+".min.js"}]),b.isProd||(g=$("body"),crush.experimentBanner.experimentBanner(f.capabilityDescription,g))):crush.util.loadFile(i,[{type:"js",path:j+"js/"+c+"/"+f.capabilityTreatmentName+".min.js"}]))},crush.loadForcePilot=function(a,b,c){var d=0,e=a.length,f=[];for(d=0;d<e;d++)f.push({placement:{page:crush.pageMap[c]},treatmentName:a[d]});crush.loadExperiments(f,b,c)},crush.main=function(){var a,b,c=crush.util.getIdentifier(),d=crush.pages[c],e=window.location.href,f=crush.util.getDomain(e),g=window.navigator.userAgent,h=crush.forcePilot.getForcedPilot(e,"crush"),i=crush.captureExperimentData.getIeVersion(g),j=i===-1||i>=10,k=f.serviceDomain+"/capability-management-webservice-"+f.space+"-current/users/X-REP-CLIENT-POID/selected-capabilities?contextPageId="+crush.pageMap[c];d&&(void 0!==h?crush.loadForcePilot(h.split(","),f,c):9===i?(a=new window.XMLHttpRequest,a.onreadystatechange=function(d){4===a.readyState&&200===a.status&&(crush.token=crush.cookies.getCookie("XSRF-TOKEN"),b=JSON.parse(d.target.responseText),crush.loadExperiments(b,f,c))},a.open("GET",k,!0),a.setRequestHeader("Accept","application/json"),a.withCredentials=!0,a.send()):j&&$.ajax({url:k,headers:{Accept:"application/json"},type:"GET",xhrFields:{withCredentials:!0},crossDomain:!0}).done(function(a){crush.token=crush.cookies.getCookie("XSRF-TOKEN"),crush.loadExperiments(a,f,c)}))},crush.shouldCheckForExperiments=function(a){var b=crush.captureExperimentData.getIeVersion(a),c=a.indexOf("compatible");return b===-1||b>=9&&c===-1},crush.loadMain=function(a){window.crush&&window.crush.cookies&&window.crush.createHiddenIFrame&&window.crush.experimentBanner&&window.crush.forcePilot&&window.crush.capabilityList&&window.crush.captureExperimentData&&window.crush.util?a():setTimeout(function(){crush.loadMain(a)},50)},crush.init=function(){crush.jquery=typeof $,"undefined"===crush.jquery&&crush.util.loadFile(document.getElementsByTagName("head")[0],[{type:"js",path:"https://static.vgcontent.info/web/common/jquery/1.7.2/jquery.min.js"}]),crush.shouldCheckForExperiments(window.navigator.userAgent)&&(window.addEventListener?window.addEventListener("load",crush.main,!1):window.attachEvent?window.attachEvent("onload",crush.main):window.onload=crush.main)},crush.loadMain(crush.init)}();
//# sourceMappingURL=digital-containment.min.js.map