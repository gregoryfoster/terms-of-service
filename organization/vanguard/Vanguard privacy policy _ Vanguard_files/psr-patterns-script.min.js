
(function(angular){'use strict';var module=angular.module('patterns.base',['ngSanitize']),keypressDirectives,i,onDirectives;module.config(['$compileProvider',function($compileProvider){$compileProvider.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|tel|javascript):|#|^\//);}]);keypressDirectives=[["Escape",27],["Tab",9],["Enter",13]];onDirectives=function(directiveName,key){var onDirectiveName='on'+directiveName;module.directive(onDirectiveName,['$parse',function($parse){return{link:function(scope,element,attributes){var fn=$parse(attributes[onDirectiveName]);element.bind('keydown',function(event){if(event.which===key){scope.$apply(function(){fn(scope,{$event:event});});}});}};}]);};for(i=0;i<keypressDirectives.length;i=i+1){onDirectives(keypressDirectives[i][0],keypressDirectives[i][1]);}
module.directive('keyboardActionable',function(){return{link:function(scope,element,attributes){element.attr('href','javascript:void(0)');}};});module.directive('focusWhen',['eventStack',function(eventStack){return{link:function(scope,element,attributes){scope.$on(attributes.focusWhen,function(){eventStack.addEventToStack(function(){element.focus();});});}};}]);module.factory('ariaState',[function(){return{layerIsOpen:false};}]);module.directive('ariaSupport',['ariaState',function(ariaState){return{restrict:'A',scope:{},link:function($scope,$element){$scope.data=ariaState;$element.attr('aria-hidden',$scope.data.layerIsOpen);$scope.$watch('data.layerIsOpen',function(newVal,oldVal){$element.attr('aria-hidden',newVal);});}};}]);module.service('eventStack',['$timeout',function($timeout){this.addEventToStack=function(f){$timeout(function(){f();},0);};}]);module.directive('hashNavigation',['$document',function($document){var sendFocus=function(event,id){event.preventDefault();event.stopPropagation();var target=$document[0].getElementById(id);if(target!==null&&typeof target!=='undefined'){target.focus();target.scrollIntoView();}};return{link:function(scope,element,attributes){var hashVal=attributes.href?attributes.href.substring(1):attributes.id;element.bind('click',function(event){sendFocus(event,hashVal);});element.bind('keydown',function(event){if(event.which===13){sendFocus(event,hashVal);}});}};}]);module.factory('navigator',['$window',function($window){return $window.navigator;}]);angular.module('patterns.organisms',['patterns.base','ngSanitize']);angular.module('patterns.organisms.run',['patterns.organisms','patterns.base']);}(angular));(function(angular){'use strict';angular.module('patterns.organisms').directive('autoFocus',['$document',function($document){return{scope:true,restrict:'A',link:function(scope,element,attributes){function onUserActivity(evt){var keyCode=evt.keyCode,isValidKey=(keyCode>47&&keyCode<58)||(keyCode>64&&keyCode<91)||(keyCode>95&&keyCode<112)||(keyCode===16);if(isValidKey&&$document[0].activeElement.tagName!=='INPUT'){element.focus();}}
if(attributes.autoFocus==='true'){element.focus();}else if(attributes.autoFocus==='userTextEntry'){$document.one('keydown',onUserActivity);}}};}]);}(angular));(function(angular){'use strict';var module=angular.module('patterns.organisms');module.factory('browserDetection',['navigator',function(navigator){var isIOSPlatform,isIOSUserAgent;isIOSPlatform=function(navigator){return/iPhone|iPad|iPod/.test(navigator.platform);};isIOSUserAgent=function(navigator){return/OS[1-5]_[0-9_]*like Mac OS X/i.test(navigator.userAgent)&&navigator.userAgent.indexOf("AppleWebKit")>-1;};return{isIOS:function(){return(isIOSPlatform(navigator)&&isIOSUserAgent(navigator));}};}]);}(angular));(function(angular){'use strict';var module=angular.module('patterns.organisms');module.factory('containsElement',[function(){function containsElement(container,ele){var parent=ele,contains=false,attempts=0,maxAttempts=50;while(parent&&attempts<maxAttempts){if(parent[0]===angular.element('body')[0]){parent=false;}else if(parent[0]===container[0]){contains=true;parent=false;}else{parent=parent.parent();}
attempts++;}
return contains;};return containsElement;}]);}(angular));(function(angular){'use strict';angular.module('patterns.organisms').service('keycodes',function(){var keycodes={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40};return keycodes;});}(angular));(function(angular){'use strict';angular.module('patterns.organisms').directive('keyboardListener',[function(){return{scope:false,restrict:'A',link:function(scope,element,attributes){var params=attributes.keyboardListener.split(','),keyCodes=params[0].split(';'),events=params[1]?params[1].split(';'):[];element.keyup(onUserActivity);function onUserActivity(evt){var keyCode=evt.keyCode,isValidKey=keyCodes.indexOf(keyCode.toString())>-1,numEvents=events.length,i=0;if(isValidKey){for(i;i<numEvents;i++){element.trigger(events[i]);}}}}};}]);}(angular));(function(angular){'use strict';var module=angular.module('patterns.organisms'),runModule=angular.module('patterns.organisms.run');module.service('mediaQueryDetection',['$document',function($document){var mqNode=angular.element('<div id="mqNode"></div>'),isMqSupportedCache=null;this.isMediaQuerySupported=function(){var mqDomNode=angular.element(mqNode);if(!isMqSupportedCache){angular.element($document[0].body).append(mqNode);isMqSupportedCache=mqDomNode.css('cursor')==='default';mqNode.remove();}
return isMqSupportedCache;};}]);runModule.run(['mediaQueryDetection',function(mediaQueryDetection){mediaQueryDetection.isMediaQuerySupported();}]);}(angular));(function(angular){'use strict';angular.module('patterns.organisms').service('passmarkFingerprintProxy',['$window','$document',function($window,$document){this.postFingerprint=function(){if(typeof $window.encode_deviceprint!=='undefined'){post_fingerprints_multipleForms();}};function post_fingerprints_multipleForms(){var i=0,size=0;if($document[0].forms){size=$document[0].forms.length;for(i;i<size;i++){if($document[0].forms[i]&&$document[0].forms[i].pm_fp){$document[0].forms[i].pm_fp.value=$window.encode_deviceprint();}}}};}]);}(angular));(function(angular){'use strict';var module;module=angular.module('patterns.organisms');module.factory('viewport',['$document',function($document){var lock=false,listeners=[];return{getWidth:function(){return $document[0].documentElement.clientWidth;},getHeight:function(){return $document[0].documentElement.clientHeight;},lock:function(l){var i;if(lock!==l){lock=l;for(i=0;i<listeners.length;i=i+1){listeners[i](l);}}},isLocked:function(){return lock;},listen:function(f){listeners.push(f);}};}]);module.directive('viewport',['viewport',function(viewport){return{link:function(scope,element,attributes){var initialValue=element.attr('content'),lockedValue=initialValue+',maximum-scale=1',unlockedValue=initialValue+',maximum-scale=10',updateValue=function(lock){element.attr('content',lock?lockedValue:unlockedValue);};viewport.listen(updateValue);updateValue(viewport.isLocked());}};}]);}(angular));(function(angular){'use strict';var module=angular.module('patterns.organisms');module.factory('measurements',[function(){return{getElementBounds:function(ele){var rect=ele.getBoundingClientRect(),result={};result.width=rect.width||rect.right-rect.left;result.height=rect.bottom-rect.top;result.x=result.left=rect.left;result.y=result.top=rect.top;result.right=rect.right;result.bottom=rect.bottom;return result;}};}]);}(angular));(function(angular){'use strict';angular.element(document).ready(function(){var $d=angular.element(document.getElementById('psApp')),modules=$d.attr('data-modules').split(',');angular.bootstrap($d,modules);});}(angular));(function(angular){'use strict';angular.element(document).ready(function(){if(top.location.href.match(/https?\:\/\/[a-zA-Z0-9]*\.vanguard\.com[\/:]/)==null){$(this.documentElement).remove();}});}(angular));(function(angular){'use strict';var module=angular.module('patterns.organisms');module.directive('facet',[function(){return{template:angular.element(document.getElementById('facet-template')).html(),transclude:true,scope:{},controller:function($scope,$element,$attrs,$transclude){$scope.facets=[];$scope.selectedIndex=-1;$transclude(function(clone){var items=angular.element(clone).children(),i;$scope.numberOfItems=items.length;for(i=0;i<items.length;i=i+1){if(items.eq(i).hasClass('selected')){$scope.selectedIndex=i;}
$scope.facets.push({label:items.eq(i).children().eq(0).text(),link:items.eq(i).children().eq(0).attr('href')});}});},link:function(scope,element,attributes){element.addClass('loaded');element.addClass(attributes.facet||'intensity4');scope.containerHidden=true;scope.toggleContainer=function($event){scope.containerHidden=!scope.containerHidden;};scope.closeContainer=function($event){scope.containerHidden=true;};scope.resetFocus=function($event){scope.$broadcast('resetFocus');};scope.arrowNavigation=function($event){var UP_ARROW=38,DOWN_ARROW=40,currentIndex=angular.element(document.activeElement).data('index'),totalItems=scope.numberOfItems,newIndex,offset=1;if($event.which===UP_ARROW||$event.which===DOWN_ARROW){if($event.which===UP_ARROW){offset=-1;}
newIndex=(currentIndex+(offset)+totalItems)%totalItems;scope.$broadcast('matchingIndex'+newIndex);$event.stopPropagation();$event.preventDefault();}};scope.focusFirstItem=function(){scope.$broadcast('matchingIndex0');};angular.element(element).on('click touchend',function(e){e.stopPropagation();});angular.element(document.body).on('click touchend',function(e){scope.$apply(function(){scope.containerHidden=true;});});}};}]);}(angular));(function(angular){'use strict';var module=angular.module('patterns.organisms');module.directive('appBanner',['$window','$sce','cookies',function($window,$sce,cookies){var bannerCookieName='hideAppBanner';return{template:angular.element(document.getElementById('app-banners-template')).html(),scope:{},restrict:'A',transclude:true,link:function(scope,element,attributes){var userAgent=$window.navigator.userAgent.toLowerCase(),render=function(){scope.imageSrc=attributes.imageSrc;scope.title=attributes.title;scope.subtext=$sce.trustAsHtml(attributes.subtext);scope.appLink=$sce.trustAsHtml(attributes.appLink);},isFirstViewOfBanner=function(){return typeof cookies.get(bannerCookieName)==='undefined';},isBannerTypeMatchingDevice=function(){return(attributes.appBanner==='android'&&userAgent.indexOf('android')>-1)||(attributes.appBanner==='kindle'&&(userAgent.indexOf('kindle')>-1||userAgent.indexOf('silk')>-1));},isShowBanner=function(){return isFirstViewOfBanner()&&isBannerTypeMatchingDevice();};scope.showBanner=false;scope.closeBanner=function(){var cookie={key:bannerCookieName,value:true};scope.showBanner=false;cookies.set(cookie);};if(isShowBanner()){scope.showBanner=true;render();}}};}]);}(angular));(function(angular){'use strict';var module=angular.module('patterns.organisms'),breadcrumbOnlyClass='breadcrumbOnly';function getNewHeightOfList(ul){return parseInt(ul.css('height'),10)+parseInt(ul.css('margin-bottom'),10);}
function removeBreadcrumbsFromTabIndex(breadcrumbAnchors){breadcrumbAnchors.attr('tabindex',-1);}
function addBreadcrumbsToTabIndex(breadcrumbAnchors){breadcrumbAnchors.removeAttr('tabindex');}
function updateBreadcrumbsWithSpecifiedHeight(ul,showBreadcrumbs,height){var breadcrumbLinks=ul.find('a');if(showBreadcrumbs){addBreadcrumbsToTabIndex(breadcrumbLinks);}else{removeBreadcrumbsFromTabIndex(breadcrumbLinks);}
ul.parent().height(height);}
function updateInterface(element,ul){var elementHeight=parseInt(element.css('min-height'),10),ulHeight=parseInt(ul.css('height'),10)+parseInt(ul.css('margin-bottom'),10);if(elementHeight>ulHeight){if(!element.hasClass(breadcrumbOnlyClass)){element.addClass(breadcrumbOnlyClass);updateBreadcrumbsWithSpecifiedHeight(ul,true,'auto');}}else{if(element.hasClass(breadcrumbOnlyClass)){element.removeClass(breadcrumbOnlyClass);updateBreadcrumbsWithSpecifiedHeight(ul,false,0);}}}
module.directive('contextBar',['$window',function($window){return{template:angular.element(document.getElementById('context-bar-template')).html(),transclude:true,scope:{},link:function(scope,element,attributes){var ul=angular.element(element).find('ul');element.addClass('loaded');updateInterface(angular.element(element),ul);scope.toggleBreadcrumb=function(){scope.showBreadcrumbs=!scope.showBreadcrumbs;if(scope.showBreadcrumbs){updateBreadcrumbsWithSpecifiedHeight(ul,scope.showBreadcrumbs,getNewHeightOfList(ul));}else{updateBreadcrumbsWithSpecifiedHeight(ul,scope.showBreadcrumbs,0);}};angular.element($window).bind('resize',function(){updateInterface(angular.element(element),ul);if(scope.showBreadcrumbs){updateBreadcrumbsWithSpecifiedHeight(ul,scope.showBreadcrumbs,getNewHeightOfList(ul));}});scope.$watch('showBreadcrumbs',function(newValue,oldValue){element.attr('aria-expanded',newValue);});scope.showBreadcrumbs=false;}};}]);}(angular));(function(angular){'use strict';var module=null,runModule=null,scrim=null;module=angular.module('patterns.organisms');module.factory('layerMediator',function(){var listenerMap={};return{listen:function(eventName,callback){if(!listenerMap[eventName]){listenerMap[eventName]=[];listenerMap[eventName].push(callback);}},ignore:function(eventName){if(listenerMap[eventName]){listenerMap[eventName]=undefined;}},send:function(eventName){var i=0,length;if(listenerMap[eventName]){length=listenerMap[eventName].length;for(i;i<length;i+=1){listenerMap[eventName][i]();}}}};});module.directive('layerLink',['layerMediator',function(layerMediator){return{restrict:'C',scope:{},controller:function($scope,$element,$attrs,$transclude){},link:function(scope,element,attributes){var layerLinkId=element.attr('id');layerMediator.listen('goToLayerLink#'+layerLinkId,function(){element.focus();});element.on('click',function(event){var layerId=element.attr('href').replace('#',''),eventName='goToLayer'+layerId;event.preventDefault();layerMediator.send(eventName);});}};}]);module.directive('layer',['layerMediator','$window','$document','viewport','ariaState','settings',function(layerMediator,$window,$document,viewport,ariaState,settings){return{scope:true,priority:1,controller:function($scope,$element,$attrs,$transclude){this.setHeader=function(h){$scope.layerHeader=h;};this.setContentArea=function(ca){$scope.layerContentArea=ca;};this.setCloseButton=function(cb){$scope.layerCloseButton=cb;};this.getLayerOpenEventName=function(layerId){return'goToLayer'+layerId;};},link:function(scope,element,attributesm,controller){var windowWidth=viewport.getWidth(),maxContentAreaWidth=1004,contentAreaWidth=Math.min(maxContentAreaWidth,windowWidth),layerIdealWidth=0,spacingValueWidth=0,firstBreakpointSize=480,secondBreakpointSize=700,secondBreakpointLayerWidthRatio=0.656666,lastBreakpointLayerWidthRatio=0.66,layerId=element.attr('id'),lastScrollPosition=0,noScrollClass='noScroll';scope.sizeLayer=function(){var totalHeight=0,totalLayerHeight=0,windowHeight=viewport.getHeight(),windowWidth=viewport.getWidth(),maxContentAreaWidth=1004,contentAreaWidth=Math.min(maxContentAreaWidth,windowWidth),headerHeight=0,layerIdealWidth=0,layersTopValue=0,layerContentsTopValue=0,layersDisplayedHeight=0,spacingValueWidth=0,firstBreakpointSize=480,secondBreakpointSize=700,secondBreakpointLayerWidthRatio=0.656666,lastBreakpointLayerWidthRatio=0.66,calculatedLayerHeight=0,layerBorderSize=6,isRwdEnabled=settings.get('isRwdEnabled')==='true';if(isRwdEnabled&&windowWidth<firstBreakpointSize){spacingValueWidth=0;}else if(isRwdEnabled&&windowWidth<secondBreakpointSize){layerIdealWidth=contentAreaWidth*secondBreakpointLayerWidthRatio;spacingValueWidth=(windowWidth-layerIdealWidth-layerBorderSize*2)/2;}else{layerIdealWidth=contentAreaWidth*lastBreakpointLayerWidthRatio;spacingValueWidth=(windowWidth-layerIdealWidth-layerBorderSize*2)/2;}
scope.positionStyles={'left':spacingValueWidth,'right':spacingValueWidth};scope.layerContentArea.children('div').each(function(){totalHeight+=angular.element(this).outerHeight(true);});headerHeight=scope.layerHeader.outerHeight(true);totalLayerHeight=totalHeight+headerHeight;if(isRwdEnabled&&(windowWidth<firstBreakpointSize||windowHeight<firstBreakpointSize||$document[0].documentElement.clientWidth/$window.innerWidth>1)){spacingValueWidth=0;calculatedLayerHeight=angular.element(element).height();layersDisplayedHeight=windowHeight-(layerBorderSize*2);if(calculatedLayerHeight>layersDisplayedHeight){layersDisplayedHeight=calculatedLayerHeight-(layerBorderSize*2);}
layersTopValue=0;scope.positionStyles={'left':spacingValueWidth,'right':spacingValueWidth,'top':layersTopValue,'bottom':layersTopValue};layerContentsTopValue=headerHeight+layerBorderSize;scope.layerContentArea.scope().positionStyles={'position':'fixed','left':'6px','top':layerContentsTopValue+'px','bottom':'6px','right':'6px'};}else if(isRwdEnabled&&windowWidth<secondBreakpointSize){layersDisplayedHeight=Math.min(totalLayerHeight,secondBreakpointLayerWidthRatio*windowHeight);layersTopValue=(windowHeight-layersDisplayedHeight)/2-(layerBorderSize*2);scope.positionStyles={'left':spacingValueWidth,'right':spacingValueWidth,'top':layersTopValue};scope.layerContentArea.scope().positionStyles={'height':layersDisplayedHeight-headerHeight};}else{layersDisplayedHeight=Math.min(totalLayerHeight,lastBreakpointLayerWidthRatio*windowHeight);layersTopValue=(windowHeight-layersDisplayedHeight)/2-(layerBorderSize*2);scope.positionStyles={'left':spacingValueWidth,'right':spacingValueWidth,'top':layersTopValue};scope.layerContentArea.scope().positionStyles={'height':layersDisplayedHeight-headerHeight};}
if(layersDisplayedHeight===totalLayerHeight){scope.layerContentArea.scope().positionStyles.overflow='hidden';}};scope.isLayerOpen=false;scope.tabNavigation=function($event){var TAB_KEY=9,ESC_KEY=27,isCloseButtonFocused=scope.layerCloseButton[0]===$document[0].activeElement,isLayerFocused=element[0]===$document[0].activeElement,closeLayersEventName='closeLayers';if($event.which===TAB_KEY&&!$event.shiftKey&&isCloseButtonFocused){$event.preventDefault();$event.stopPropagation();element[0].focus();}
if($event.which===TAB_KEY&&$event.shiftKey&&isLayerFocused){$event.preventDefault();$event.stopPropagation();scope.layerCloseButton[0].focus();}
if($event.which===ESC_KEY){layerMediator.send(closeLayersEventName);}};layerMediator.listen(controller.getLayerOpenEventName(layerId),function(){scope.$apply(function(){scope.openLayer();});scope.layerHeader.attr('tabindex',-1).focus();});function evaluateTouchMove(event){var height=scope.layerContentArea.height(),contentHeight=scope.layerContentArea.find('.layerContentContainer').height();if(contentHeight<height&&event.originalEvent.touches.length<2){event.preventDefault();}}
scope.openLayer=function(){$('#layers-section').addClass('break-A template');scope.isLayerOpen=true;ariaState.layerIsOpen=true;lastScrollPosition=angular.element($window).scrollTop();$('html, body').addClass(noScrollClass);scrim.removeClass('open');$('.layer').removeClass('open');element.addClass('open');scrim.addClass('open');layerMediator.listen('closeLayers',function(){if(scope.isLayerOpen){scope.closeLayer();}});scope.sizeLayer();element.on('touchmove',evaluateTouchMove);};angular.element($window).on('resize',function(){scope.$apply(function(){scope.sizeLayer();});});scope.closeLayer=function($event){$('#content-region').after($('#layers-section'));$('#layers-section').removeClass('break-A template');$('html, body').removeClass(noScrollClass);angular.element($window).scrollTop(lastScrollPosition);var layerLinkId=scope.layerCloseButton.attr('href'),eventName='goToLayerLink'+layerLinkId;if(typeof $event!=='undefined'){$event.preventDefault();$event.stopPropagation();}
scope.isLayerOpen=false;ariaState.layerIsOpen=false;element.removeClass('open');scrim.removeClass('open');layerMediator.send(eventName);element.off('touchmove',evaluateTouchMove);layerMediator.ignore('closeLayers');};function sizeLayersOnLoad(){$('html, body').addClass(noScrollClass);scope.sizeLayer();$('html, body').removeClass(noScrollClass);}
sizeLayersOnLoad();}};}]);module.directive('layerContent',['layerMediator',function(layerMediator){return{restrict:'A',require:'^layer',scope:true,link:function(scope,element,attributes,controller){controller.setContentArea(element);}};}]);module.directive('layerCloseButton',['layerMediator',function(layerMediator){return{restrict:'A',require:'^layer',link:function(scope,element,attributes,controller){element.attr('title','Close');element.html('Close');controller.setCloseButton(element);}};}]);module.directive('layerHeader',['layerMediator',function(layerMediator){return{restrict:'A',require:'^layer',scope:{},link:function(scope,element,attributes,controller){controller.setHeader(element);}};}]);module.directive('scrim',['layerMediator',function(layerMediator){return{restrict:'C',link:function(scope,element,attributes){scope.closeLayers=function(){var eventName='closeLayers';layerMediator.send(eventName);};function removeTouchMove(event){event.preventDefault();}
element.on('touchmove',removeTouchMove);}};}]);module.factory('scrim',['$document',function($document){return{createScrimOnDom:function(){scrim=angular.element('<div class="scrim" ng-click="closeLayers()"></div>');angular.element($document[0].body).append(scrim);}};}]);runModule=angular.module('patterns.organisms.run');runModule.run(['scrim',function(scrim){scrim.createScrimOnDom();}]);}(angular));(function(angular){'use strict';var module=angular.module('patterns.organisms');module.directive('costCalculator',['$window','settings',function($window,settings){return{template:angular.element(document.getElementById('costCalculatorTemplate')).html(),restrict:'A',scope:{},controller:function($scope,$element,$attrs){var versionNumber=settings.get('clientSideVersionNumber');$scope.data=JSON.parse($attrs.costCalculator);$scope.barChartImageSrc='/patterns/'+versionNumber+'/organism/cost-calculator/';function displayFullPageForPrint(data){var costChart=angular.element(document.getElementById('costChartLayer')),wrapper=angular.element(document.getElementById('main-wrapper')),costChartLayerOpen=costChart.hasClass('open');if(costChartLayerOpen){wrapper.addClass('forceInline');}else{wrapper.removeClass('forceInline');}};var boundCallback=angular.bind(this,displayFullPageForPrint);if($window['matchMedia']){$window.matchMedia('print').addListener(boundCallback);}else{angular.element($window).on('beforeprint afterprint',boundCallback);}}};}]);}(angular));(function(angular){'use strict';var module=angular.module('patterns.organisms');module.directive('accordion',function(){return{scope:true,restrict:'C',link:function(scope,element,attributes){element.attr('role','tablist');element.attr('aria-multiselectable','true');}};});module.directive('accordionPanel',['$window','$document',function($window,$document){return{scope:true,restrict:'C',controller:function($scope,$element,$attrs,$transclude){this.setExpandButton=function(eb){$scope.expandButton=eb;};this.setPanelHeader=function(ph){$scope.panelHeader=ph;};this.setPanelContent=function(pc){$scope.panelContent=pc;};this.toggleOpen=function(){$scope.panelOpened=!$scope.panelOpened;if($scope.panelOpened){$element.attr('aria-expanded',true);$scope.panelHeader.attr('aria-selected','true');$scope.panelContent.attr('aria-hidden','false');$scope.expandButton.attr('title','Show less');}else{$element.attr('aria-expanded',false);$scope.panelHeader.attr('aria-selected','false');$scope.panelContent.attr('aria-hidden','true');$scope.expandButton.attr('title','Show more');}};},link:function(scope,element,attributes){var accordionIndex=element.attr('data-accordion-panel-index');element.attr('role','tabpanel');element.attr('aria-expanded','false');scope.panelHeader.attr('aria-controls','accPanel'+accordionIndex);scope.panelContent.attr('aria-labeledby','accTab'+accordionIndex);scope.panelHeader.attr('aria-selected','false');scope.panelContent.attr('aria-hidden','true');scope.expandButton.attr('title','Show more');scope.panelOpened=false;}};}]);module.directive('panelHeader',function(){return{restrict:'C',require:'^accordionPanel',link:function(scope,element,attributes,controller){scope.panelController=controller;element.attr('role','tab');controller.setPanelHeader(element);element.children().removeAttr('href');scope.keyToggle=function($event){var ENTER_KEY=13;if(typeof $event!=='undefined'&&$event.which===ENTER_KEY){$event.preventDefault();$event.stopPropagation();controller.toggleOpen();}};scope.toggle=function(){controller.toggleOpen();element.children().eq(-1).focus();};}};});module.directive('panelContent',function(){return{restrict:'C',require:'^accordionPanel',scope:false,link:function(scope,element,attributes,controller){controller.setPanelContent(element);}};});module.directive('expandButton',function(){return{restrict:'C',require:'^accordionPanel',scope:{},link:function(scope,element,attributes,controller){controller.setExpandButton(element);scope.toggle=function(){controller.toggleOpen();};}};});}(angular));(function(angular){'use strict';var module=angular.module('patterns.organisms'),contactUsPublicUrl='/api/contact-us-proxy/contact-us-proxy/',contactUsPrivateUrl='/api/contact-us-proxy/contact-us-proxy/?logged-in',appointmentsUrl='/api/contact-us-proxy/contact-us-proxy/?appointments';module.directive('contactUs',['$window','settings',function($window,settings){return{scope:true,restrict:'A',template:angular.element(document.getElementById('contact-us-template')).html(),link:function(scope,element,attributes){scope.openContactUsLinkInPopupWindow=function(path,height,width){var linkDomain=settings.get('secureSiteAddress'),popupLink=linkDomain+path;document.domain='vanguard.com';$window.open(popupLink,'','height='+height+' , width='+width+' , scrollbars=1'+' , resizable=1');};}};}]);module.controller('ContactUsFeedController',['$scope','$location','$window','ContactUsFeedService','settings',function($scope,$location,$window,Feed,settings){$scope.isIOUserWithNoReps=false;$scope.isLoggedOn=settings.get('isLoggedOn')==='true';$scope.isNotLoggedOn=!$scope.isLoggedOn;$scope.didFeedReturnRepresentatives=function(){return $scope.loggedInContactRepresentativeList&&$scope.loggedInContactRepresentativeList!==undefined;};$scope.retrieveContactUsFeeds=function(){$scope.retrievedPrivateContactUs=false;$scope.retrievedContactUsData=false;Feed.parseFeed(contactUsPrivateUrl).then(function(res){$scope.getPrivateFeedInfo(res);});Feed.parseFeed(contactUsPublicUrl).then(function(res){$scope.getPublicFeedInfo(res);});Feed.parseFeed(appointmentsUrl).then(function(res){$scope.getAppointmentsFeedInfo(res);});};$scope.getPrivateFeedInfo=function(res){$scope.loggedInUserContactUsInfo=res.data;$scope.loggedInContactRepresentativeList=$scope.loggedInUserContactUsInfo.ContactRepresentativeList;$scope.loggedInContactServiceList=$scope.loggedInUserContactUsInfo.ContactServiceList;$scope.loggedInContactMailList=$scope.loggedInUserContactUsInfo.ContactMailList;$scope.isIODirectUser=$scope.loggedInUserContactUsInfo.IIODirectUser;if($scope.loggedInContactServiceList){$scope.retrievedPrivateContactUs=true;$scope.retrievedContactUsData=true;}
$scope.retrievedContactRepresentativeList=$scope.didFeedReturnRepresentatives();$scope.isIOUserWithNoReps=!$scope.retrievedContactRepresentativeList&&$scope.isIODirectUser;$scope.canShowOnlineSection=!$scope.isIOUserWithNoReps;};$scope.getPublicFeedInfo=function(res){$scope.contactUsFeeds=res.data;$scope.contactServiceList=$scope.contactUsFeeds.ContactServiceList;$scope.contactMailList=$scope.contactUsFeeds.ContactMailList;if($scope.contactServiceList){$scope.retrievedContactUsData=true;}
if(!$scope.retrievedPrivateContactUs){$scope.canShowOnlineSection=true;}};$scope.getAppointmentsFeedInfo=function(res){$scope.appointmentsFeed=res.data;};$scope.retrieveServiceDescription=function(contact){if(contact.ServiceDescription){return contact.ServiceDescription;}else if($scope.loggedInUserContactUsInfo.SegmentCode==='VS'){return'Contact Voyager Select Services to help with your financial needs and questions.';}else{return null;}};$scope.retrieveRepInfo=function(contact){if(contact.RepresentativeType==='RMA_ADVISOR'){return'Contact your advisor to discuss your investment plan.';}else if(contact.RepresentativeType==='FLAGSHIP_REP'){return'Contact your Flagship representative to help with your financial needs and questions.';}else{return null;}};$scope.retrieveContactUsFeeds();}]);module.factory('ContactUsFeedService',['$http',function($http){var feedPromiseViaUrl=function(url){return $http.get(url).success(function(data){return data.data;});};return{parseFeed:function(url){return feedPromiseViaUrl(url);}};}]);}(angular));(function(angular){'use strict';angular.module('patterns.organisms').directive('filteredDropdown',['$compile','$document','$timeout','containsElement','keycodes',function($compile,$document,$timeout,containsElement,keycodes){return{scope:true,restrict:'A',controller:function($scope){var data={active:false,floatListEnabled:false,inputValue:'',apiRequestFulfilled:false};$scope.data=data;},link:function($scope,$element,$attrs){var id=$attrs.filteredDropdown,data=$scope.formData[id]=$scope.data,dropdownAdded=false;$scope.closeAll=function(evt){$scope.data.active=false;$scope.data.floatListEnabled=false;$scope.data.inputValue='';$document[0].removeEventListener('click',evaluateDocumentClick)
if(evt){evt.preventDefault();}
try{$scope.$digest();}catch(e){}};$element[0].addEventListener('click',function(evt){var ele=angular.element(evt.target),contains=containsElement($element,ele);if(contains){evt.stopPropagation();}});$element.on('keyup',onInputKeypress);$scope.openDropdown=function($evt){var className=$evt?$evt.target.className:'';if($scope.data.floatListEnabled!==true){$scope.data.floatListEnabled=true;resetFloatListContent();$document[0].addEventListener('click',evaluateDocumentClick,true);}else if(className.indexOf('dropdownToggle')>-1){$scope.closeAll();}};function evaluateDocumentClick(evt){var target=evt.target;if(containsElement($element,angular.element(target))===false){$scope.closeAll();}}
function resetFloatListContent(){$scope.data.floatListContent=angular.copy($scope.data.unfilteredDropdownContent);}
function onInputKeypress(evt){var keycode=evt?evt.keyCode:null,arr=angular.copy($scope.data.unfilteredDropdownContent)||[],i=0,t=arr.length,item,filteredArr=[],key=$scope.data.inputValue.toLowerCase(),keyLength=key.length;if(keycode===keycodes.ESC){if(evt.target.className.indexOf('filterInput')>-1&&$scope.data.inputValue!==''){$scope.data.inputValue='';resetFloatListContent();$scope.$digest();}else{$scope.closeAll();}
return;}else if(keycode===keycodes.ENTER){$scope.openDropdown();$scope.data.floatListEnabled=true;$scope.$digest();}else{for(i;i<t;i++){item=arr[i];if(item.plainTextLabel){if(item.plainTextLabel.substring(0,keyLength).toLowerCase()===key){filteredArr.push(item);}}else{filteredArr.push(item);}}
if(filteredArr.length===0){filteredArr.push({markup:'<span>No results found</span>',additionalFloatListEntryClasses:'noResults'})}}
$scope.data.floatListContent=filteredArr;$scope.$apply();};}};}]);}(angular));(function(angular){'use strict';var module=angular.module('patterns.organisms');module.directive('engineeredSearchResults',[function(){return{scope:true,restrict:'A',template:angular.element(document.getElementById('engineered-search-results-template')).html()};}]);module.controller('EngineeredSearchResultsController',['$scope','settings','EngineeredSearchResultsService',function($scope,settings,Feed){var searchResultsUrlFirstHalf=settings.get('searchRESTAddress')+'/search/engineeredOnly.jsonp?q=',searchResultsUrlSecondHalf='&offset=0&count=3&callback=JSON_CALLBACK';$scope.currentSearchParam="";$scope.getSearchResults=function(searchParam){var searchTerm='';$scope.currentSearchParam=searchParam;$scope.engineeredResults=[];if(searchParam!==''){searchTerm=searchResultsUrlFirstHalf+searchParam+searchResultsUrlSecondHalf;Feed.parseFeed(searchTerm).then(function(res){$scope.checkIfResultsEmpty(res);});}};$scope.checkIfResultsEmpty=function(res){var uriData,linkName='searchedEngineeredTerms',numberOfResults=res.data.results.length,eventName='searchedOnAccountGuide';$scope.engineeredResults=res.data.results;$scope.areResultsEmpty=!res.data.results||res.data.results.length===0;uriData='?search_query%3D'+$scope.currentSearchParam+'&search_source%3DCustomerService&search_count%3D'+numberOfResults;};$scope.searchForAnswers=function(){$scope.getSearchResults($scope.engineeredSearchTerm);};$scope.engineeredResults=[];$scope.engineeredSearchTerm='';$scope.areResultsEmpty=false;}]);module.factory('EngineeredSearchResultsService',['$http',function($http){var feedPromiseViaUrl=function(url){return $http.jsonp(url).success(function(data){return data.data;});};return{parseFeed:function(url){return feedPromiseViaUrl(url);}};}]);}(angular));(function(angular,Error,parseInt,isNaN){'use strict';var module=angular.module('patterns.organisms');module.directive('surveyButton',['$window',function($window){return{restrict:'A',scope:true,link:function(scope,element,attributes){scope.openSurveyWindow=function($event){$event.preventDefault();$event.stopPropagation();var url=attributes.href,options='width= 1024, height= 768, left=25, top=25, resizable=no, toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, copyhistory=no';$window.open(url,'surveyWindow',options).blur();$window.focus();};}};}]);module.directive('surveyPrompt',['layerMediator','cookies','$timeout',function(layerMediator,cookies,$timeout){return{restrict:'A',require:'^layer',scope:true,link:function(scope,element,attributes,ctrl){var layerController=ctrl,convertDaysToSeconds=function(days){return days*60*60*24;},getMaxAge=function(days){var parsedDays=parseInt(days);if(isNaN(parsedDays)){throw new Error('Survey Quiet Period Attribute must be a number.');}
return convertDaysToSeconds(days);},surveyPromptLayerOpenEvent=layerController.getLayerOpenEventName(attributes.id),maxAge=getMaxAge(attributes.surveyQuietPeriod);scope.setDoNotPromptCookie=function(){var cookieObj={'key':'ps_survey','value':'1','maxAge':maxAge};cookies.set(cookieObj);};layerMediator.listen(surveyPromptLayerOpenEvent,scope.setDoNotPromptCookie);$timeout(function(){layerMediator.send(surveyPromptLayerOpenEvent);});}};}]);}(angular,Error,parseInt,isNaN));(function(angular){'use strict';var module=angular.module('patterns.organisms');module.directive('tabsetBar',['$timeout','mediaQueryDetection',function($timeout,mediaQueryDetection){return{scope:true,restrict:'A',controller:function($scope,$element,$attrs,$transclude){$scope.tabsetList=null;this.addTabsetList=function(tabsetList){$scope.tabsetList=tabsetList;};},link:function(scope,element,attributes){var tabList=scope.tabsetList,tab=null,i=0,tabsetLeftPadding=0,extraSpaceAvailable=0,isLeftButtonNeeded=function(){var widthOfTabsetHiddenOnLeft=scope.tabsetLeftMargin*-1;return widthOfTabsetHiddenOnLeft>0;},isRightButtonNeeded=function(){var widthOfTabsetHiddenOnLeft=scope.tabsetLeftMargin*-1,widthOfTabsetToLeftOfRightBounds=widthOfTabsetHiddenOnLeft+scope.tabsetWidth-tabsetLeftPadding;return widthOfTabsetToLeftOfRightBounds<scope.allTabsWidth;},LEFT_BUTTON_STEP=40,RIGHT_BUTTON_STEP=-40,widthOfTabsetButtons=48,indexOfSelectedTab=-1,indexOfCenteredTab=-1,arrayOfTabObjects=tabList.children(),numberOfTabs=arrayOfTabObjects.length,getIndexOfSelectedTab=function(){tab=null;for(i=0;i<numberOfTabs;i+=1){tab=arrayOfTabObjects.eq(i);if(tab.hasClass('selected')){return i;}}},getFullWidthOfTabWithIndex=function(tabIndex){return scope.tabsetList.children().eq(tabIndex).scope().getTabWidth();},handleTimeoutsForNavigationClicks=function(){$timeout.cancel(scope.navigatingTabs);scope.navigatingTabs=$timeout(function(){scope.centerTabsetAroundTabWithIndex(indexOfSelectedTab-indexOfCenteredTab);},2500);},handleWindowResizeEvent=function(){if(element.width()!==0){scope.tabsetWidth=element.width()-widthOfTabsetButtons;}
if(scope.tabsetList.width()!==0){scope.allTabsWidth=scope.tabsetList.width();}
extraSpaceAvailable=scope.tabsetWidth-scope.allTabsWidth;scope.isTabCompressed=extraSpaceAvailable<tabsetLeftPadding;scope.centerTabsetAroundTabWithIndex(indexOfSelectedTab-indexOfCenteredTab);scope.minLeftMargin=extraSpaceAvailable;scope.maxLeftMargin=0;scope.setMinWidthForContainer();},swipeSpeedDivisor=8;element.on('touchstart',function(event){scope.startSwipeX=event.originalEvent.touches[0].pageX;});element.on('touchmove',function(event){event.preventDefault();scope.swipeDeltaA=event.originalEvent.touches[0].pageX-scope.startSwipeX;scope.tabsetLeftMargin=scope.tabsetLeftMargin+(scope.swipeDeltaA/swipeSpeedDivisor);scope.checkTabsetScrollingBoundsAndSetMargin();});element.on('touchend',function(event){scope.$apply(function(){scope.resetButtons();});});scope.initializeTabsetBar=function(){scope.leftButtonNeeded=false;scope.rightButtonNeeded=false;scope.widthOfAreaToLeftOfTabToBeCentered=0;scope.widthOfAreaToRightOfTabToBeCentered=0;scope.tabsetLeftMargin=null;if(element.width()!==0){scope.tabsetWidth=element.width();}
if(scope.tabsetList.width()!==0){scope.allTabsWidth=scope.tabsetList.width();}
extraSpaceAvailable=scope.tabsetWidth-scope.allTabsWidth;scope.isTabCompressed=extraSpaceAvailable<tabsetLeftPadding;indexOfSelectedTab=getIndexOfSelectedTab();indexOfCenteredTab=indexOfSelectedTab;scope.centerTabsetAroundTabWithIndex(0);scope.resetButtons();if(scope.mqEnabled){handleWindowResizeEvent();}};scope.setMinWidthForContainer=function(){var widthOfNavButton=24;scope.minWidthForContainer=0;for(i=0;i<scope.tabsetList.children().length;i+=1){scope.minWidthForContainer+=scope.tabsetList.children().eq(i).width();}
scope.minWidthForContainer+=widthOfNavButton;element.children().eq(0).css({'min-width':scope.minWidthForContainer+'px'});};scope.resetButtons=function(){scope.leftButtonNeeded=isLeftButtonNeeded();scope.rightButtonNeeded=isRightButtonNeeded();};scope.$on('watchWindowResize::resize',function(event,data){if(scope.windowWidth!==data.width&&scope.mqEnabled){scope.windowWidth=data.width;handleWindowResizeEvent();}});scope.checkTabsetScrollingBoundsAndSetMargin=function(){if(scope.tabsetLeftMargin<scope.minLeftMargin){scope.tabsetLeftMargin=scope.minLeftMargin;scope.rightButtonNeeded=false;}
if(scope.tabsetLeftMargin>scope.maxLeftMargin){scope.tabsetLeftMargin=scope.maxLeftMargin;scope.leftButtonNeeded=false;}
tabList.css({'margin-left':scope.tabsetLeftMargin+'px'});};scope.rightButtonClick=function(){scope.tabsetLeftMargin=scope.tabsetLeftMargin+RIGHT_BUTTON_STEP;scope.checkTabsetScrollingBoundsAndSetMargin();scope.resetButtons();handleTimeoutsForNavigationClicks();};scope.leftButtonClick=function(){scope.tabsetLeftMargin=scope.tabsetLeftMargin+LEFT_BUTTON_STEP;scope.checkTabsetScrollingBoundsAndSetMargin();scope.resetButtons();handleTimeoutsForNavigationClicks();};scope.centerTabsetAroundTabWithIndex=function(indexDirection){var halfOfWidthOfTabToBeCentered=0,halfOfTabSetContainersWidth=scope.tabsetWidth/2,idealWidthOfVisibleAreaToSideOfTabToBeCentered=0,idealMarginToPerfectlyCenter=0,newTabsetLeftMargin=0,tabIndex=indexOfCenteredTab+indexDirection;if(getFullWidthOfTabWithIndex(tabIndex)>=0){scope.fullWidthOfTabToBeCentered=getFullWidthOfTabWithIndex(tabIndex);}
halfOfWidthOfTabToBeCentered=scope.fullWidthOfTabToBeCentered/2;idealWidthOfVisibleAreaToSideOfTabToBeCentered=halfOfTabSetContainersWidth-halfOfWidthOfTabToBeCentered;if(getFullWidthOfTabWithIndex(0)>=0){scope.widthOfAreaToLeftOfTabToBeCentered=0;scope.widthOfAreaToRightOfTabToBeCentered=0;for(i=0;i<tabIndex;i+=1){scope.widthOfAreaToLeftOfTabToBeCentered+=getFullWidthOfTabWithIndex(i);}
for(i=tabIndex+1;i<numberOfTabs;i+=1){scope.widthOfAreaToRightOfTabToBeCentered+=getFullWidthOfTabWithIndex(i);}}
idealMarginToPerfectlyCenter=-1*(scope.widthOfAreaToLeftOfTabToBeCentered-idealWidthOfVisibleAreaToSideOfTabToBeCentered)-tabsetLeftPadding;newTabsetLeftMargin=idealMarginToPerfectlyCenter;if(scope.isTabCompressed){if(scope.widthOfAreaToLeftOfTabToBeCentered<idealWidthOfVisibleAreaToSideOfTabToBeCentered){newTabsetLeftMargin=idealMarginToPerfectlyCenter-(idealWidthOfVisibleAreaToSideOfTabToBeCentered-scope.widthOfAreaToLeftOfTabToBeCentered)+tabsetLeftPadding;}
if(scope.widthOfAreaToRightOfTabToBeCentered<idealWidthOfVisibleAreaToSideOfTabToBeCentered){newTabsetLeftMargin=idealMarginToPerfectlyCenter+(idealWidthOfVisibleAreaToSideOfTabToBeCentered-scope.widthOfAreaToRightOfTabToBeCentered);}}else{newTabsetLeftMargin=0;}
if(scope.tabsetLeftMargin!==newTabsetLeftMargin){indexOfCenteredTab+=indexDirection;scope.tabsetLeftMargin=newTabsetLeftMargin;tabList.css({'margin-left':scope.tabsetLeftMargin+'px'});}
scope.resetButtons();};scope.mqEnabled=mediaQueryDetection.isMediaQuerySupported();scope.initializeTabsetBar();}};}]);module.directive('tabsetList',[function(){return{restrict:'A',require:'^tabsetBar',controller:function($scope,$element,$attrs){$scope.tabsArray=[];this.addTab=function(tab){$scope.tabsArray.push(tab);};},link:function(scope,element,attributes,controller){controller.addTabsetList(element);}};}]);module.directive('tab',[function(){return{restrict:'A',require:'^tabsetList',link:function(scope,element,attributes,controller){controller.addTab(element);scope.getTabWidth=function(){return element.innerWidth()+parseInt(element.css('border-left-width'),10)+parseInt(element.css('border-right-width'),10);};}};}]);}(angular));(function(angular){'use strict';angular.module('patterns.organisms').controller('alertMessageController',['$scope','cookies',function($scope,cookies){$scope.isAlertVisible=true;var cookieObj={key:'alertCookie',value:'true',path:'/'};$scope.closeAlert=function(){$scope.isAlertVisible=false;cookies.set(cookieObj);};}]);}(angular));(function(angular){'use strict';var module=angular.module('patterns.organisms'),directive=module.directive('marketWatch',[function(){return{scope:true,restrict:'A',template:angular.element(document.getElementById('market-watch-template')).html()};}]),tenYearNoteRawTicker='^TNX';directive.controller('MarketWatchController',['$scope','$http','$filter','settings',function($scope,$http,$filter,settings){function setMarketWatchValues(response){var data=response.data,i=0,isTenYearNote=function(ticker){return ticker===tenYearNoteRawTicker;},getDisplayValue=function(ticker,quoteNumber){if(isTenYearNote(ticker)){quoteNumber=quoteNumber*0.1;}
return $filter('number')(quoteNumber,2);};for(i;i<data.quote.length;i++){data.quote[i].displayLastTradePrice=getDisplayValue(data.quote[i].tickerSymbol,data.quote[i].lastTradePrice);data.quote[i].displayTodaysPriceChange=getDisplayValue(data.quote[i].tickerSymbol,data.quote[i].todaysPriceChange);}
$scope.marketSummary=data;}
$scope.retrieveMarketWatchFeed=function(){var url=settings.get('mkeRESTAddress')+'/delayed/marketsummary.json?previousClose=true';return $http.get(url).then(setMarketWatchValues);};$scope.todaysDate=new Date();$scope.retrieveMarketWatchFeed();}]);module.filter('tenYearNotePercent',function(){return function(number,ticker){if(ticker===tenYearNoteRawTicker){return number+'%';}
return number;};});module.filter('ticker',function(){return function(ticker){switch(ticker){case'^DJI':return'DJIA';case'^IXIC':return'NASDAQ';case'^SPX':return'S&P 500';case tenYearNoteRawTicker:return'10-Yr T-Note';default:return'';}};});}(angular));(function(angular){'use strict';var module=angular.module('patterns.organisms');module.directive('bannerBackgroundImage',[function(){return{restrict:'A',link:function(scope,element,attrs){element.css({'backgroundImage':'url('+attrs.bannerBackgroundImage+')'});}};}]);}(angular));(function(angular){'use strict';angular.module('patterns.organisms').directive('closeButton',[function(){return{require:'^ngController',restrict:'A',scope:{closeFunction:'&'},replace:true,template:'<div class="close-button-container"><a href="#" class="close-button" title="Close" role="button" data-ng-click="$event.preventDefault(); closeFunction();"></a></div>',link:function(scope,element,attribute,controller){var closeFunctionName=null;if(angular.isDefined(attribute)&&angular.isDefined(attribute.closeFunction)){closeFunctionName=attribute.closeFunction.split('();')[0];if(!scope.$parent.hasOwnProperty(closeFunctionName)){throw new Error('Desired close function is not available');}}else{throw new Error('No close function is defined');}}};}]);}(angular));(function(angular){'use strict';var module=angular.module('patterns.organisms');module.directive('slider',['$document','$window','$timeout','measurements',function($document,$window,$timeout,measurements){function hasInputRangeSupport(){var allowNativeInput=false,ele={type:'text'};if(allowNativeInput){ele=document.createElement('input');ele.setAttribute('type','range');}
return allowNativeInput&&ele.type!=='text';};var tpl=hasInputRangeSupport()?'inputRange':'customSlider';return{scope:{data:'=sdata',max:'@',min:'@',step:'@',defaultValue:'@'},restrict:'A',template:angular.element($document[0].getElementById(tpl+'-template')).html(),replace:true,controller:function($scope){this.setSliderButton=function(element){$scope.btn=element;};this.setSliderBar=function(element){$scope.bar=element;};},link:function($scope,$element){var startX=0,initialMouseX=0,maxX=0,max=parseInt($scope.max,10),min=parseInt($scope.min,10),step=parseFloat($scope.step,10),range=max-min,nSteps=range/step,percent=0,INCREMENT_KEYCODES=[39,38,102,104,107],DECREMENT_KEYCODES=[37,40,98,100,109],stepDistance,autoStepTimeout;function clamp(n,min,max){n=Math.max(min,n);n=Math.min(n,max);return n;}
function calculateDisplaySizes(){maxX=measurements.getElementBounds($scope.bar).width-measurements.getElementBounds($scope.btn).width;stepDistance=maxX/nSteps;}
function positionButtonElement(x){$scope.buttonPosition.left=x+'px';}
function rePositionButton(){if($scope.bar&&$scope.btn){calculateDisplaySizes();var currentStepRange=Math.round(percent*nSteps)*stepDistance;currentStepRange=clamp(currentStepRange,0,maxX);positionButtonElement(currentStepRange);}}
function initializeDefaultValues(){if($scope.defaultValue!==undefined){$scope.defaultValue=parseInt($scope.defaultValue,10);}else if($scope.data!==undefined){$scope.defaultValue=$scope.data;}else{$scope.defaultValue=parseInt($scope.min,10);}
$scope.defaultValue=clamp($scope.defaultValue,min,max);$scope.data=$scope.defaultValue;$scope.dragging=false;percent=(parseInt($scope.data,10)-min)/range;if(!hasInputRangeSupport()){rePositionButton();angular.element($window).bind('resize',rePositionButton);}}
function moveButtonByStep(direction){var currentStep=Math.round(percent*nSteps);currentStep+=direction;$scope.setButtonPosition(currentStep*stepDistance);}
function determineRelativeValueBasedOnConfig(percent){var nSteps=Math.round((percent*range)/step),valueClampedToStep=min+(nSteps*step);$scope.data=valueClampedToStep;}
function mousemove($event){var oEvt=$event.originalEvent,point=$event.type==='touchmove'?oEvt.touches[0]:$event,dx=point.clientX-initialMouseX,x=startX+dx-measurements.getElementBounds($scope.btn).width/2-measurements.getElementBounds($scope.bar).left;x=clamp(x,0,maxX);percent=x/maxX;determineRelativeValueBasedOnConfig(percent);positionButtonElement(x);$scope.$apply('data = '+$scope.data);if(oEvt&&oEvt['preventDefault']){oEvt.preventDefault();}else{return false;}}
function mouseup(){rePositionButton();$scope.$apply('dragging = false');$document.unbind('mousemove',mousemove);$document.unbind('mouseup',mouseup);$document.unbind('touchmove',mousemove);$document.unbind('touchend',mouseup);}
$scope.startDrag=function($event){startX=measurements.getElementBounds(this.btn).left+measurements.getElementBounds(this.btn).width/2;initialMouseX=$event.clientX||startX;calculateDisplaySizes();this.dragging=true;$document.bind('mousemove',mousemove);$document.bind('touchmove',mousemove);$document.bind('mouseup',mouseup);$document.bind('touchend',mouseup);};$scope.setButtonPosition=function(x){x=typeof x==='number'?x:measurements.getElementBounds(this.btn).left;x=clamp(x,0,maxX);percent=x/maxX;rePositionButton();determineRelativeValueBasedOnConfig(percent);return x;};$scope.onBarClick=function(x){x-=measurements.getElementBounds(this.bar).left+measurements.getElementBounds(this.btn).width/2;this.setButtonPosition(x);this.btn.focus();};$scope.onKeyUp=function(){if(autoStepTimeout){$timeout.cancel(autoStepTimeout);autoStepTimeout=null;}
return autoStepTimeout;};$scope.onKeyDown=function($event){var keyCode=$event.keyCode,dir;if(DECREMENT_KEYCODES.indexOf(keyCode)>-1){dir=-1;}else if(INCREMENT_KEYCODES.indexOf(keyCode)>-1){dir=1;}
if(dir!==undefined){moveButtonByStep(dir);autoStepTimeout=$timeout(angular.bind(this,moveButtonByStep,dir),200);}
return autoStepTimeout;};$scope.buttonPosition={left:0};$scope.calculateDisplaySizes=calculateDisplaySizes;initializeDefaultValues();$element.bind('touchstart',angular.bind($scope,$scope.startDrag));}};}]);module.directive('sliderBtn',[function(){return{restrict:'A',require:'^slider',scope:false,link:function(scope,element,attributes,controller){controller.setSliderButton(element[0]);}};}]);module.directive('sliderBar',[function(){return{restrict:'A',require:'^slider',scope:false,link:function(scope,element,attributes,controller){controller.setSliderBar(element[0]);}};}]);module.filter('trimDecimal',[function(){return function(amount){return amount.split('.')[0];};}]);}(angular));(function(angular){'use strict';var module=angular.module('patterns.organisms'),nativePlaceholderAttr='placeholder';module.service('placeHolderSupport',['$document',function($document){var isSupportedCache=false,isCacheInitialized=false;this.isSupported=function(){var testInput=null,initializeCache=function(){isCacheInitialized=true;testInput=$document[0].createElement('input');return(typeof testInput[nativePlaceholderAttr]!=='undefined');};if(!isCacheInitialized){isSupportedCache=initializeCache();}
return isSupportedCache;};}]);module.service('placeHolderCursor',[function(){this.setPosition=function(input,index){var range=null;if(typeof input.createTextRange!=='undefined'){range=input.createTextRange();range.move('character',index);range.select();}else if(typeof input.selectionStart!=='undefined'){input.focus();input.setSelectionRange(index,index);}};}]);module.directive('placeHolder',['placeHolderSupport','placeHolderCursor','$timeout',function(placeHolderSupport,placeHolderCursor,$timeout){return{scope:true,restrict:'A',link:function(scope,element,attributes){var placeholderPolyFillText=attributes.placeHolder,applyPlaceholderText=function(){if(placeHolderSupport.isSupported()){scope.textFieldValue='';scope.isPlaceHolderPolyFill=false;element.attr(nativePlaceholderAttr,placeholderPolyFillText);}else{scope.textFieldValue=placeholderPolyFillText;scope.isPlaceHolderPolyFill=true;$timeout(function(){if(attributes.autoFocus==='true'){placeHolderCursor.setPosition(element[0],0);}});}};applyPlaceholderText();scope.clearPlaceHolderPolyFill=function(){if(!placeHolderSupport.isSupported()&&scope.isPlaceHolderPolyFill){scope.textFieldValue='';scope.isPlaceHolderPolyFill=false;}};}};}]);}(angular));(function(angular){'use strict';angular.module('patterns.organisms').directive('floatList',['$document','$sce','keycodes',function($document,$sce,keycodes){return{link:function($scope,$element){var activeIndex=-1;function onKeyUp(evt){var keycode=evt.keyCode,children=$element.children(),totalChildren=children.length,validKeyboardActivity=false,elementToFocus;if(keycode===keycodes.DOWN_ARROW){activeIndex=activeIndex+1>=totalChildren?0:activeIndex+1;validKeyboardActivity=true;}else if(keycode===keycodes.UP_ARROW){activeIndex=(activeIndex-1<0)?totalChildren-1:activeIndex-1;validKeyboardActivity=true;}
if(validKeyboardActivity){elementToFocus=children[activeIndex];elementToFocus.focus();}}
$scope.$watch('data.floatListEnabled',function(newVal){if(newVal===true){activeIndex=-1;$element[0].scrollTop=0;$document.on('keyup',onKeyUp);}else{$document.off('keyup',onKeyUp);}});$scope.trustAsHtml=function(html){return $sce.trustAsHtml(html);};}};}]);}(angular));(function(angular){'use strict';var module=angular.module('patterns.organisms');module.directive('disableMultipleSubmits',[function(){return{restrict:'A',scope:true,link:function(scope,element,attributes){scope.disableSubmitButton=function(){var loginButton=element.find("#login")[0];if(angular.isDefined(loginButton)&&angular.isDefined(loginButton['disabled'])){loginButton.disabled=true;}};}};}]);}(angular));(function(angular){'use strict';angular.module('patterns.organisms').directive('userName',['$timeout','passmarkFingerprintProxy',function($timeout,passmarkFingerprintProxy){return{scope:true,restrict:'A',link:function(scope,element,attributes){var currentPromise=null,clearUnsubmittedUserName=function(){scope.textFieldValue='';};scope.userNameChange=function(){var delay=180000;$timeout.cancel(currentPromise);currentPromise=$timeout(clearUnsubmittedUserName,delay);};passmarkFingerprintProxy.postFingerprint();}};}]);}(angular));(function(angular){'use strict';angular.module('patterns.organisms').directive('logonInputField',['$timeout','passmarkFingerprintProxy',function($timeout,passmarkFingerprintProxy){return{scope:true,restrict:'A',controller:function($scope){var inputResetDelay=180000,currentPromise=null,clearUnsubmittedUserNameField=function(){$scope.userNameFieldValue='';},clearUnsubmittedPasswordField=function(){$scope.passwordFieldValue='';};$scope.userNameChange=function(){$timeout.cancel(currentPromise);currentPromise=$timeout(clearUnsubmittedUserNameField,inputResetDelay);};$scope.passwordChange=function(){$timeout.cancel(currentPromise);currentPromise=$timeout(clearUnsubmittedPasswordField,inputResetDelay);};},link:function(scope,element,attributes){passmarkFingerprintProxy.postFingerprint();}};}]);}(angular));(function(angular){'use strict';angular.module('patterns.organisms').directive('ajaxRequest',['loadData','$filter',function(loadData,$filter){return{restrict:'A',link:function(scope,element,attrs){var baseUrl=attrs.baseUrl,sourceLocation=attrs.source,apiRequestFulfilled=attrs.apiRequestFulfilled,validateParamaters=function(){var error='paramater not given';if(angular.isUndefined(baseUrl)||baseUrl===""){throw error;}
if(angular.isUndefined(sourceLocation)||sourceLocation===""){throw error;}};function watchAPIRequestValue(newVal,oldVal){var link;if(newVal.toString()!=='true'){link=attrs.baseUrl;loadData.getData(link).success(function(response){var filterName=attrs.datafilter;if(filterName!==''&&angular.isDefined(baseUrl)){scope.data[sourceLocation]=$filter(filterName)(response,scope);}else{scope.data[sourceLocation]=response.results;}
scope.data.apiRequestFulfilled=true;}).error(function(error){scope.data[sourceLocation]=[];scope.data.apiRequestFulfilled=true;});}}
validateParamaters();scope.$watch('data.apiRequestFulfilled',watchAPIRequestValue);scope.data.apiRequestFulfilled=apiRequestFulfilled;if(apiRequestFulfilled===false){watchAPIRequestValue(false,false);}}};}]);}(angular));(function(angular){'use strict';var module=angular.module('patterns.organisms');module.factory('loadData',['$http',function($http){var LoadedData={};LoadedData.getData=function(link){return $http.jsonp(link);};return LoadedData;}]);}(angular));(function(angular){angular.module('patterns.organisms').directive('advancedSearch',['$document','$timeout','containsElement','keycodes',function($document,$timeout,containsElement,keycodes){return{scope:true,restrict:'A',controller:function($scope){var data={active:false,floatListEnabled:false,inputValue:''};$scope.data=data;},link:function($scope,$element,$attrs){var id=$attrs.advancedSearch,data=$scope.formData[id]=$scope.data,REQUEST_TIMEOUT_INTERVAL=400,requestTimeout,boundTimeoutFn=angular.bind(this,invokeAPIRequest);function delayAPIRequest(){if(requestTimeout){$timeout.cancel(requestTimeout);}
requestTimeout=$timeout(boundTimeoutFn,REQUEST_TIMEOUT_INTERVAL);};function invokeAPIRequest(){$scope.data.apiRequestFulfilled=new Date().getTime();requestTimeout=undefined;};function evaluateDocumentClick(evt){var target=evt.target;if(target!=$element[0]&&containsElement($element,angular.element(target))===false){$scope.closeAll();}}
$scope.closeAll=function(evt,applyFocusToInputField){$scope.data.active=false;$scope.data.floatListEnabled=false;$scope.data.inputValue="";if($scope.data.floatListContent){data.floatListContent.length=0;}
$document[0].removeEventListener('click',evaluateDocumentClick);if(applyFocusToInputField===true){$element.find('input')[0].focus();}
if(evt){evt.preventDefault();}
try{$scope.$digest();}catch(e){};};$element.on('click',function(evt){evt.stopPropagation();});$scope.onInputKeypress=function(evt){var val=data.inputValue,keycode=evt?evt.keyCode:null;if(keycode===keycodes.ESC){$scope.closeAll();return;}
if(val.length>=2){delayAPIRequest();}
if(val.length>=2&&data.active===false){data.active=true;}else if(val.length===0){data.active=false;}
if(val.length>1&&data.floatListEnabled===false){data.floatListEnabled=true;$document[0].addEventListener('click',evaluateDocumentClick,true);}else if(val.length<2&&data.floatListEnabled===true){data.floatListEnabled=false;$document[0].removeEventListener('click',evaluateDocumentClick);data.floatListContent.length=0;}};}}}]);}(angular));(function(angular){'use strict';var module=angular.module('patterns.organisms');module.factory('settings',['$document',function($document){return{get:function(name){var nameSpace="ps-setting.",metaDesc=$document[0].getElementsByName(nameSpace+name)[0];if(typeof metaDesc!=='undefined'){return metaDesc.getAttribute('content');}
return'';}};}]);}(angular));(function(angular){'use strict';var module=angular.module('patterns.organisms');module.directive('linkReporting',['$document','$window','hash',function($document,$window,hash){return{scope:true,restrict:'A',link:function(scope,element,attributes){scope.$on('webTrends',angular.noop);scope.linkReportingHandler=angular.noop;}};}]);}(angular));(function(angular){'use strict';var module=angular.module('patterns.organisms'),runModule=angular.module('patterns.organisms.run'),isNotUndefined=function(testObj){return typeof testObj!=='undefined';};module.service('vanguardDomainValidator',['$location',function($location){this.isVanguardDomain=function(){var isValid=false;if($location.host().match(/[a-zA-Z0-9]*\.vanguard\.com/)!==null){isValid=true;}
return isValid;};}]);module.service('webAnalyticsProxy',['settings','$window',function(settings,$window){this.constructor=function(){if(isNotUndefined($window.webAnalytics)&&isNotUndefined($window.webAnalytics.ps_create)){$window.webAnalytics=$window.webAnalytics.ps_create(settings);}};this.getWebAnalyticsObj=function(){return $window.webAnalytics;};}]);module.service('adobeAnalyticsProxy',['$window',function($window){var validatorMap={};this.populateAAVars=function(){if(isNotUndefined($window.adobeAnalytics)&&isNotUndefined($window.adobeAnalytics.populateAAVars)){$window.adobeAnalytics.populateAAVars();}};this.t=function(){if(isNotUndefined($window.adobeAnalytics)&&isNotUndefined($window.adobeAnalytics.t)){$window.adobeAnalytics.t();}};this.getValidatorMap=function(){return validatorMap;};this.populateValidatorMap=function(){validatorMap={'processStartPASOnlineGetStarted':'PAS Online Get Started'};};this.addEvent=function(EventObj){$window.adobeAnalyticsImpl.addEvent(EventObj);};this.getProperty=function(property){return adobeAnalyticsImpl.getProperty(property);};this.updateProperties=function(dataObj){adobeAnalyticsImpl.updateProperties(dataObj);};this.getAdobeAnalyticsObj=function(){return $window.adobeAnalytics;};this.trackLink=function(dataObj){adobeAnalyticsImpl.trackLink(dataObj);};this.getAdobeAnalyticsImplObj=function(){return $window.adobeAnalyticsImpl;};this.adobeAnalyticsAvailable=function(){if(angular.isDefined($window.adobeAnalytics)){return true;}else{return false;}};}]);runModule.run(['$document','$window','vanguardDomainValidator','webAnalyticsProxy','adobeAnalyticsProxy',function($document,$window,vanguardDomainValidator,webAnalyticsProxy,adobeAnalyticsProxy){var evt,evtName='onAnalyticsProxyAvailable';if(vanguardDomainValidator.isVanguardDomain()){webAnalyticsProxy.constructor();adobeAnalyticsProxy.populateAAVars();try{evt=new CustomEvent(evtName,{bubbles:true,cancelable:true});}catch(e){if($document[0].createEvent){evt=$document[0].createEvent('CustomEvent');evt.initEvent(evtName,true,false,{});}}finally{if(typeof evt!=='undefined'){$window.dispatchEvent(evt);}}
adobeAnalyticsProxy.t();}}]);}(angular));(function(angular){'use strict';angular.module('patterns.organisms').directive('adobeEventListener',['adobeAnalyticsProxy','adobeAnalyticsUtility',function(adobeAnalyticsProxy,adobeAnalyticsUtility){return{scope:true,restrict:'C',link:function(scope,element,attr){var link=attr['href'],validQueryKey='adobeEvent',adobeEventValue,sendToAdobe=false,keyValMap={},validatorMap={},propertyPageName='pageName',processEntry='processEntry',adobeEventKey,formattedLink,setHref=function(newLink,attrs){attrs.$set('href',newLink);};adobeAnalyticsProxy.populateValidatorMap();element.on('click touchend',function(event){if(sendToAdobe){event.stopPropagation();var pageName=adobeAnalyticsProxy.getProperty(propertyPageName);window.webAnalytics.updateProperty(processEntry,pageName);adobeAnalyticsProxy.addEvent({name:adobeEventValue,count:1,vars:[processEntry]});adobeAnalyticsProxy.trackLink({type:'o',name:adobeEventKey});}});keyValMap=adobeAnalyticsUtility.getKeyValMap(link);validatorMap=adobeAnalyticsProxy.getValidatorMap();formattedLink=adobeAnalyticsUtility.stripQueryFromLink(link,keyValMap,validQueryKey);if(adobeAnalyticsUtility.validKeyValueProvided(validQueryKey,keyValMap)&&adobeAnalyticsProxy.adobeAnalyticsAvailable()&&angular.isDefined(window.webAnalytics)){var queryValue=keyValMap[validQueryKey];if(queryValue in validatorMap){adobeEventValue=queryValue;adobeEventKey=validatorMap[queryValue];sendToAdobe=true;setHref(formattedLink,attr);}}}};}]);}(angular));(function(angular){'use strict';var module=angular.module('patterns.organisms');module.service('adobeAnalyticsUtility',['$window',function($window){this.getKeyValMap=function(link){var queryParam=getQueryParamaters(link),params,i=0,param,keyVal,keyValMap={};if(queryParam!==null){params=queryParam.split("&");for(i=0;i<params.length;i++){param=params[i];keyVal=param.split("=");keyValMap[keyVal[0]]=keyVal[1];}}
return keyValMap;};var getQueryParamaters=function(link){var queryParam,queryParamaterIndex=link.indexOf('?');if(queryParamaterIndex!==-1){queryParam=link.substring(queryParamaterIndex+1);}else{queryParam=null;}
return queryParam;};this.stripQueryFromLink=function(link,queryMap,key){var formatedLink,counter=0,queryKey,queryVal,query,queryParamaterIndex=link.indexOf('?');if(queryParamaterIndex!==-1){formatedLink=link.substring(0,queryParamaterIndex);for(queryKey in queryMap){if(queryKey!==key){queryVal=queryMap[queryKey];query=queryKey+"="+queryVal;if(counter===0){formatedLink+="?"+query;}else{formatedLink+="&"+query;}
counter+=1;}}}else{formatedLink=null;}
return formatedLink;};this.validKeyValueProvided=function(validKey,keyValMap){if(validKey in keyValMap){if(angular.isDefined(keyValMap[validKey])&&keyValMap[validKey]!==''){return true;}}else{return false;}};}]);}(angular));(function(angular){'use strict';var module=angular.module('patterns.organisms');module.service('hash',[function(){this.calculate=function(string){var hash=0,i,chr,len;if(string.length==0){return hash;}
for(i=0,len=string.length;i<len;i++){chr=string.charCodeAt(i);hash=((hash<<5)-hash)+chr;hash|=0;}
return hash;};}]);}(angular));(function(angular){'use strict';var module=angular.module('patterns.organisms');module.factory('windowDimensions',['$window',function($window){return{height:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;},width:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;}};}]);module.directive('watchWindowResize',['$window','$timeout','windowDimensions',function($window,$timeout,windowDimensions){return{restrict:'A',link:function($scope){$scope.broadcastDimensions=function(){$scope.$broadcast('watchWindowResize::resize',{height:windowDimensions.height(),width:windowDimensions.width()});};angular.element($window).on('resize',function(e){$timeout.cancel($scope.resizing);$scope.resizing=$timeout(function(){$scope.broadcastDimensions();},300);});}};}]);}(angular));(function(angular){'use strict';var module=angular.module('patterns.organisms');module.factory('history',[function(){return history;}]);module.directive('back',['history',function(history){return function($scope,$element,$attrs){$element.on('click',function(){history.go(-1);});};}]);module.directive('backButton',['history',function(history){return{replace:true,template:'<a data-back data-keyboard-actionable class="{{classes}}"><span class=\"label\">{{label}}</span></a>',scope:{'label':'@backButton','classes':'@backButtonClass'}};}]);}(angular));(function(angular){'use strict';var module=angular.module('patterns.organisms');module.directive('tealeaf',['settings',function(settings){return{link:function($scope,$element,$attrs){var tealeafEnabledGS=settings.get('TealeafEnabledGS'),tealeafDisabledPage=settings.get('TealeafDisabledPage'),versionNumber=settings.get('clientSideVersionNumber'),patternsResourcesAddress=settings.get('patternsResourcesAddress');if((tealeafEnabledGS==='true')||(tealeafEnabledGS==='page'&&(tealeafDisabledPage==='false'||tealeafDisabledPage==''))){$element.attr('type','text/javascript');$element.attr('src',patternsResourcesAddress+'/'+versionNumber+'/third-party/teaLeaf/1.0.0/TeaLeaf.js');};}};}]);}(angular));(function(angular){'use strict';var module,runModule;module=angular.module('patterns.organisms');module.factory('trackRequest',[function(){return function(){if(typeof trackRequest==='undefined'){return{};}
return trackRequest.apply(this,arguments);};}]);module.service('MarketingSEO',['settings','$window','$document','trackRequest',function(settings,$window,$document,trackRequest){this.addSEOImg=function(){var CAMPAIGN_ID_PARAMETER_NAME='WT.srch',REFERRER_URL=$window.top.document.referrer,CURRENT_URL=$window.top.document.URL,result=trackRequest(REFERRER_URL,CURRENT_URL,CAMPAIGN_ID_PARAMETER_NAME),img=null,rte=null;if(result.modeOfAccess==='ORGANIC'){if(result.source==='Google'||result.source==='Bing'){rte=settings.get('rteLevel');img=angular.element('<img border=0 width=1 height=1 alt=Advertisement/>');img.attr('src','https://ad.doubleclick.net/ad/N2992.6557.THEVANGUARDGROUP/B5111195;sz=1x1;u='+encodeURI(result.source)+'-'+result.query+'|'+rte+';ord='+encodeURI(result.timestamp)+'?');$document[0].body.appendChild(img[0]);}}};}]);runModule=angular.module('patterns.organisms.run');runModule.run(['MarketingSEO',function(MarketingSEO){MarketingSEO.addSEOImg();}]);}(angular));(function(angular){'use strict';var module=angular.module('patterns.organisms');module.factory('hasHighResDisplay',['$window',function($window){var windowResDisplay=$window.devicePixelRatio;if(typeof windowResDisplay==="undefined"){return false;}
return windowResDisplay>1;}]);module.factory('hasSvg',['$window',function($window){return $window.document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1");}]);module.directive('adaptiveSrc',['hasSvg','hasHighResDisplay','measurements','viewport',function(hasSvg,hasHighResDisplay,measurements,viewport){function resize2xImageTo1x(ele){var isPng=ele.src.indexOf('.png')>-1,imageBounds=measurements.getElementBounds(ele),imageWidth=imageBounds.width/2,imageHeight=imageBounds.height/2;if(isPng&&imageWidth<=viewport.getWidth()){ele.style.width=imageWidth+'px';ele.style.height=imageHeight+'px';}else{angular.element(ele).addClass('maxw');}}
return{restrict:'A',link:function(scope,element,attrs){var src=attrs.adaptiveSrc+((hasSvg&&attrs.svg)?".svg":((hasHighResDisplay&&attrs.highRes)||typeof attrs.defaultToHighRes!=='undefined')?"_2x.png":".png");if(attrs.src!==src){element.on('load',function(evt){angular.element(this).addClass('adaptiveMediaLoaded');if(attrs.constrain2xImageTo1x==='true'){angular.element(element).removeClass('maxw');resize2xImageTo1x(this);}});element.attr('src',src);}}};}]);module.directive('adaptiveIconBackground',['hasSvg','hasHighResDisplay','settings',function(hasSvg,hasHighResDisplay,settings){return{restrict:'A',link:function(scope,element,attrs){var transparentImagePath=settings.get('patternsResourcesAddress')+'/'+settings.get('clientSideVersionNumber')+'/common/adaptive-media/transparent_64x64.png';element.css({'backgroundImage':"url("+attrs.adaptiveIconBackground+((hasSvg&&attrs.svg)?".svg)":(hasHighResDisplay&&attrs.highRes)?"_2x.png)":".png)")});element.attr('src',transparentImagePath);}};}]);module.directive('adaptiveClass',['hasSvg','hasHighResDisplay',function(hasSvg,hasHighResDisplay){return{restrict:'A',link:function(scope,element,attrs){element.addClass((hasSvg&&attrs.svg)?'svg':(hasHighResDisplay&&attrs.highRes)?'highRes':'regular');}};}]);module.directive('delayedSrc',[function(){return{restrict:'A',link:function(scope,element,attributes){element.attr('src',attributes.delayedSrc);}};}]);}(angular));(function(angular,Error,Date){'use strict';angular.module('patterns.organisms').service('cookies',['$document',function($document){var printCookie=function(cookieObj){var getGMTString=function(maxAge){var d=new Date();d.setTime(d.getTime()+maxAge*1000);return d.toGMTString();},pathStatement=cookieObj.path?'Path='+cookieObj.path+';':'',expiresStatement=cookieObj.maxAge?'expires='+getGMTString(cookieObj.maxAge)+';':'';return cookieObj.key+'='+cookieObj.value+';'+pathStatement+expiresStatement;};this.set=function(cookieObj){if(cookieObj.key){$document[0].cookie=printCookie(cookieObj);}else{throw new Error('Invalid cookie key');}};this.get=function(name){var nameEQ=name+'=',cookies=$document[0].cookie.split(';'),i=0,result,c;for(i;i<cookies.length;i++){c=cookies[i];while(c.charAt(0)===' '){c=c.substring(1,c.length);}
if(c.indexOf(nameEQ)===0){result=unescape(c.substring(nameEQ.length,c.length));}}
return result;};}]);}(angular,Error,Date));(function(angular){'use strict';angular.module('patterns.organisms').directive('placeholderText',['$document',function($document){return{scope:true,restrict:'A',link:function($scope,$element,$attrs){var supportsPlaceholderText=angular.isDefined($document[0].createElement("input").placeholder),placeholderText=$attrs.placeholderText;function onKeyActivity(evt){if($scope.data.inputValue===placeholderText){$scope.data.inputValue='';try{$scope.$digest()}catch(e){};}}
function evaluateInputText(newVal){if(newVal===''&&$document[0].activeElement!==$element[0]){$scope.data.inputValue=placeholderText;try{$scope.$digest();}catch(e){};}}
if(supportsPlaceholderText===false){$scope.$watch('data.inputValue',evaluateInputText);$element.on('focus',onKeyActivity);$element.on('blur',angular.bind(this,evaluateInputText,''));}}};}]);}(angular));(function(angular){'use strict';angular.module('patterns.organisms').directive('advancedForm',[function(){return{scope:true,restrict:'A',controller:function($scope){$scope.formData={};},link:function($scope,$element,$attrs){}}}]);}(angular));(function(angular){'use strict';var module=angular.module('patterns.organisms');module.filter('non_vanguard_fund_families',['settings',function(settings){return function(response,scope){var data=response.fundFamily,linkDomain=settings.get('secureSiteAddress'),result,href,i=0,t=data.length,filteredData=[],fundLabel,apiPath='/us/funds/other/bytype?FundFamilyId=';if(!angular.isDefined(data)||!angular.isDefined(scope)){return filteredData;}else{for(i;i<t;i++){result=angular.copy(data[i]);href=linkDomain+apiPath+result.fundFamilyId;fundLabel=result.fundFamilyName;if(result.hasNTFFunds){fundLabel+=' [NTF]';}else if(result.hasLoadFunds){fundLabel+=' [Load]';}
result.markup='<a tabIndex="-1" href="'+href+'"> <span>'+fundLabel+'</span> </a>';result.plainTextLabel=fundLabel;filteredData.push(result);}
return filteredData;}};}]);}(angular));(function(angular){'use strict';var module=angular.module('patterns.organisms');module.filter('non_vanguard_other_funds',['settings',function(settings){return function(data,scope){var linkDomain=settings.get('investorAddress'),searchResult,href,i,filteredData=[],currentQuery,lastItemTerm='See all search results',apiPath='/mutual-funds/profile/overview/';data=data.results;if(!angular.isDefined(data)||!angular.isDefined(scope)){return filteredData;}else{for(i=0;i<data.length;i++){searchResult=angular.copy(data[i]);href=linkDomain+apiPath+searchResult.fundID+'?FundIntExt=EXT';searchResult.markup='<a tabIndex="-1" href="'+href+'"> <span>'+searchResult.term+'</span> </a>';filteredData.push(searchResult);}
currentQuery=scope.data.inputValue;if(filteredData.length>0){filteredData.push({term:lastItemTerm,markup:'<hr> <a href="/search/?query='+currentQuery+'" class="moreResults" tabIndex="-1"><span>'+lastItemTerm+'</span></a>'});}
return filteredData;}};}]);}(angular));(function(angular){'use strict';var module=angular.module('patterns.organisms');module.filter('non_vanguard_stock_etf',['settings',function(settings){return function(data,scope){var linkDomain=settings.get('secureSiteAddress'),searchResult,href,i,filteredData=[],currentQuery,lastItemTerm='See all search results',apiPath='/us/funds/stocks/snapshot?Ticker=';data=data.results;if(!angular.isDefined(data)||!angular.isDefined(scope)){return filteredData;}else{for(i=0;i<data.length;i++){searchResult=angular.copy(data[i]);href=linkDomain+apiPath+searchResult.tickerSymbol;searchResult.markup='<a tabIndex="-1" href="'+href+'"> <span>'+searchResult.term+'</span> </a>';filteredData.push(searchResult);}
currentQuery=scope.data.inputValue;if(filteredData.length>0){filteredData.push({term:lastItemTerm,markup:'<hr> <a href="/search/?query='+currentQuery+'" class="moreResults" tabIndex="-1"><span>'+lastItemTerm+'</span></a>'});}
return filteredData;}};}]);}(angular));